function dP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Qb={exports:{}},tf={},Yb={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=Symbol.for("react.element"),fP=Symbol.for("react.portal"),mP=Symbol.for("react.fragment"),pP=Symbol.for("react.strict_mode"),gP=Symbol.for("react.profiler"),yP=Symbol.for("react.provider"),vP=Symbol.for("react.context"),xP=Symbol.for("react.forward_ref"),wP=Symbol.for("react.suspense"),_P=Symbol.for("react.memo"),EP=Symbol.for("react.lazy"),ow=Symbol.iterator;function bP(t){return t===null||typeof t!="object"?null:(t=ow&&t[ow]||t["@@iterator"],typeof t=="function"?t:null)}var Xb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jb=Object.assign,Zb={};function qa(t,e,n){this.props=t,this.context=e,this.refs=Zb,this.updater=n||Xb}qa.prototype.isReactComponent={};qa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eT(){}eT.prototype=qa.prototype;function Ny(t,e,n){this.props=t,this.context=e,this.refs=Zb,this.updater=n||Xb}var Py=Ny.prototype=new eT;Py.constructor=Ny;Jb(Py,qa.prototype);Py.isPureReactComponent=!0;var aw=Array.isArray,tT=Object.prototype.hasOwnProperty,jy={current:null},nT={key:!0,ref:!0,__self:!0,__source:!0};function rT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)tT.call(e,r)&&!nT.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Xc,type:t,key:i,ref:o,props:s,_owner:jy.current}}function TP(t,e){return{$$typeof:Xc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ry(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xc}function kP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lw=/\/+/g;function xm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kP(""+t.key):e.toString(36)}function gd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xc:case fP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xm(o,0):r,aw(s)?(n="",t!=null&&(n=t.replace(lw,"$&/")+"/"),gd(s,e,n,"",function(u){return u})):s!=null&&(Ry(s)&&(s=TP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",aw(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+xm(i,a);o+=gd(i,e,n,l,s)}else if(l=bP(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+xm(i,a++),o+=gd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ou(t,e,n){if(t==null)return t;var r=[],s=0;return gd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function SP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},yd={transition:null},AP={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:yd,ReactCurrentOwner:jy};function sT(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Ou,forEach:function(t,e,n){Ou(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ou(t,function(){e++}),e},toArray:function(t){return Ou(t,function(e){return e})||[]},only:function(t){if(!Ry(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=qa;we.Fragment=mP;we.Profiler=gP;we.PureComponent=Ny;we.StrictMode=pP;we.Suspense=wP;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AP;we.act=sT;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tT.call(e,l)&&!nT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Xc,type:t.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:vP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yP,_context:t},t.Consumer=t};we.createElement=rT;we.createFactory=function(t){var e=rT.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:xP,render:t}};we.isValidElement=Ry;we.lazy=function(t){return{$$typeof:EP,_payload:{_status:-1,_result:t},_init:SP}};we.memo=function(t,e){return{$$typeof:_P,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=yd.transition;yd.transition={};try{t()}finally{yd.transition=e}};we.unstable_act=sT;we.useCallback=function(t,e){return xn.current.useCallback(t,e)};we.useContext=function(t){return xn.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};we.useEffect=function(t,e){return xn.current.useEffect(t,e)};we.useId=function(){return xn.current.useId()};we.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return xn.current.useMemo(t,e)};we.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};we.useRef=function(t){return xn.current.useRef(t)};we.useState=function(t){return xn.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return xn.current.useTransition()};we.version="18.3.1";Yb.exports=we;var V=Yb.exports;const me=Kb(V),CP=dP({__proto__:null,default:me},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IP=V,NP=Symbol.for("react.element"),PP=Symbol.for("react.fragment"),jP=Object.prototype.hasOwnProperty,RP=IP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DP={key:!0,ref:!0,__self:!0,__source:!0};function iT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jP.call(e,r)&&!DP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:NP,type:t,key:i,ref:o,props:s,_owner:RP.current}}tf.Fragment=PP;tf.jsx=iT;tf.jsxs=iT;Qb.exports=tf;var c=Qb.exports,jp={},oT={exports:{}},Zn={},aT={exports:{}},lT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,U){var z=$.length;$.push(U);e:for(;0<z;){var J=z-1>>>1,G=$[J];if(0<s(G,U))$[J]=U,$[z]=G,z=J;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var U=$[0],z=$.pop();if(z!==U){$[0]=z;e:for(var J=0,G=$.length,Z=G>>>1;J<Z;){var Q=2*(J+1)-1,H=$[Q],se=Q+1,he=$[se];if(0>s(H,z))se<G&&0>s(he,H)?($[J]=he,$[se]=z,J=se):($[J]=H,$[Q]=z,J=Q);else if(se<G&&0>s(he,z))$[J]=he,$[se]=z,J=se;else break e}}return U}function s($,U){var z=$.sortIndex-U.sortIndex;return z!==0?z:$.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,m=3,p=!1,y=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _($){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=$)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(u)}}function I($){if(g=!1,_($),!y)if(n(l)!==null)y=!0,D(O);else{var U=n(u);U!==null&&R(I,U.startTime-$)}}function O($,U){y=!1,g&&(g=!1,v(x),x=-1),p=!0;var z=m;try{for(_(U),h=n(l);h!==null&&(!(h.expirationTime>U)||$&&!j());){var J=h.callback;if(typeof J=="function"){h.callback=null,m=h.priorityLevel;var G=J(h.expirationTime<=U);U=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),_(U)}else r(l);h=n(l)}if(h!==null)var Z=!0;else{var Q=n(u);Q!==null&&R(I,Q.startTime-U),Z=!1}return Z}finally{h=null,m=z,p=!1}}var N=!1,C=null,x=-1,w=5,k=-1;function j(){return!(t.unstable_now()-k<w)}function P(){if(C!==null){var $=t.unstable_now();k=$;var U=!0;try{U=C(!0,$)}finally{U?S():(N=!1,C=null)}}else N=!1}var S;if(typeof T=="function")S=function(){T(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,B=M.port2;M.port1.onmessage=P,S=function(){B.postMessage(null)}}else S=function(){b(P,0)};function D($){C=$,N||(N=!0,S())}function R($,U){x=b(function(){$(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,D(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var z=m;m=U;try{return $()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,U){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=m;m=$;try{return U()}finally{m=z}},t.unstable_scheduleCallback=function($,U,z){var J=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?J+z:J):z=J,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=z+G,$={id:d++,callback:U,priorityLevel:$,startTime:z,expirationTime:G,sortIndex:-1},z>J?($.sortIndex=z,e(u,$),n(l)===null&&$===n(u)&&(g?(v(x),x=-1):g=!0,R(I,z-J))):($.sortIndex=G,e(l,$),y||p||(y=!0,D(O))),$},t.unstable_shouldYield=j,t.unstable_wrapCallback=function($){var U=m;return function(){var z=m;m=U;try{return $.apply(this,arguments)}finally{m=z}}}})(lT);aT.exports=lT;var OP=aT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LP=V,Xn=OP;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cT=new Set,mc={};function Eo(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(mc[t]=e,t=0;t<e.length;t++)cT.add(e[t])}var ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rp=Object.prototype.hasOwnProperty,MP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cw={},uw={};function VP(t){return Rp.call(uw,t)?!0:Rp.call(cw,t)?!1:MP.test(t)?uw[t]=!0:(cw[t]=!0,!1)}function FP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UP(t,e,n,r){if(e===null||typeof e>"u"||FP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dy=/[\-:]([a-z])/g;function Oy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dy,Oy);Gt[e]=new wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dy,Oy);Gt[e]=new wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dy,Oy);Gt[e]=new wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new wn(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ly(t,e,n,r){var s=Gt.hasOwnProperty(e)?Gt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UP(e,n,s,r)&&(n=null),r||s===null?VP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bs=LP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lu=Symbol.for("react.element"),Ko=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),uT=Symbol.for("react.provider"),dT=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),Op=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),Fy=Symbol.for("react.memo"),Os=Symbol.for("react.lazy"),hT=Symbol.for("react.offscreen"),dw=Symbol.iterator;function vl(t){return t===null||typeof t!="object"?null:(t=dw&&t[dw]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,wm;function Nl(t){if(wm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wm=e&&e[1]||""}return`
`+wm+t}var _m=!1;function Em(t,e){if(!t||_m)return"";_m=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{_m=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nl(t):""}function $P(t){switch(t.tag){case 5:return Nl(t.type);case 16:return Nl("Lazy");case 13:return Nl("Suspense");case 19:return Nl("SuspenseList");case 0:case 2:case 15:return t=Em(t.type,!1),t;case 11:return t=Em(t.type.render,!1),t;case 1:return t=Em(t.type,!0),t;default:return""}}function Mp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qo:return"Fragment";case Ko:return"Portal";case Dp:return"Profiler";case My:return"StrictMode";case Op:return"Suspense";case Lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dT:return(t.displayName||"Context")+".Consumer";case uT:return(t._context.displayName||"Context")+".Provider";case Vy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fy:return e=t.displayName||null,e!==null?e:Mp(t.type)||"Memo";case Os:e=t._payload,t=t._init;try{return Mp(t(e))}catch{}}return null}function BP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mp(e);case 8:return e===My?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zP(t){var e=fT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mu(t){t._valueTracker||(t._valueTracker=zP(t))}function mT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vp(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pT(t,e){e=e.checked,e!=null&&Ly(t,"checked",e,!1)}function Fp(t,e){pT(t,e);var n=hi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Up(t,e.type,n):e.hasOwnProperty("defaultValue")&&Up(t,e.type,hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Up(t,e,n){(e!=="number"||qd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pl=Array.isArray;function fa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $p(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Pl(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hi(n)}}function gT(t,e){var n=hi(e.value),r=hi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vu,vT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vu=Vu||document.createElement("div"),Vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WP=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(t){WP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wl[e]=Wl[t]})});function xT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wl.hasOwnProperty(t)&&Wl[t]?(""+e).trim():e+"px"}function wT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=xT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var HP=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zp(t,e){if(e){if(HP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Wp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function Uy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qp=null,ma=null,pa=null;function gw(t){if(t=eu(t)){if(typeof qp!="function")throw Error(te(280));var e=t.stateNode;e&&(e=af(e),qp(t.stateNode,t.type,e))}}function _T(t){ma?pa?pa.push(t):pa=[t]:ma=t}function ET(){if(ma){var t=ma,e=pa;if(pa=ma=null,gw(t),e)for(t=0;t<e.length;t++)gw(e[t])}}function bT(t,e){return t(e)}function TT(){}var bm=!1;function kT(t,e,n){if(bm)return t(e,n);bm=!0;try{return bT(t,e,n)}finally{bm=!1,(ma!==null||pa!==null)&&(TT(),ET())}}function gc(t,e){var n=t.stateNode;if(n===null)return null;var r=af(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var Gp=!1;if(ms)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){Gp=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{Gp=!1}function qP(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Hl=!1,Gd=null,Kd=!1,Kp=null,GP={onError:function(t){Hl=!0,Gd=t}};function KP(t,e,n,r,s,i,o,a,l){Hl=!1,Gd=null,qP.apply(GP,arguments)}function QP(t,e,n,r,s,i,o,a,l){if(KP.apply(this,arguments),Hl){if(Hl){var u=Gd;Hl=!1,Gd=null}else throw Error(te(198));Kd||(Kd=!0,Kp=u)}}function bo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ST(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yw(t){if(bo(t)!==t)throw Error(te(188))}function YP(t){var e=t.alternate;if(!e){if(e=bo(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return yw(s),t;if(i===r)return yw(s),e;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function AT(t){return t=YP(t),t!==null?CT(t):null}function CT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CT(t);if(e!==null)return e;t=t.sibling}return null}var IT=Xn.unstable_scheduleCallback,vw=Xn.unstable_cancelCallback,XP=Xn.unstable_shouldYield,JP=Xn.unstable_requestPaint,_t=Xn.unstable_now,ZP=Xn.unstable_getCurrentPriorityLevel,$y=Xn.unstable_ImmediatePriority,NT=Xn.unstable_UserBlockingPriority,Qd=Xn.unstable_NormalPriority,ej=Xn.unstable_LowPriority,PT=Xn.unstable_IdlePriority,nf=null,Vr=null;function tj(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(nf,t,void 0,(t.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:sj,nj=Math.log,rj=Math.LN2;function sj(t){return t>>>=0,t===0?32:31-(nj(t)/rj|0)|0}var Fu=64,Uu=4194304;function jl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=jl(a):(i&=o,i!==0&&(r=jl(i)))}else o=n&~s,o!==0?r=jl(o):i!==0&&(r=jl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Er(e),s=1<<n,r|=t[n],e&=~s;return r}function ij(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Er(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ij(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jT(){var t=Fu;return Fu<<=1,!(Fu&4194240)&&(Fu=64),t}function Tm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Er(e),t[e]=n}function aj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Er(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function By(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Er(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Me=0;function RT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DT,zy,OT,LT,MT,Yp=!1,$u=[],Zs=null,ei=null,ti=null,yc=new Map,vc=new Map,Fs=[],lj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xw(t,e){switch(t){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":yc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(e.pointerId)}}function wl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=eu(e),e!==null&&zy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function cj(t,e,n,r,s){switch(e){case"focusin":return Zs=wl(Zs,t,e,n,r,s),!0;case"dragenter":return ei=wl(ei,t,e,n,r,s),!0;case"mouseover":return ti=wl(ti,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return yc.set(i,wl(yc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vc.set(i,wl(vc.get(i)||null,t,e,n,r,s)),!0}return!1}function VT(t){var e=Qi(t.target);if(e!==null){var n=bo(e);if(n!==null){if(e=n.tag,e===13){if(e=ST(n),e!==null){t.blockedOn=e,MT(t.priority,function(){OT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hp=r,n.target.dispatchEvent(r),Hp=null}else return e=eu(n),e!==null&&zy(e),t.blockedOn=n,!1;e.shift()}return!0}function ww(t,e,n){vd(t)&&n.delete(e)}function uj(){Yp=!1,Zs!==null&&vd(Zs)&&(Zs=null),ei!==null&&vd(ei)&&(ei=null),ti!==null&&vd(ti)&&(ti=null),yc.forEach(ww),vc.forEach(ww)}function _l(t,e){t.blockedOn===e&&(t.blockedOn=null,Yp||(Yp=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,uj)))}function xc(t){function e(s){return _l(s,t)}if(0<$u.length){_l($u[0],t);for(var n=1;n<$u.length;n++){var r=$u[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zs!==null&&_l(Zs,t),ei!==null&&_l(ei,t),ti!==null&&_l(ti,t),yc.forEach(e),vc.forEach(e),n=0;n<Fs.length;n++)r=Fs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fs.length&&(n=Fs[0],n.blockedOn===null);)VT(n),n.blockedOn===null&&Fs.shift()}var ga=bs.ReactCurrentBatchConfig,Xd=!0;function dj(t,e,n,r){var s=Me,i=ga.transition;ga.transition=null;try{Me=1,Wy(t,e,n,r)}finally{Me=s,ga.transition=i}}function hj(t,e,n,r){var s=Me,i=ga.transition;ga.transition=null;try{Me=4,Wy(t,e,n,r)}finally{Me=s,ga.transition=i}}function Wy(t,e,n,r){if(Xd){var s=Xp(t,e,n,r);if(s===null)Dm(t,e,r,Jd,n),xw(t,r);else if(cj(s,t,e,n,r))r.stopPropagation();else if(xw(t,r),e&4&&-1<lj.indexOf(t)){for(;s!==null;){var i=eu(s);if(i!==null&&DT(i),i=Xp(t,e,n,r),i===null&&Dm(t,e,r,Jd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Dm(t,e,r,null,n)}}var Jd=null;function Xp(t,e,n,r){if(Jd=null,t=Uy(r),t=Qi(t),t!==null)if(e=bo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ST(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jd=t,null}function FT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZP()){case $y:return 1;case NT:return 4;case Qd:case ej:return 16;case PT:return 536870912;default:return 16}default:return 16}}var Gs=null,Hy=null,xd=null;function UT(){if(xd)return xd;var t,e=Hy,n=e.length,r,s="value"in Gs?Gs.value:Gs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return xd=s.slice(t,1<r?1-r:void 0)}function wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bu(){return!0}function _w(){return!1}function er(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bu:_w,this.isPropagationStopped=_w,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),e}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qy=er(Ga),Zc=ot({},Ga,{view:0,detail:0}),fj=er(Zc),km,Sm,El,rf=ot({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==El&&(El&&t.type==="mousemove"?(km=t.screenX-El.screenX,Sm=t.screenY-El.screenY):Sm=km=0,El=t),km)},movementY:function(t){return"movementY"in t?t.movementY:Sm}}),Ew=er(rf),mj=ot({},rf,{dataTransfer:0}),pj=er(mj),gj=ot({},Zc,{relatedTarget:0}),Am=er(gj),yj=ot({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),vj=er(yj),xj=ot({},Ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wj=er(xj),_j=ot({},Ga,{data:0}),bw=er(_j),Ej={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tj[t])?!!e[t]:!1}function Gy(){return kj}var Sj=ot({},Zc,{key:function(t){if(t.key){var e=Ej[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gy,charCode:function(t){return t.type==="keypress"?wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Aj=er(Sj),Cj=ot({},rf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tw=er(Cj),Ij=ot({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gy}),Nj=er(Ij),Pj=ot({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),jj=er(Pj),Rj=ot({},rf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dj=er(Rj),Oj=[9,13,27,32],Ky=ms&&"CompositionEvent"in window,ql=null;ms&&"documentMode"in document&&(ql=document.documentMode);var Lj=ms&&"TextEvent"in window&&!ql,$T=ms&&(!Ky||ql&&8<ql&&11>=ql),kw=" ",Sw=!1;function BT(t,e){switch(t){case"keyup":return Oj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yo=!1;function Mj(t,e){switch(t){case"compositionend":return zT(e);case"keypress":return e.which!==32?null:(Sw=!0,kw);case"textInput":return t=e.data,t===kw&&Sw?null:t;default:return null}}function Vj(t,e){if(Yo)return t==="compositionend"||!Ky&&BT(t,e)?(t=UT(),xd=Hy=Gs=null,Yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $T&&e.locale!=="ko"?null:e.data;default:return null}}var Fj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Aw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Fj[t.type]:e==="textarea"}function WT(t,e,n,r){_T(r),e=Zd(e,"onChange"),0<e.length&&(n=new qy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gl=null,wc=null;function Uj(t){t2(t,0)}function sf(t){var e=Zo(t);if(mT(e))return t}function $j(t,e){if(t==="change")return e}var HT=!1;if(ms){var Cm;if(ms){var Im="oninput"in document;if(!Im){var Cw=document.createElement("div");Cw.setAttribute("oninput","return;"),Im=typeof Cw.oninput=="function"}Cm=Im}else Cm=!1;HT=Cm&&(!document.documentMode||9<document.documentMode)}function Iw(){Gl&&(Gl.detachEvent("onpropertychange",qT),wc=Gl=null)}function qT(t){if(t.propertyName==="value"&&sf(wc)){var e=[];WT(e,wc,t,Uy(t)),kT(Uj,e)}}function Bj(t,e,n){t==="focusin"?(Iw(),Gl=e,wc=n,Gl.attachEvent("onpropertychange",qT)):t==="focusout"&&Iw()}function zj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sf(wc)}function Wj(t,e){if(t==="click")return sf(e)}function Hj(t,e){if(t==="input"||t==="change")return sf(e)}function qj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:qj;function _c(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rp.call(e,s)||!kr(t[s],e[s]))return!1}return!0}function Nw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pw(t,e){var n=Nw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nw(n)}}function GT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function KT(){for(var t=window,e=qd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qd(t.document)}return e}function Qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Gj(t){var e=KT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GT(n.ownerDocument.documentElement,n)){if(r!==null&&Qy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Pw(n,i);var o=Pw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Kj=ms&&"documentMode"in document&&11>=document.documentMode,Xo=null,Jp=null,Kl=null,Zp=!1;function jw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zp||Xo==null||Xo!==qd(r)||(r=Xo,"selectionStart"in r&&Qy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kl&&_c(Kl,r)||(Kl=r,r=Zd(Jp,"onSelect"),0<r.length&&(e=new qy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xo)))}function zu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jo={animationend:zu("Animation","AnimationEnd"),animationiteration:zu("Animation","AnimationIteration"),animationstart:zu("Animation","AnimationStart"),transitionend:zu("Transition","TransitionEnd")},Nm={},QT={};ms&&(QT=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function of(t){if(Nm[t])return Nm[t];if(!Jo[t])return t;var e=Jo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in QT)return Nm[t]=e[n];return t}var YT=of("animationend"),XT=of("animationiteration"),JT=of("animationstart"),ZT=of("transitionend"),e2=new Map,Rw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(t,e){e2.set(t,e),Eo(e,[t])}for(var Pm=0;Pm<Rw.length;Pm++){var jm=Rw[Pm],Qj=jm.toLowerCase(),Yj=jm[0].toUpperCase()+jm.slice(1);Ti(Qj,"on"+Yj)}Ti(YT,"onAnimationEnd");Ti(XT,"onAnimationIteration");Ti(JT,"onAnimationStart");Ti("dblclick","onDoubleClick");Ti("focusin","onFocus");Ti("focusout","onBlur");Ti(ZT,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);Eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function Dw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QP(r,e,void 0,t),t.currentTarget=null}function t2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Dw(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Dw(s,a,u),i=l}}}if(Kd)throw t=Kp,Kd=!1,Kp=null,t}function Ye(t,e){var n=e[sg];n===void 0&&(n=e[sg]=new Set);var r=t+"__bubble";n.has(r)||(n2(e,t,2,!1),n.add(r))}function Rm(t,e,n){var r=0;e&&(r|=4),n2(n,t,r,e)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function Ec(t){if(!t[Wu]){t[Wu]=!0,cT.forEach(function(n){n!=="selectionchange"&&(Xj.has(n)||Rm(n,!1,t),Rm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wu]||(e[Wu]=!0,Rm("selectionchange",!1,e))}}function n2(t,e,n,r){switch(FT(e)){case 1:var s=dj;break;case 4:s=hj;break;default:s=Wy}n=s.bind(null,e,n,t),s=void 0,!Gp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Dm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Qi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}kT(function(){var u=i,d=Uy(n),h=[];e:{var m=e2.get(t);if(m!==void 0){var p=qy,y=t;switch(t){case"keypress":if(wd(n)===0)break e;case"keydown":case"keyup":p=Aj;break;case"focusin":y="focus",p=Am;break;case"focusout":y="blur",p=Am;break;case"beforeblur":case"afterblur":p=Am;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ew;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=pj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Nj;break;case YT:case XT:case JT:p=vj;break;case ZT:p=jj;break;case"scroll":p=fj;break;case"wheel":p=Dj;break;case"copy":case"cut":case"paste":p=wj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Tw}var g=(e&4)!==0,b=!g&&t==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var T=u,_;T!==null;){_=T;var I=_.stateNode;if(_.tag===5&&I!==null&&(_=I,v!==null&&(I=gc(T,v),I!=null&&g.push(bc(T,I,_)))),b)break;T=T.return}0<g.length&&(m=new p(m,y,null,n,d),h.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Hp&&(y=n.relatedTarget||n.fromElement)&&(Qi(y)||y[ps]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?Qi(y):null,y!==null&&(b=bo(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(g=Ew,I="onMouseLeave",v="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(g=Tw,I="onPointerLeave",v="onPointerEnter",T="pointer"),b=p==null?m:Zo(p),_=y==null?m:Zo(y),m=new g(I,T+"leave",p,n,d),m.target=b,m.relatedTarget=_,I=null,Qi(d)===u&&(g=new g(v,T+"enter",y,n,d),g.target=_,g.relatedTarget=b,I=g),b=I,p&&y)t:{for(g=p,v=y,T=0,_=g;_;_=Lo(_))T++;for(_=0,I=v;I;I=Lo(I))_++;for(;0<T-_;)g=Lo(g),T--;for(;0<_-T;)v=Lo(v),_--;for(;T--;){if(g===v||v!==null&&g===v.alternate)break t;g=Lo(g),v=Lo(v)}g=null}else g=null;p!==null&&Ow(h,m,p,g,!1),y!==null&&b!==null&&Ow(h,b,y,g,!0)}}e:{if(m=u?Zo(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var O=$j;else if(Aw(m))if(HT)O=Hj;else{O=zj;var N=Bj}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=Wj);if(O&&(O=O(t,u))){WT(h,O,n,d);break e}N&&N(t,m,u),t==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Up(m,"number",m.value)}switch(N=u?Zo(u):window,t){case"focusin":(Aw(N)||N.contentEditable==="true")&&(Xo=N,Jp=u,Kl=null);break;case"focusout":Kl=Jp=Xo=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,jw(h,n,d);break;case"selectionchange":if(Kj)break;case"keydown":case"keyup":jw(h,n,d)}var C;if(Ky)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Yo?BT(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&($T&&n.locale!=="ko"&&(Yo||x!=="onCompositionStart"?x==="onCompositionEnd"&&Yo&&(C=UT()):(Gs=d,Hy="value"in Gs?Gs.value:Gs.textContent,Yo=!0)),N=Zd(u,x),0<N.length&&(x=new bw(x,t,null,n,d),h.push({event:x,listeners:N}),C?x.data=C:(C=zT(n),C!==null&&(x.data=C)))),(C=Lj?Mj(t,n):Vj(t,n))&&(u=Zd(u,"onBeforeInput"),0<u.length&&(d=new bw("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}t2(h,e)})}function bc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gc(t,n),i!=null&&r.unshift(bc(t,i,s)),i=gc(t,e),i!=null&&r.push(bc(t,i,s))),t=t.return}return r}function Lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ow(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=gc(n,i),l!=null&&o.unshift(bc(n,l,a))):s||(l=gc(n,i),l!=null&&o.push(bc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Jj=/\r\n?/g,Zj=/\u0000|\uFFFD/g;function Lw(t){return(typeof t=="string"?t:""+t).replace(Jj,`
`).replace(Zj,"")}function Hu(t,e,n){if(e=Lw(e),Lw(t)!==e&&n)throw Error(te(425))}function eh(){}var eg=null,tg=null;function ng(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rg=typeof setTimeout=="function"?setTimeout:void 0,eR=typeof clearTimeout=="function"?clearTimeout:void 0,Mw=typeof Promise=="function"?Promise:void 0,tR=typeof queueMicrotask=="function"?queueMicrotask:typeof Mw<"u"?function(t){return Mw.resolve(null).then(t).catch(nR)}:rg;function nR(t){setTimeout(function(){throw t})}function Om(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xc(e)}function ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ka=Math.random().toString(36).slice(2),Lr="__reactFiber$"+Ka,Tc="__reactProps$"+Ka,ps="__reactContainer$"+Ka,sg="__reactEvents$"+Ka,rR="__reactListeners$"+Ka,sR="__reactHandles$"+Ka;function Qi(t){var e=t[Lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ps]||n[Lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vw(t);t!==null;){if(n=t[Lr])return n;t=Vw(t)}return e}t=n,n=t.parentNode}return null}function eu(t){return t=t[Lr]||t[ps],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function af(t){return t[Tc]||null}var ig=[],ea=-1;function ki(t){return{current:t}}function Je(t){0>ea||(t.current=ig[ea],ig[ea]=null,ea--)}function qe(t,e){ea++,ig[ea]=t.current,t.current=e}var fi={},ln=ki(fi),Pn=ki(!1),ao=fi;function Aa(t,e){var n=t.type.contextTypes;if(!n)return fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jn(t){return t=t.childContextTypes,t!=null}function th(){Je(Pn),Je(ln)}function Fw(t,e,n){if(ln.current!==fi)throw Error(te(168));qe(ln,e),qe(Pn,n)}function r2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(te(108,BP(t)||"Unknown",s));return ot({},n,r)}function nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,ao=ln.current,qe(ln,t),qe(Pn,Pn.current),!0}function Uw(t,e,n){var r=t.stateNode;if(!r)throw Error(te(169));n?(t=r2(t,e,ao),r.__reactInternalMemoizedMergedChildContext=t,Je(Pn),Je(ln),qe(ln,t)):Je(Pn),qe(Pn,n)}var rs=null,lf=!1,Lm=!1;function s2(t){rs===null?rs=[t]:rs.push(t)}function iR(t){lf=!0,s2(t)}function Si(){if(!Lm&&rs!==null){Lm=!0;var t=0,e=Me;try{var n=rs;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rs=null,lf=!1}catch(s){throw rs!==null&&(rs=rs.slice(t+1)),IT($y,Si),s}finally{Me=e,Lm=!1}}return null}var ta=[],na=0,rh=null,sh=0,rr=[],sr=0,lo=null,ss=1,is="";function Bi(t,e){ta[na++]=sh,ta[na++]=rh,rh=t,sh=e}function i2(t,e,n){rr[sr++]=ss,rr[sr++]=is,rr[sr++]=lo,lo=t;var r=ss;t=is;var s=32-Er(r)-1;r&=~(1<<s),n+=1;var i=32-Er(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ss=1<<32-Er(e)+s|n<<s|r,is=i+t}else ss=1<<i|n<<s|r,is=t}function Yy(t){t.return!==null&&(Bi(t,1),i2(t,1,0))}function Xy(t){for(;t===rh;)rh=ta[--na],ta[na]=null,sh=ta[--na],ta[na]=null;for(;t===lo;)lo=rr[--sr],rr[sr]=null,is=rr[--sr],rr[sr]=null,ss=rr[--sr],rr[sr]=null}var Qn=null,Wn=null,et=!1,wr=null;function o2(t,e){var n=or(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $w(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qn=t,Wn=ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qn=t,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lo!==null?{id:ss,overflow:is}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=or(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qn=t,Wn=null,!0):!1;default:return!1}}function og(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ag(t){if(et){var e=Wn;if(e){var n=e;if(!$w(t,e)){if(og(t))throw Error(te(418));e=ni(n.nextSibling);var r=Qn;e&&$w(t,e)?o2(r,n):(t.flags=t.flags&-4097|2,et=!1,Qn=t)}}else{if(og(t))throw Error(te(418));t.flags=t.flags&-4097|2,et=!1,Qn=t}}}function Bw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function qu(t){if(t!==Qn)return!1;if(!et)return Bw(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ng(t.type,t.memoizedProps)),e&&(e=Wn)){if(og(t))throw a2(),Error(te(418));for(;e;)o2(t,e),e=ni(e.nextSibling)}if(Bw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wn=ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wn=null}}else Wn=Qn?ni(t.stateNode.nextSibling):null;return!0}function a2(){for(var t=Wn;t;)t=ni(t.nextSibling)}function Ca(){Wn=Qn=null,et=!1}function Jy(t){wr===null?wr=[t]:wr.push(t)}var oR=bs.ReactCurrentBatchConfig;function bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function Gu(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zw(t){var e=t._init;return e(t._payload)}function l2(t){function e(v,T){if(t){var _=v.deletions;_===null?(v.deletions=[T],v.flags|=16):_.push(T)}}function n(v,T){if(!t)return null;for(;T!==null;)e(v,T),T=T.sibling;return null}function r(v,T){for(v=new Map;T!==null;)T.key!==null?v.set(T.key,T):v.set(T.index,T),T=T.sibling;return v}function s(v,T){return v=oi(v,T),v.index=0,v.sibling=null,v}function i(v,T,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<T?(v.flags|=2,T):_):(v.flags|=2,T)):(v.flags|=1048576,T)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,T,_,I){return T===null||T.tag!==6?(T=zm(_,v.mode,I),T.return=v,T):(T=s(T,_),T.return=v,T)}function l(v,T,_,I){var O=_.type;return O===Qo?d(v,T,_.props.children,I,_.key):T!==null&&(T.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Os&&zw(O)===T.type)?(I=s(T,_.props),I.ref=bl(v,T,_),I.return=v,I):(I=Ad(_.type,_.key,_.props,null,v.mode,I),I.ref=bl(v,T,_),I.return=v,I)}function u(v,T,_,I){return T===null||T.tag!==4||T.stateNode.containerInfo!==_.containerInfo||T.stateNode.implementation!==_.implementation?(T=Wm(_,v.mode,I),T.return=v,T):(T=s(T,_.children||[]),T.return=v,T)}function d(v,T,_,I,O){return T===null||T.tag!==7?(T=no(_,v.mode,I,O),T.return=v,T):(T=s(T,_),T.return=v,T)}function h(v,T,_){if(typeof T=="string"&&T!==""||typeof T=="number")return T=zm(""+T,v.mode,_),T.return=v,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Lu:return _=Ad(T.type,T.key,T.props,null,v.mode,_),_.ref=bl(v,null,T),_.return=v,_;case Ko:return T=Wm(T,v.mode,_),T.return=v,T;case Os:var I=T._init;return h(v,I(T._payload),_)}if(Pl(T)||vl(T))return T=no(T,v.mode,_,null),T.return=v,T;Gu(v,T)}return null}function m(v,T,_,I){var O=T!==null?T.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return O!==null?null:a(v,T,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Lu:return _.key===O?l(v,T,_,I):null;case Ko:return _.key===O?u(v,T,_,I):null;case Os:return O=_._init,m(v,T,O(_._payload),I)}if(Pl(_)||vl(_))return O!==null?null:d(v,T,_,I,null);Gu(v,_)}return null}function p(v,T,_,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(_)||null,a(T,v,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Lu:return v=v.get(I.key===null?_:I.key)||null,l(T,v,I,O);case Ko:return v=v.get(I.key===null?_:I.key)||null,u(T,v,I,O);case Os:var N=I._init;return p(v,T,_,N(I._payload),O)}if(Pl(I)||vl(I))return v=v.get(_)||null,d(T,v,I,O,null);Gu(T,I)}return null}function y(v,T,_,I){for(var O=null,N=null,C=T,x=T=0,w=null;C!==null&&x<_.length;x++){C.index>x?(w=C,C=null):w=C.sibling;var k=m(v,C,_[x],I);if(k===null){C===null&&(C=w);break}t&&C&&k.alternate===null&&e(v,C),T=i(k,T,x),N===null?O=k:N.sibling=k,N=k,C=w}if(x===_.length)return n(v,C),et&&Bi(v,x),O;if(C===null){for(;x<_.length;x++)C=h(v,_[x],I),C!==null&&(T=i(C,T,x),N===null?O=C:N.sibling=C,N=C);return et&&Bi(v,x),O}for(C=r(v,C);x<_.length;x++)w=p(C,v,x,_[x],I),w!==null&&(t&&w.alternate!==null&&C.delete(w.key===null?x:w.key),T=i(w,T,x),N===null?O=w:N.sibling=w,N=w);return t&&C.forEach(function(j){return e(v,j)}),et&&Bi(v,x),O}function g(v,T,_,I){var O=vl(_);if(typeof O!="function")throw Error(te(150));if(_=O.call(_),_==null)throw Error(te(151));for(var N=O=null,C=T,x=T=0,w=null,k=_.next();C!==null&&!k.done;x++,k=_.next()){C.index>x?(w=C,C=null):w=C.sibling;var j=m(v,C,k.value,I);if(j===null){C===null&&(C=w);break}t&&C&&j.alternate===null&&e(v,C),T=i(j,T,x),N===null?O=j:N.sibling=j,N=j,C=w}if(k.done)return n(v,C),et&&Bi(v,x),O;if(C===null){for(;!k.done;x++,k=_.next())k=h(v,k.value,I),k!==null&&(T=i(k,T,x),N===null?O=k:N.sibling=k,N=k);return et&&Bi(v,x),O}for(C=r(v,C);!k.done;x++,k=_.next())k=p(C,v,x,k.value,I),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?x:k.key),T=i(k,T,x),N===null?O=k:N.sibling=k,N=k);return t&&C.forEach(function(P){return e(v,P)}),et&&Bi(v,x),O}function b(v,T,_,I){if(typeof _=="object"&&_!==null&&_.type===Qo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Lu:e:{for(var O=_.key,N=T;N!==null;){if(N.key===O){if(O=_.type,O===Qo){if(N.tag===7){n(v,N.sibling),T=s(N,_.props.children),T.return=v,v=T;break e}}else if(N.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Os&&zw(O)===N.type){n(v,N.sibling),T=s(N,_.props),T.ref=bl(v,N,_),T.return=v,v=T;break e}n(v,N);break}else e(v,N);N=N.sibling}_.type===Qo?(T=no(_.props.children,v.mode,I,_.key),T.return=v,v=T):(I=Ad(_.type,_.key,_.props,null,v.mode,I),I.ref=bl(v,T,_),I.return=v,v=I)}return o(v);case Ko:e:{for(N=_.key;T!==null;){if(T.key===N)if(T.tag===4&&T.stateNode.containerInfo===_.containerInfo&&T.stateNode.implementation===_.implementation){n(v,T.sibling),T=s(T,_.children||[]),T.return=v,v=T;break e}else{n(v,T);break}else e(v,T);T=T.sibling}T=Wm(_,v.mode,I),T.return=v,v=T}return o(v);case Os:return N=_._init,b(v,T,N(_._payload),I)}if(Pl(_))return y(v,T,_,I);if(vl(_))return g(v,T,_,I);Gu(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,T!==null&&T.tag===6?(n(v,T.sibling),T=s(T,_),T.return=v,v=T):(n(v,T),T=zm(_,v.mode,I),T.return=v,v=T),o(v)):n(v,T)}return b}var Ia=l2(!0),c2=l2(!1),ih=ki(null),oh=null,ra=null,Zy=null;function ev(){Zy=ra=oh=null}function tv(t){var e=ih.current;Je(ih),t._currentValue=e}function lg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ya(t,e){oh=t,Zy=ra=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nn=!0),t.firstContext=null)}function ur(t){var e=t._currentValue;if(Zy!==t)if(t={context:t,memoizedValue:e,next:null},ra===null){if(oh===null)throw Error(te(308));ra=t,oh.dependencies={lanes:0,firstContext:t}}else ra=ra.next=t;return e}var Yi=null;function nv(t){Yi===null?Yi=[t]:Yi.push(t)}function u2(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,nv(e)):(n.next=s.next,s.next=n),e.interleaved=n,gs(t,r)}function gs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ls=!1;function rv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,gs(t,n)}return s=r.interleaved,s===null?(e.next=e,nv(r)):(e.next=s.next,s.next=e),r.interleaved=e,gs(t,n)}function _d(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,By(t,n)}}function Ww(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ah(t,e,n,r){var s=t.updateQueue;Ls=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,g=a;switch(m=e,p=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=ot({},h,m);break e;case 2:Ls=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);uo|=o,t.lanes=o,t.memoizedState=h}}function Hw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(te(191,s));s.call(r)}}}var tu={},Fr=ki(tu),kc=ki(tu),Sc=ki(tu);function Xi(t){if(t===tu)throw Error(te(174));return t}function sv(t,e){switch(qe(Sc,e),qe(kc,t),qe(Fr,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bp(e,t)}Je(Fr),qe(Fr,e)}function Na(){Je(Fr),Je(kc),Je(Sc)}function h2(t){Xi(Sc.current);var e=Xi(Fr.current),n=Bp(e,t.type);e!==n&&(qe(kc,t),qe(Fr,n))}function iv(t){kc.current===t&&(Je(Fr),Je(kc))}var rt=ki(0);function lh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mm=[];function ov(){for(var t=0;t<Mm.length;t++)Mm[t]._workInProgressVersionPrimary=null;Mm.length=0}var Ed=bs.ReactCurrentDispatcher,Vm=bs.ReactCurrentBatchConfig,co=0,it=null,Nt=null,Lt=null,ch=!1,Ql=!1,Ac=0,aR=0;function Jt(){throw Error(te(321))}function av(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kr(t[n],e[n]))return!1;return!0}function lv(t,e,n,r,s,i){if(co=i,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ed.current=t===null||t.memoizedState===null?dR:hR,t=n(r,s),Ql){i=0;do{if(Ql=!1,Ac=0,25<=i)throw Error(te(301));i+=1,Lt=Nt=null,e.updateQueue=null,Ed.current=fR,t=n(r,s)}while(Ql)}if(Ed.current=uh,e=Nt!==null&&Nt.next!==null,co=0,Lt=Nt=it=null,ch=!1,e)throw Error(te(300));return t}function cv(){var t=Ac!==0;return Ac=0,t}function Rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?it.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function dr(){if(Nt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Lt===null?it.memoizedState:Lt.next;if(e!==null)Lt=e,Nt=t;else{if(t===null)throw Error(te(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Lt===null?it.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function Cc(t,e){return typeof e=="function"?e(t):e}function Fm(t){var e=dr(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=Nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((co&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,it.lanes|=d,uo|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,kr(r,e.memoizedState)||(Nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,it.lanes|=i,uo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Um(t){var e=dr(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);kr(i,e.memoizedState)||(Nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function f2(){}function m2(t,e){var n=it,r=dr(),s=e(),i=!kr(r.memoizedState,s);if(i&&(r.memoizedState=s,Nn=!0),r=r.queue,uv(y2.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Lt!==null&&Lt.memoizedState.tag&1){if(n.flags|=2048,Ic(9,g2.bind(null,n,r,s,e),void 0,null),Vt===null)throw Error(te(349));co&30||p2(n,e,s)}return s}function p2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function g2(t,e,n,r){e.value=n,e.getSnapshot=r,v2(e)&&x2(t)}function y2(t,e,n){return n(function(){v2(e)&&x2(t)})}function v2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kr(t,n)}catch{return!0}}function x2(t){var e=gs(t,1);e!==null&&br(e,t,1,-1)}function qw(t){var e=Rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:t},e.queue=t,t=t.dispatch=uR.bind(null,it,t),[e.memoizedState,t]}function Ic(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function w2(){return dr().memoizedState}function bd(t,e,n,r){var s=Rr();it.flags|=t,s.memoizedState=Ic(1|e,n,void 0,r===void 0?null:r)}function cf(t,e,n,r){var s=dr();r=r===void 0?null:r;var i=void 0;if(Nt!==null){var o=Nt.memoizedState;if(i=o.destroy,r!==null&&av(r,o.deps)){s.memoizedState=Ic(e,n,i,r);return}}it.flags|=t,s.memoizedState=Ic(1|e,n,i,r)}function Gw(t,e){return bd(8390656,8,t,e)}function uv(t,e){return cf(2048,8,t,e)}function _2(t,e){return cf(4,2,t,e)}function E2(t,e){return cf(4,4,t,e)}function b2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T2(t,e,n){return n=n!=null?n.concat([t]):null,cf(4,4,b2.bind(null,e,t),n)}function dv(){}function k2(t,e){var n=dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&av(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function S2(t,e){var n=dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&av(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function A2(t,e,n){return co&21?(kr(n,e)||(n=jT(),it.lanes|=n,uo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nn=!0),t.memoizedState=n)}function lR(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Vm.transition;Vm.transition={};try{t(!1),e()}finally{Me=n,Vm.transition=r}}function C2(){return dr().memoizedState}function cR(t,e,n){var r=ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},I2(t))N2(e,n);else if(n=u2(t,e,n,r),n!==null){var s=yn();br(n,t,r,s),P2(n,e,r)}}function uR(t,e,n){var r=ii(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(I2(t))N2(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,kr(a,o)){var l=e.interleaved;l===null?(s.next=s,nv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=u2(t,e,s,r),n!==null&&(s=yn(),br(n,t,r,s),P2(n,e,r))}}function I2(t){var e=t.alternate;return t===it||e!==null&&e===it}function N2(t,e){Ql=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,By(t,n)}}var uh={readContext:ur,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},dR={readContext:ur,useCallback:function(t,e){return Rr().memoizedState=[t,e===void 0?null:e],t},useContext:ur,useEffect:Gw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bd(4194308,4,b2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bd(4194308,4,t,e)},useInsertionEffect:function(t,e){return bd(4,2,t,e)},useMemo:function(t,e){var n=Rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cR.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Rr();return t={current:t},e.memoizedState=t},useState:qw,useDebugValue:dv,useDeferredValue:function(t){return Rr().memoizedState=t},useTransition:function(){var t=qw(!1),e=t[0];return t=lR.bind(null,t[1]),Rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,s=Rr();if(et){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),Vt===null)throw Error(te(349));co&30||p2(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Gw(y2.bind(null,r,i,t),[t]),r.flags|=2048,Ic(9,g2.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Rr(),e=Vt.identifierPrefix;if(et){var n=is,r=ss;n=(r&~(1<<32-Er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ac++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hR={readContext:ur,useCallback:k2,useContext:ur,useEffect:uv,useImperativeHandle:T2,useInsertionEffect:_2,useLayoutEffect:E2,useMemo:S2,useReducer:Fm,useRef:w2,useState:function(){return Fm(Cc)},useDebugValue:dv,useDeferredValue:function(t){var e=dr();return A2(e,Nt.memoizedState,t)},useTransition:function(){var t=Fm(Cc)[0],e=dr().memoizedState;return[t,e]},useMutableSource:f2,useSyncExternalStore:m2,useId:C2,unstable_isNewReconciler:!1},fR={readContext:ur,useCallback:k2,useContext:ur,useEffect:uv,useImperativeHandle:T2,useInsertionEffect:_2,useLayoutEffect:E2,useMemo:S2,useReducer:Um,useRef:w2,useState:function(){return Um(Cc)},useDebugValue:dv,useDeferredValue:function(t){var e=dr();return Nt===null?e.memoizedState=t:A2(e,Nt.memoizedState,t)},useTransition:function(){var t=Um(Cc)[0],e=dr().memoizedState;return[t,e]},useMutableSource:f2,useSyncExternalStore:m2,useId:C2,unstable_isNewReconciler:!1};function yr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uf={isMounted:function(t){return(t=t._reactInternals)?bo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),s=ii(t),i=cs(r,s);i.payload=e,n!=null&&(i.callback=n),e=ri(t,i,s),e!==null&&(br(e,t,s,r),_d(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),s=ii(t),i=cs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ri(t,i,s),e!==null&&(br(e,t,s,r),_d(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=ii(t),s=cs(n,r);s.tag=2,e!=null&&(s.callback=e),e=ri(t,s,r),e!==null&&(br(e,t,r,n),_d(e,t,r))}};function Kw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_c(n,r)||!_c(s,i):!0}function j2(t,e,n){var r=!1,s=fi,i=e.contextType;return typeof i=="object"&&i!==null?i=ur(i):(s=jn(e)?ao:ln.current,r=e.contextTypes,i=(r=r!=null)?Aa(t,s):fi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Qw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uf.enqueueReplaceState(e,e.state,null)}function ug(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},rv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ur(i):(i=jn(e)?ao:ln.current,s.context=Aa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uf.enqueueReplaceState(s,s.state,null),ah(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pa(t,e){try{var n="",r=e;do n+=$P(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $m(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mR=typeof WeakMap=="function"?WeakMap:Map;function R2(t,e,n){n=cs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hh||(hh=!0,_g=r),dg(t,e)},n}function D2(t,e,n){n=cs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dg(t,e),typeof r!="function"&&(si===null?si=new Set([this]):si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Yw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=CR.bind(null,t,e,n),e.then(t,t))}function Xw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cs(-1,1),e.tag=2,ri(n,e,1))),n.lanes|=1),t)}var pR=bs.ReactCurrentOwner,Nn=!1;function pn(t,e,n,r){e.child=t===null?c2(e,null,n,r):Ia(e,t.child,n,r)}function Zw(t,e,n,r,s){n=n.render;var i=e.ref;return ya(e,s),r=lv(t,e,n,r,i,s),n=cv(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ys(t,e,s)):(et&&n&&Yy(e),e.flags|=1,pn(t,e,r,s),e.child)}function e_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!xv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,O2(t,e,i,r,s)):(t=Ad(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_c,n(o,r)&&t.ref===e.ref)return ys(t,e,s)}return e.flags|=1,t=oi(i,r),t.ref=e.ref,t.return=e,e.child=t}function O2(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_c(i,r)&&t.ref===e.ref)if(Nn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Nn=!0);else return e.lanes=t.lanes,ys(t,e,s)}return hg(t,e,n,r,s)}function L2(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(ia,Bn),Bn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(ia,Bn),Bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,qe(ia,Bn),Bn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,qe(ia,Bn),Bn|=r;return pn(t,e,s,n),e.child}function M2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hg(t,e,n,r,s){var i=jn(n)?ao:ln.current;return i=Aa(e,i),ya(e,s),n=lv(t,e,n,r,i,s),r=cv(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ys(t,e,s)):(et&&r&&Yy(e),e.flags|=1,pn(t,e,n,s),e.child)}function t_(t,e,n,r,s){if(jn(n)){var i=!0;nh(e)}else i=!1;if(ya(e,s),e.stateNode===null)Td(t,e),j2(e,n,r),ug(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ur(u):(u=jn(n)?ao:ln.current,u=Aa(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Qw(e,o,r,u),Ls=!1;var m=e.memoizedState;o.state=m,ah(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Pn.current||Ls?(typeof d=="function"&&(cg(e,n,d,r),l=e.memoizedState),(a=Ls||Kw(e,n,a,r,m,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,d2(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:yr(e.type,a),o.props=u,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ur(l):(l=jn(n)?ao:ln.current,l=Aa(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&Qw(e,o,r,l),Ls=!1,m=e.memoizedState,o.state=m,ah(e,r,o,s);var y=e.memoizedState;a!==h||m!==y||Pn.current||Ls?(typeof p=="function"&&(cg(e,n,p,r),y=e.memoizedState),(u=Ls||Kw(e,n,u,r,m,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return fg(t,e,n,r,i,s)}function fg(t,e,n,r,s,i){M2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Uw(e,n,!1),ys(t,e,i);r=e.stateNode,pR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ia(e,t.child,null,i),e.child=Ia(e,null,a,i)):pn(t,e,a,i),e.memoizedState=r.state,s&&Uw(e,n,!0),e.child}function V2(t){var e=t.stateNode;e.pendingContext?Fw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fw(t,e.context,!1),sv(t,e.containerInfo)}function n_(t,e,n,r,s){return Ca(),Jy(s),e.flags|=256,pn(t,e,n,r),e.child}var mg={dehydrated:null,treeContext:null,retryLane:0};function pg(t){return{baseLanes:t,cachePool:null,transitions:null}}function F2(t,e,n){var r=e.pendingProps,s=rt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),qe(rt,s&1),t===null)return ag(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ff(o,r,0,null),t=no(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=pg(n),e.memoizedState=mg,t):hv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return gR(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=oi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=oi(a,i):(i=no(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?pg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=mg,r}return i=t.child,t=i.sibling,r=oi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hv(t,e){return e=ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ku(t,e,n,r){return r!==null&&Jy(r),Ia(e,t.child,null,n),t=hv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=$m(Error(te(422))),Ku(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ff({mode:"visible",children:r.children},s,0,null),i=no(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ia(e,t.child,null,o),e.child.memoizedState=pg(o),e.memoizedState=mg,i);if(!(e.mode&1))return Ku(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(te(419)),r=$m(i,r,void 0),Ku(t,e,o,r)}if(a=(o&t.childLanes)!==0,Nn||a){if(r=Vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,gs(t,s),br(r,t,s,-1))}return vv(),r=$m(Error(te(421))),Ku(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=IR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wn=ni(s.nextSibling),Qn=e,et=!0,wr=null,t!==null&&(rr[sr++]=ss,rr[sr++]=is,rr[sr++]=lo,ss=t.id,is=t.overflow,lo=e),e=hv(e,r.children),e.flags|=4096,e)}function r_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lg(t.return,e,n)}function Bm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function U2(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pn(t,e,r.children,n),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r_(t,n,e);else if(t.tag===19)r_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(qe(rt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bm(e,!0,n,null,i);break;case"together":Bm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),uo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yR(t,e,n){switch(e.tag){case 3:V2(e),Ca();break;case 5:h2(e);break;case 1:jn(e.type)&&nh(e);break;case 4:sv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;qe(ih,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qe(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?F2(t,e,n):(qe(rt,rt.current&1),t=ys(t,e,n),t!==null?t.sibling:null);qe(rt,rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return U2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,L2(t,e,n)}return ys(t,e,n)}var $2,gg,B2,z2;$2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gg=function(){};B2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xi(Fr.current);var i=null;switch(n){case"input":s=Vp(t,s),r=Vp(t,r),i=[];break;case"select":s=ot({},s,{value:void 0}),r=ot({},r,{value:void 0}),i=[];break;case"textarea":s=$p(t,s),r=$p(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=eh)}zp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(mc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(mc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ye("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};z2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tl(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vR(t,e,n){var r=e.pendingProps;switch(Xy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return jn(e.type)&&th(),Zt(e),null;case 3:return r=e.stateNode,Na(),Je(Pn),Je(ln),ov(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wr!==null&&(Tg(wr),wr=null))),gg(t,e),Zt(e),null;case 5:iv(e);var s=Xi(Sc.current);if(n=e.type,t!==null&&e.stateNode!=null)B2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return Zt(e),null}if(t=Xi(Fr.current),qu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Lr]=e,r[Tc]=i,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(s=0;s<Rl.length;s++)Ye(Rl[s],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":hw(r,i),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ye("invalid",r);break;case"textarea":mw(r,i),Ye("invalid",r)}zp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Hu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Hu(r.textContent,a,t),s=["children",""+a]):mc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ye("scroll",r)}switch(n){case"input":Mu(r),fw(r,i,!0);break;case"textarea":Mu(r),pw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=eh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Lr]=e,t[Tc]=r,$2(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wp(n,r),n){case"dialog":Ye("cancel",t),Ye("close",t),s=r;break;case"iframe":case"object":case"embed":Ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<Rl.length;s++)Ye(Rl[s],t);s=r;break;case"source":Ye("error",t),s=r;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),s=r;break;case"details":Ye("toggle",t),s=r;break;case"input":hw(t,r),s=Vp(t,r),Ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ot({},r,{value:void 0}),Ye("invalid",t);break;case"textarea":mw(t,r),s=$p(t,r),Ye("invalid",t);break;default:s=r}zp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pc(t,l):typeof l=="number"&&pc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ye("scroll",t):l!=null&&Ly(t,i,l,o))}switch(n){case"input":Mu(t),fw(t,r,!1);break;case"textarea":Mu(t),pw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fa(t,!!r.multiple,i,!1):r.defaultValue!=null&&fa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)z2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(n=Xi(Sc.current),Xi(Fr.current),qu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lr]=e,(i=r.nodeValue!==n)&&(t=Qn,t!==null))switch(t.tag){case 3:Hu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lr]=e,e.stateNode=r}return Zt(e),null;case 13:if(Je(rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&Wn!==null&&e.mode&1&&!(e.flags&128))a2(),Ca(),e.flags|=98560,i=!1;else if(i=qu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[Lr]=e}else Ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),i=!1}else wr!==null&&(Tg(wr),wr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?Pt===0&&(Pt=3):vv())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Na(),gg(t,e),t===null&&Ec(e.stateNode.containerInfo),Zt(e),null;case 10:return tv(e.type._context),Zt(e),null;case 17:return jn(e.type)&&th(),Zt(e),null;case 19:if(Je(rt),i=e.memoizedState,i===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Tl(i,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lh(t),o!==null){for(e.flags|=128,Tl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(rt,rt.current&1|2),e.child}t=t.sibling}i.tail!==null&&_t()>ja&&(e.flags|=128,r=!0,Tl(i,!1),e.lanes=4194304)}else{if(!r)if(t=lh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!et)return Zt(e),null}else 2*_t()-i.renderingStartTime>ja&&n!==1073741824&&(e.flags|=128,r=!0,Tl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_t(),e.sibling=null,n=rt.current,qe(rt,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return yv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function xR(t,e){switch(Xy(e),e.tag){case 1:return jn(e.type)&&th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Na(),Je(Pn),Je(ln),ov(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return iv(e),null;case 13:if(Je(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(rt),null;case 4:return Na(),null;case 10:return tv(e.type._context),null;case 22:case 23:return yv(),null;case 24:return null;default:return null}}var Qu=!1,sn=!1,wR=typeof WeakSet=="function"?WeakSet:Set,oe=null;function sa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function yg(t,e,n){try{n()}catch(r){ht(t,e,r)}}var s_=!1;function _R(t,e){if(eg=Xd,t=KT(),Qy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tg={focusedElem:t,selectionRange:n},Xd=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,b=y.memoizedState,v=e.stateNode,T=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:yr(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(I){ht(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return y=s_,s_=!1,y}function Yl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yg(e,n,i)}s=s.next}while(s!==r)}}function df(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function W2(t){var e=t.alternate;e!==null&&(t.alternate=null,W2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lr],delete e[Tc],delete e[sg],delete e[rR],delete e[sR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function H2(t){return t.tag===5||t.tag===3||t.tag===4}function i_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eh));else if(r!==4&&(t=t.child,t!==null))for(xg(t,e,n),t=t.sibling;t!==null;)xg(t,e,n),t=t.sibling}function wg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wg(t,e,n),t=t.sibling;t!==null;)wg(t,e,n),t=t.sibling}var Bt=null,vr=!1;function Is(t,e,n){for(n=n.child;n!==null;)q2(t,e,n),n=n.sibling}function q2(t,e,n){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(nf,n)}catch{}switch(n.tag){case 5:sn||sa(n,e);case 6:var r=Bt,s=vr;Bt=null,Is(t,e,n),Bt=r,vr=s,Bt!==null&&(vr?(t=Bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(vr?(t=Bt,n=n.stateNode,t.nodeType===8?Om(t.parentNode,n):t.nodeType===1&&Om(t,n),xc(t)):Om(Bt,n.stateNode));break;case 4:r=Bt,s=vr,Bt=n.stateNode.containerInfo,vr=!0,Is(t,e,n),Bt=r,vr=s;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yg(n,e,o),s=s.next}while(s!==r)}Is(t,e,n);break;case 1:if(!sn&&(sa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}Is(t,e,n);break;case 21:Is(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,Is(t,e,n),sn=r):Is(t,e,n);break;default:Is(t,e,n)}}function o_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wR),e.forEach(function(r){var s=NR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,vr=!1;break e;case 3:Bt=a.stateNode.containerInfo,vr=!0;break e;case 4:Bt=a.stateNode.containerInfo,vr=!0;break e}a=a.return}if(Bt===null)throw Error(te(160));q2(i,o,s),Bt=null,vr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){ht(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)G2(e,t),e=e.sibling}function G2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mr(e,t),Pr(t),r&4){try{Yl(3,t,t.return),df(3,t)}catch(g){ht(t,t.return,g)}try{Yl(5,t,t.return)}catch(g){ht(t,t.return,g)}}break;case 1:mr(e,t),Pr(t),r&512&&n!==null&&sa(n,n.return);break;case 5:if(mr(e,t),Pr(t),r&512&&n!==null&&sa(n,n.return),t.flags&32){var s=t.stateNode;try{pc(s,"")}catch(g){ht(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&pT(s,i),Wp(a,o);var u=Wp(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?wT(s,h):d==="dangerouslySetInnerHTML"?vT(s,h):d==="children"?pc(s,h):Ly(s,d,h,u)}switch(a){case"input":Fp(s,i);break;case"textarea":gT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?fa(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?fa(s,!!i.multiple,i.defaultValue,!0):fa(s,!!i.multiple,i.multiple?[]:"",!1))}s[Tc]=i}catch(g){ht(t,t.return,g)}}break;case 6:if(mr(e,t),Pr(t),r&4){if(t.stateNode===null)throw Error(te(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){ht(t,t.return,g)}}break;case 3:if(mr(e,t),Pr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xc(e.containerInfo)}catch(g){ht(t,t.return,g)}break;case 4:mr(e,t),Pr(t);break;case 13:mr(e,t),Pr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pv=_t())),r&4&&o_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(u=sn)||d,mr(e,t),sn=u):mr(e,t),Pr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(oe=t,d=t.child;d!==null;){for(h=oe=d;oe!==null;){switch(m=oe,p=m.child,m.tag){case 0:case 11:case 14:case 15:Yl(4,m,m.return);break;case 1:sa(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){ht(r,n,g)}}break;case 5:sa(m,m.return);break;case 22:if(m.memoizedState!==null){l_(h);continue}}p!==null?(p.return=m,oe=p):l_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xT("display",o))}catch(g){ht(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){ht(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mr(e,t),Pr(t),r&4&&o_(t);break;case 21:break;default:mr(e,t),Pr(t)}}function Pr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(H2(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pc(s,""),r.flags&=-33);var i=i_(t);wg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=i_(t);xg(t,a,o);break;default:throw Error(te(161))}}catch(l){ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ER(t,e,n){oe=t,K2(t)}function K2(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var s=oe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Qu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||sn;a=Qu;var u=sn;if(Qu=o,(sn=l)&&!u)for(oe=s;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?c_(s):l!==null?(l.return=o,oe=l):c_(s);for(;i!==null;)oe=i,K2(i),i=i.sibling;oe=s,Qu=a,sn=u}a_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,oe=i):a_(t)}}function a_(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||df(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:yr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}sn||e.flags&512&&vg(e)}catch(m){ht(e,e.return,m)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function l_(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function c_(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{df(4,e)}catch(l){ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ht(e,s,l)}}var i=e.return;try{vg(e)}catch(l){ht(e,i,l)}break;case 5:var o=e.return;try{vg(e)}catch(l){ht(e,o,l)}}}catch(l){ht(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var bR=Math.ceil,dh=bs.ReactCurrentDispatcher,fv=bs.ReactCurrentOwner,ar=bs.ReactCurrentBatchConfig,Pe=0,Vt=null,St=null,qt=0,Bn=0,ia=ki(0),Pt=0,Nc=null,uo=0,hf=0,mv=0,Xl=null,Sn=null,pv=0,ja=1/0,ts=null,hh=!1,_g=null,si=null,Yu=!1,Ks=null,fh=0,Jl=0,Eg=null,kd=-1,Sd=0;function yn(){return Pe&6?_t():kd!==-1?kd:kd=_t()}function ii(t){return t.mode&1?Pe&2&&qt!==0?qt&-qt:oR.transition!==null?(Sd===0&&(Sd=jT()),Sd):(t=Me,t!==0||(t=window.event,t=t===void 0?16:FT(t.type)),t):1}function br(t,e,n,r){if(50<Jl)throw Jl=0,Eg=null,Error(te(185));Jc(t,n,r),(!(Pe&2)||t!==Vt)&&(t===Vt&&(!(Pe&2)&&(hf|=n),Pt===4&&Us(t,qt)),Rn(t,r),n===1&&Pe===0&&!(e.mode&1)&&(ja=_t()+500,lf&&Si()))}function Rn(t,e){var n=t.callbackNode;oj(t,e);var r=Yd(t,t===Vt?qt:0);if(r===0)n!==null&&vw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vw(n),e===1)t.tag===0?iR(u_.bind(null,t)):s2(u_.bind(null,t)),tR(function(){!(Pe&6)&&Si()}),n=null;else{switch(RT(r)){case 1:n=$y;break;case 4:n=NT;break;case 16:n=Qd;break;case 536870912:n=PT;break;default:n=Qd}n=nk(n,Q2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Q2(t,e){if(kd=-1,Sd=0,Pe&6)throw Error(te(327));var n=t.callbackNode;if(va()&&t.callbackNode!==n)return null;var r=Yd(t,t===Vt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mh(t,r);else{e=r;var s=Pe;Pe|=2;var i=X2();(Vt!==t||qt!==e)&&(ts=null,ja=_t()+500,to(t,e));do try{SR();break}catch(a){Y2(t,a)}while(!0);ev(),dh.current=i,Pe=s,St!==null?e=0:(Vt=null,qt=0,e=Pt)}if(e!==0){if(e===2&&(s=Qp(t),s!==0&&(r=s,e=bg(t,s))),e===1)throw n=Nc,to(t,0),Us(t,r),Rn(t,_t()),n;if(e===6)Us(t,r);else{if(s=t.current.alternate,!(r&30)&&!TR(s)&&(e=mh(t,r),e===2&&(i=Qp(t),i!==0&&(r=i,e=bg(t,i))),e===1))throw n=Nc,to(t,0),Us(t,r),Rn(t,_t()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:zi(t,Sn,ts);break;case 3:if(Us(t,r),(r&130023424)===r&&(e=pv+500-_t(),10<e)){if(Yd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rg(zi.bind(null,t,Sn,ts),e);break}zi(t,Sn,ts);break;case 4:if(Us(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Er(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=_t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bR(r/1960))-r,10<r){t.timeoutHandle=rg(zi.bind(null,t,Sn,ts),r);break}zi(t,Sn,ts);break;case 5:zi(t,Sn,ts);break;default:throw Error(te(329))}}}return Rn(t,_t()),t.callbackNode===n?Q2.bind(null,t):null}function bg(t,e){var n=Xl;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=mh(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&Tg(e)),t}function Tg(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function TR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!kr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Us(t,e){for(e&=~mv,e&=~hf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Er(e),r=1<<n;t[n]=-1,e&=~r}}function u_(t){if(Pe&6)throw Error(te(327));va();var e=Yd(t,0);if(!(e&1))return Rn(t,_t()),null;var n=mh(t,e);if(t.tag!==0&&n===2){var r=Qp(t);r!==0&&(e=r,n=bg(t,r))}if(n===1)throw n=Nc,to(t,0),Us(t,e),Rn(t,_t()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zi(t,Sn,ts),Rn(t,_t()),null}function gv(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(ja=_t()+500,lf&&Si())}}function ho(t){Ks!==null&&Ks.tag===0&&!(Pe&6)&&va();var e=Pe;Pe|=1;var n=ar.transition,r=Me;try{if(ar.transition=null,Me=1,t)return t()}finally{Me=r,ar.transition=n,Pe=e,!(Pe&6)&&Si()}}function yv(){Bn=ia.current,Je(ia)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eR(n)),St!==null)for(n=St.return;n!==null;){var r=n;switch(Xy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&th();break;case 3:Na(),Je(Pn),Je(ln),ov();break;case 5:iv(r);break;case 4:Na();break;case 13:Je(rt);break;case 19:Je(rt);break;case 10:tv(r.type._context);break;case 22:case 23:yv()}n=n.return}if(Vt=t,St=t=oi(t.current,null),qt=Bn=e,Pt=0,Nc=null,mv=hf=uo=0,Sn=Xl=null,Yi!==null){for(e=0;e<Yi.length;e++)if(n=Yi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Yi=null}return t}function Y2(t,e){do{var n=St;try{if(ev(),Ed.current=uh,ch){for(var r=it.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ch=!1}if(co=0,Lt=Nt=it=null,Ql=!1,Ac=0,fv.current=null,n===null||n.return===null){Pt=1,Nc=e,St=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Xw(o);if(p!==null){p.flags&=-257,Jw(p,o,a,i,e),p.mode&1&&Yw(i,u,e),e=p,l=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){Yw(i,u,e),vv();break e}l=Error(te(426))}}else if(et&&a.mode&1){var b=Xw(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Jw(b,o,a,i,e),Jy(Pa(l,a));break e}}i=l=Pa(l,a),Pt!==4&&(Pt=2),Xl===null?Xl=[i]:Xl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=R2(i,l,e);Ww(i,v);break e;case 1:a=l;var T=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(si===null||!si.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=D2(i,a,e);Ww(i,I);break e}}i=i.return}while(i!==null)}Z2(n)}catch(O){e=O,St===n&&n!==null&&(St=n=n.return);continue}break}while(!0)}function X2(){var t=dh.current;return dh.current=uh,t===null?uh:t}function vv(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Vt===null||!(uo&268435455)&&!(hf&268435455)||Us(Vt,qt)}function mh(t,e){var n=Pe;Pe|=2;var r=X2();(Vt!==t||qt!==e)&&(ts=null,to(t,e));do try{kR();break}catch(s){Y2(t,s)}while(!0);if(ev(),Pe=n,dh.current=r,St!==null)throw Error(te(261));return Vt=null,qt=0,Pt}function kR(){for(;St!==null;)J2(St)}function SR(){for(;St!==null&&!XP();)J2(St)}function J2(t){var e=tk(t.alternate,t,Bn);t.memoizedProps=t.pendingProps,e===null?Z2(t):St=e,fv.current=null}function Z2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xR(n,e),n!==null){n.flags&=32767,St=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,St=null;return}}else if(n=vR(n,e,Bn),n!==null){St=n;return}if(e=e.sibling,e!==null){St=e;return}St=e=t}while(e!==null);Pt===0&&(Pt=5)}function zi(t,e,n){var r=Me,s=ar.transition;try{ar.transition=null,Me=1,AR(t,e,n,r)}finally{ar.transition=s,Me=r}return null}function AR(t,e,n,r){do va();while(Ks!==null);if(Pe&6)throw Error(te(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(aj(t,i),t===Vt&&(St=Vt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yu||(Yu=!0,nk(Qd,function(){return va(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ar.transition,ar.transition=null;var o=Me;Me=1;var a=Pe;Pe|=4,fv.current=null,_R(t,n),G2(n,t),Gj(tg),Xd=!!eg,tg=eg=null,t.current=n,ER(n),JP(),Pe=a,Me=o,ar.transition=i}else t.current=n;if(Yu&&(Yu=!1,Ks=t,fh=s),i=t.pendingLanes,i===0&&(si=null),tj(n.stateNode),Rn(t,_t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(hh)throw hh=!1,t=_g,_g=null,t;return fh&1&&t.tag!==0&&va(),i=t.pendingLanes,i&1?t===Eg?Jl++:(Jl=0,Eg=t):Jl=0,Si(),null}function va(){if(Ks!==null){var t=RT(fh),e=ar.transition,n=Me;try{if(ar.transition=null,Me=16>t?16:t,Ks===null)var r=!1;else{if(t=Ks,Ks=null,fh=0,Pe&6)throw Error(te(331));var s=Pe;for(Pe|=4,oe=t.current;oe!==null;){var i=oe,o=i.child;if(oe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(oe=u;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:Yl(8,d,i)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var m=d.sibling,p=d.return;if(W2(d),d===u){oe=null;break}if(m!==null){m.return=p,oe=m;break}oe=p}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,oe=o;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,oe=v;break e}oe=i.return}}var T=t.current;for(oe=T;oe!==null;){o=oe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,oe=_;else e:for(o=T;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:df(9,a)}}catch(O){ht(a,a.return,O)}if(a===o){oe=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,oe=I;break e}oe=a.return}}if(Pe=s,Si(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(nf,t)}catch{}r=!0}return r}finally{Me=n,ar.transition=e}}return!1}function d_(t,e,n){e=Pa(n,e),e=R2(t,e,1),t=ri(t,e,1),e=yn(),t!==null&&(Jc(t,1,e),Rn(t,e))}function ht(t,e,n){if(t.tag===3)d_(t,t,n);else for(;e!==null;){if(e.tag===3){d_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){t=Pa(n,t),t=D2(e,t,1),e=ri(e,t,1),t=yn(),e!==null&&(Jc(e,1,t),Rn(e,t));break}}e=e.return}}function CR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(qt&n)===n&&(Pt===4||Pt===3&&(qt&130023424)===qt&&500>_t()-pv?to(t,0):mv|=n),Rn(t,e)}function ek(t,e){e===0&&(t.mode&1?(e=Uu,Uu<<=1,!(Uu&130023424)&&(Uu=4194304)):e=1);var n=yn();t=gs(t,e),t!==null&&(Jc(t,e,n),Rn(t,n))}function IR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ek(t,n)}function NR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),ek(t,n)}var tk;tk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)Nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nn=!1,yR(t,e,n);Nn=!!(t.flags&131072)}else Nn=!1,et&&e.flags&1048576&&i2(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Td(t,e),t=e.pendingProps;var s=Aa(e,ln.current);ya(e,n),s=lv(null,e,r,t,s,n);var i=cv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jn(r)?(i=!0,nh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rv(e),s.updater=uf,e.stateNode=s,s._reactInternals=e,ug(e,r,t,n),e=fg(null,e,r,!0,i,n)):(e.tag=0,et&&i&&Yy(e),pn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Td(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=jR(r),t=yr(r,t),s){case 0:e=hg(null,e,r,t,n);break e;case 1:e=t_(null,e,r,t,n);break e;case 11:e=Zw(null,e,r,t,n);break e;case 14:e=e_(null,e,r,yr(r.type,t),n);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yr(r,s),hg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yr(r,s),t_(t,e,r,s,n);case 3:e:{if(V2(e),t===null)throw Error(te(387));r=e.pendingProps,i=e.memoizedState,s=i.element,d2(t,e),ah(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pa(Error(te(423)),e),e=n_(t,e,r,n,s);break e}else if(r!==s){s=Pa(Error(te(424)),e),e=n_(t,e,r,n,s);break e}else for(Wn=ni(e.stateNode.containerInfo.firstChild),Qn=e,et=!0,wr=null,n=c2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===s){e=ys(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return h2(e),t===null&&ag(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ng(r,s)?o=null:i!==null&&ng(r,i)&&(e.flags|=32),M2(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&ag(e),null;case 13:return F2(t,e,n);case 4:return sv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ia(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yr(r,s),Zw(t,e,r,s,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,qe(ih,r._currentValue),r._currentValue=o,i!==null)if(kr(i.value,o)){if(i.children===s.children&&!Pn.current){e=ys(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=cs(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lg(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(te(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ya(e,n),s=ur(s),r=r(s),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,s=yr(r,e.pendingProps),s=yr(r.type,s),e_(t,e,r,s,n);case 15:return O2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yr(r,s),Td(t,e),e.tag=1,jn(r)?(t=!0,nh(e)):t=!1,ya(e,n),j2(e,r,s),ug(e,r,s,n),fg(null,e,r,!0,t,n);case 19:return U2(t,e,n);case 22:return L2(t,e,n)}throw Error(te(156,e.tag))};function nk(t,e){return IT(t,e)}function PR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(t,e,n,r){return new PR(t,e,n,r)}function xv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jR(t){if(typeof t=="function")return xv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vy)return 11;if(t===Fy)return 14}return 2}function oi(t,e){var n=t.alternate;return n===null?(n=or(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ad(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")xv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qo:return no(n.children,s,i,e);case My:o=8,s|=8;break;case Dp:return t=or(12,n,e,s|2),t.elementType=Dp,t.lanes=i,t;case Op:return t=or(13,n,e,s),t.elementType=Op,t.lanes=i,t;case Lp:return t=or(19,n,e,s),t.elementType=Lp,t.lanes=i,t;case hT:return ff(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uT:o=10;break e;case dT:o=9;break e;case Vy:o=11;break e;case Fy:o=14;break e;case Os:o=16,r=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=or(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function no(t,e,n,r){return t=or(7,t,r,e),t.lanes=n,t}function ff(t,e,n,r){return t=or(22,t,r,e),t.elementType=hT,t.lanes=n,t.stateNode={isHidden:!1},t}function zm(t,e,n){return t=or(6,t,null,e),t.lanes=n,t}function Wm(t,e,n){return e=or(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tm(0),this.expirationTimes=Tm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wv(t,e,n,r,s,i,o,a,l){return t=new RR(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=or(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rv(i),t}function DR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ko,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rk(t){if(!t)return fi;t=t._reactInternals;e:{if(bo(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(jn(n))return r2(t,n,e)}return e}function sk(t,e,n,r,s,i,o,a,l){return t=wv(n,r,!0,t,s,i,o,a,l),t.context=rk(null),n=t.current,r=yn(),s=ii(n),i=cs(r,s),i.callback=e??null,ri(n,i,s),t.current.lanes=s,Jc(t,s,r),Rn(t,r),t}function mf(t,e,n,r){var s=e.current,i=yn(),o=ii(s);return n=rk(n),e.context===null?e.context=n:e.pendingContext=n,e=cs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ri(s,e,o),t!==null&&(br(t,s,o,i),_d(t,s,o)),o}function ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function h_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _v(t,e){h_(t,e),(t=t.alternate)&&h_(t,e)}function OR(){return null}var ik=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ev(t){this._internalRoot=t}pf.prototype.render=Ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));mf(t,e,null,null)};pf.prototype.unmount=Ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ho(function(){mf(null,t,null,null)}),e[ps]=null}};function pf(t){this._internalRoot=t}pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=LT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fs.length&&e!==0&&e<Fs[n].priority;n++);Fs.splice(n,0,t),n===0&&VT(t)}};function bv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function f_(){}function LR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ph(o);i.call(u)}}var o=sk(e,r,t,0,null,!1,!1,"",f_);return t._reactRootContainer=o,t[ps]=o.current,Ec(t.nodeType===8?t.parentNode:t),ho(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=ph(l);a.call(u)}}var l=wv(t,0,!1,null,null,!1,!1,"",f_);return t._reactRootContainer=l,t[ps]=l.current,Ec(t.nodeType===8?t.parentNode:t),ho(function(){mf(e,l,n,r)}),l}function yf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ph(o);a.call(l)}}mf(e,o,t,s)}else o=LR(n,e,t,s,r);return ph(o)}DT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jl(e.pendingLanes);n!==0&&(By(e,n|1),Rn(e,_t()),!(Pe&6)&&(ja=_t()+500,Si()))}break;case 13:ho(function(){var r=gs(t,1);if(r!==null){var s=yn();br(r,t,1,s)}}),_v(t,1)}};zy=function(t){if(t.tag===13){var e=gs(t,134217728);if(e!==null){var n=yn();br(e,t,134217728,n)}_v(t,134217728)}};OT=function(t){if(t.tag===13){var e=ii(t),n=gs(t,e);if(n!==null){var r=yn();br(n,t,e,r)}_v(t,e)}};LT=function(){return Me};MT=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};qp=function(t,e,n){switch(e){case"input":if(Fp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=af(r);if(!s)throw Error(te(90));mT(r),Fp(r,s)}}}break;case"textarea":gT(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};bT=gv;TT=ho;var MR={usingClientEntryPoint:!1,Events:[eu,Zo,af,_T,ET,gv]},kl={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VR={bundleType:kl.bundleType,version:kl.version,rendererPackageName:kl.rendererPackageName,rendererConfig:kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AT(t),t===null?null:t.stateNode},findFiberByHostInstance:kl.findFiberByHostInstance||OR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{nf=Xu.inject(VR),Vr=Xu}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MR;Zn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bv(e))throw Error(te(200));return DR(t,e,null,n)};Zn.createRoot=function(t,e){if(!bv(t))throw Error(te(299));var n=!1,r="",s=ik;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wv(t,1,!1,null,null,n,!1,r,s),t[ps]=e.current,Ec(t.nodeType===8?t.parentNode:t),new Ev(e)};Zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=AT(e),t=t===null?null:t.stateNode,t};Zn.flushSync=function(t){return ho(t)};Zn.hydrate=function(t,e,n){if(!gf(e))throw Error(te(200));return yf(null,t,e,!0,n)};Zn.hydrateRoot=function(t,e,n){if(!bv(t))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ik;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sk(e,null,t,1,n??null,s,!1,i,o),t[ps]=e.current,Ec(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new pf(e)};Zn.render=function(t,e,n){if(!gf(e))throw Error(te(200));return yf(null,t,e,!1,n)};Zn.unmountComponentAtNode=function(t){if(!gf(t))throw Error(te(40));return t._reactRootContainer?(ho(function(){yf(null,null,t,!1,function(){t._reactRootContainer=null,t[ps]=null})}),!0):!1};Zn.unstable_batchedUpdates=gv;Zn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gf(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return yf(t,e,n,!1,r)};Zn.version="18.3.1-next-f1338f8080-20240426";function ok(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ok)}catch(t){console.error(t)}}ok(),oT.exports=Zn;var FR=oT.exports,m_=FR;jp.createRoot=m_.createRoot,jp.hydrateRoot=m_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pc.apply(this,arguments)}var Qs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qs||(Qs={}));const p_="popstate";function UR(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return kg("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:gh(s)}return BR(e,n,null,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ak(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $R(){return Math.random().toString(36).substr(2,8)}function g_(t,e){return{usr:t.state,key:t.key,idx:e}}function kg(t,e,n,r){return n===void 0&&(n=null),Pc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qa(e):e,{state:n,key:e&&e.key||r||$R()})}function gh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function BR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Qs.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Pc({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Qs.Pop;let b=d(),v=b==null?null:b-u;u=b,l&&l({action:a,location:g.location,delta:v})}function m(b,v){a=Qs.Push;let T=kg(g.location,b,v);u=d()+1;let _=g_(T,u),I=g.createHref(T);try{o.pushState(_,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(I)}i&&l&&l({action:a,location:g.location,delta:1})}function p(b,v){a=Qs.Replace;let T=kg(g.location,b,v);u=d();let _=g_(T,u),I=g.createHref(T);o.replaceState(_,"",I),i&&l&&l({action:a,location:g.location,delta:0})}function y(b){let v=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof b=="string"?b:gh(b);return T=T.replace(/ $/,"%20"),bt(v,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,v)}let g={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(p_,h),l=b,()=>{s.removeEventListener(p_,h),l=null}},createHref(b){return e(s,b)},createURL:y,encodeLocation(b){let v=y(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(b){return o.go(b)}};return g}var y_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(y_||(y_={}));function zR(t,e,n){return n===void 0&&(n="/"),WR(t,e,n)}function WR(t,e,n,r){let s=typeof e=="string"?Qa(e):e,i=Tv(s.pathname||"/",n);if(i==null)return null;let o=lk(t);HR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=r4(i);a=e4(o[l],u)}return a}function lk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(bt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ai([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),lk(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:JR(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of ck(i.path))s(i,o,l)}),e}function ck(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ck(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function HR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qR=/^:[\w-]+$/,GR=3,KR=2,QR=1,YR=10,XR=-2,v_=t=>t==="*";function JR(t,e){let n=t.split("/"),r=n.length;return n.some(v_)&&(r+=XR),e&&(r+=KR),n.filter(s=>!v_(s)).reduce((s,i)=>s+(qR.test(i)?GR:i===""?QR:YR),r)}function ZR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function e4(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=t4({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),m=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ai([i,h.pathname]),pathnameBase:a4(ai([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=ai([i,h.pathnameBase]))}return o}function t4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=n4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=a[h];return p&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function n4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ak(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function r4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ak(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Tv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function s4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Qa(t):t;return{pathname:n?n.startsWith("/")?n:i4(n,e):e,search:l4(r),hash:c4(s)}}function i4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kv(t,e){let n=o4(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Sv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Qa(t):(s=Pc({},t),bt(!s.pathname||!s.pathname.includes("?"),Hm("?","pathname","search",s)),bt(!s.pathname||!s.pathname.includes("#"),Hm("#","pathname","hash",s)),bt(!s.search||!s.search.includes("#"),Hm("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=s4(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const ai=t=>t.join("/").replace(/\/\/+/g,"/"),a4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),l4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,c4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function u4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uk=["post","put","patch","delete"];new Set(uk);const d4=["get",...uk];new Set(d4);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jc.apply(this,arguments)}const Av=V.createContext(null),h4=V.createContext(null),Ai=V.createContext(null),vf=V.createContext(null),Xr=V.createContext({outlet:null,matches:[],isDataRoute:!1}),dk=V.createContext(null);function f4(t,e){let{relative:n}=e===void 0?{}:e;Ya()||bt(!1);let{basename:r,navigator:s}=V.useContext(Ai),{hash:i,pathname:o,search:a}=fk(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ai([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ya(){return V.useContext(vf)!=null}function Xa(){return Ya()||bt(!1),V.useContext(vf).location}function hk(t){V.useContext(Ai).static||V.useLayoutEffect(t)}function Ci(){let{isDataRoute:t}=V.useContext(Xr);return t?I4():m4()}function m4(){Ya()||bt(!1);let t=V.useContext(Av),{basename:e,future:n,navigator:r}=V.useContext(Ai),{matches:s}=V.useContext(Xr),{pathname:i}=Xa(),o=JSON.stringify(kv(s,n.v7_relativeSplatPath)),a=V.useRef(!1);return hk(()=>{a.current=!0}),V.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=Sv(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ai([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const p4=V.createContext(null);function g4(t){let e=V.useContext(Xr).outlet;return e&&V.createElement(p4.Provider,{value:t},e)}function y4(){let{matches:t}=V.useContext(Xr),e=t[t.length-1];return e?e.params:{}}function fk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(Ai),{matches:s}=V.useContext(Xr),{pathname:i}=Xa(),o=JSON.stringify(kv(s,r.v7_relativeSplatPath));return V.useMemo(()=>Sv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function v4(t,e){return x4(t,e)}function x4(t,e,n,r){Ya()||bt(!1);let{navigator:s,static:i}=V.useContext(Ai),{matches:o}=V.useContext(Xr),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Xa(),h;if(e){var m;let v=typeof e=="string"?Qa(e):e;u==="/"||(m=v.pathname)!=null&&m.startsWith(u)||bt(!1),h=v}else h=d;let p=h.pathname||"/",y=p;if(u!=="/"){let v=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=zR(t,{pathname:y}),b=T4(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:ai([u,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:ai([u,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&b?V.createElement(vf.Provider,{value:{location:jc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Qs.Pop}},b):b}function w4(){let t=C4(),e=u4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,null)}const _4=V.createElement(w4,null);class E4 extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(Xr.Provider,{value:this.props.routeContext},V.createElement(dk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b4(t){let{routeContext:e,match:n,children:r}=t,s=V.useContext(Av);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Xr.Provider,{value:e},r)}function T4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||bt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=n,y=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let p,y=!1,g=null,b=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||_4,l&&(u<0&&m===0?(N4("route-fallback"),y=!0,b=null):u===m&&(y=!0,b=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),T=()=>{let _;return p?_=g:y?_=b:h.route.Component?_=V.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,V.createElement(b4,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?V.createElement(E4,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:T(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):T()},null)}var mk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mk||{}),pk=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pk||{});function k4(t){let e=V.useContext(Av);return e||bt(!1),e}function S4(t){let e=V.useContext(h4);return e||bt(!1),e}function A4(t){let e=V.useContext(Xr);return e||bt(!1),e}function gk(t){let e=A4(),n=e.matches[e.matches.length-1];return n.route.id||bt(!1),n.route.id}function C4(){var t;let e=V.useContext(dk),n=S4(),r=gk();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function I4(){let{router:t}=k4(mk.UseNavigateStable),e=gk(pk.UseNavigateStable),n=V.useRef(!1);return hk(()=>{n.current=!0}),V.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,jc({fromRouteId:e},i)))},[t,e])}const x_={};function N4(t,e,n){x_[t]||(x_[t]=!0)}function P4(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Cd(t){let{to:e,replace:n,state:r,relative:s}=t;Ya()||bt(!1);let{future:i,static:o}=V.useContext(Ai),{matches:a}=V.useContext(Xr),{pathname:l}=Xa(),u=Ci(),d=Sv(e,kv(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return V.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function j4(t){return g4(t.context)}function Tn(t){bt(!1)}function R4(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Qs.Pop,navigator:i,static:o=!1,future:a}=t;Ya()&&bt(!1);let l=e.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:l,navigator:i,static:o,future:jc({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Qa(r));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:y="default"}=r,g=V.useMemo(()=>{let b=Tv(d,l);return b==null?null:{location:{pathname:b,search:h,hash:m,state:p,key:y},navigationType:s}},[l,d,h,m,p,y,s]);return g==null?null:V.createElement(Ai.Provider,{value:u},V.createElement(vf.Provider,{children:n,value:g}))}function D4(t){let{children:e,location:n}=t;return v4(Sg(e),n)}new Promise(()=>{});function Sg(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let i=[...e,s];if(r.type===V.Fragment){n.push.apply(n,Sg(r.props.children,i));return}r.type!==Tn&&bt(!1),!r.props.index||!r.props.children||bt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sg(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ag(){return Ag=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ag.apply(this,arguments)}function O4(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function L4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function M4(t,e){return t.button===0&&(!e||e==="_self")&&!L4(t)}const V4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],F4="6";try{window.__reactRouterVersion=F4}catch{}const U4="startTransition",w_=CP[U4];function $4(t){let{basename:e,children:n,future:r,window:s}=t,i=V.useRef();i.current==null&&(i.current=UR({window:s,v5Compat:!0}));let o=i.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=V.useCallback(h=>{u&&w_?w_(()=>l(h)):l(h)},[l,u]);return V.useLayoutEffect(()=>o.listen(d),[o,d]),V.useEffect(()=>P4(r),[r]),V.createElement(R4,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const B4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dt=V.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,m=O4(e,V4),{basename:p}=V.useContext(Ai),y,g=!1;if(typeof u=="string"&&z4.test(u)&&(y=u,B4))try{let _=new URL(window.location.href),I=u.startsWith("//")?new URL(_.protocol+u):new URL(u),O=Tv(I.pathname,p);I.origin===_.origin&&O!=null?u=O+I.search+I.hash:g=!0}catch{}let b=f4(u,{relative:s}),v=W4(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function T(_){r&&r(_),_.defaultPrevented||v(_)}return V.createElement("a",Ag({},m,{href:y||b,onClick:g||i?r:T,ref:n,target:l}))});var __;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(__||(__={}));var E_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(E_||(E_={}));function W4(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ci(),u=Xa(),d=fk(t,{relative:o});return V.useCallback(h=>{if(M4(h,n)){h.preventDefault();let m=r!==void 0?r:gh(u)===gh(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,d,r,s,n,t,i,o,a])}const Cv=V.createContext({});function Iv(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const xf=V.createContext(null),Nv=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class H4 extends V.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function q4({children:t,isPresent:e}){const n=V.useId(),r=V.useRef(null),s=V.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=V.useContext(Nv);return V.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=s.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),c.jsx(H4,{isPresent:e,childRef:r,sizeRef:s,children:V.cloneElement(t,{ref:r})})}const G4=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Iv(K4),l=V.useId(),u=V.useCallback(h=>{a.set(h,!0);for(const m of a.values())if(!m)return;r&&r()},[a,r]),d=V.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:u,register:h=>(a.set(h,!1),()=>a.delete(h))}),i?[Math.random(),u]:[n,u]);return V.useMemo(()=>{a.forEach((h,m)=>a.set(m,!1))},[n]),V.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=c.jsx(q4,{isPresent:n,children:t})),c.jsx(xf.Provider,{value:d,children:t})};function K4(){return new Map}function yk(t=!0){const e=V.useContext(xf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=V.useId();V.useEffect(()=>{t&&s(i)},[t]);const o=V.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const Ju=t=>t.key||"";function b_(t){const e=[];return V.Children.forEach(t,n=>{V.isValidElement(n)&&e.push(n)}),e}const Pv=typeof window<"u",vk=Pv?V.useLayoutEffect:V.useEffect,Mt=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=yk(o),u=V.useMemo(()=>b_(t),[t]),d=o&&!a?[]:u.map(Ju),h=V.useRef(!0),m=V.useRef(u),p=Iv(()=>new Map),[y,g]=V.useState(u),[b,v]=V.useState(u);vk(()=>{h.current=!1,m.current=u;for(let I=0;I<b.length;I++){const O=Ju(b[I]);d.includes(O)?p.delete(O):p.get(O)!==!0&&p.set(O,!1)}},[b,d.length,d.join("-")]);const T=[];if(u!==y){let I=[...u];for(let O=0;O<b.length;O++){const N=b[O],C=Ju(N);d.includes(C)||(I.splice(O,0,N),T.push(N))}i==="wait"&&T.length&&(I=T),v(b_(I)),g(u);return}const{forceRender:_}=V.useContext(Cv);return c.jsx(c.Fragment,{children:b.map(I=>{const O=Ju(I),N=o&&!a?!1:u===b||d.includes(O),C=()=>{if(p.has(O))p.set(O,!0);else return;let x=!0;p.forEach(w=>{w||(x=!1)}),x&&(_==null||_(),v(m.current),o&&(l==null||l()),r&&r())};return c.jsx(G4,{isPresent:N,initial:!h.current||n?void 0:!1,custom:N?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:N?void 0:C,children:I},O)})})},Yn=t=>t;let xk=Yn;function jv(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ra=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},us=t=>t*1e3,ds=t=>t/1e3,Q4={useManualTiming:!1};function Y4(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){i.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,d=!1,h=!1)=>{const p=h&&r?e:n;return d&&i.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),i.delete(u)},process:u=>{if(o=u,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(u))}};return l}const Zu=["read","resolveKeyframes","update","preRender","render","postRender"],X4=40;function wk(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Zu.reduce((v,T)=>(v[T]=Y4(i),v),{}),{read:a,resolveKeyframes:l,update:u,preRender:d,render:h,postRender:m}=o,p=()=>{const v=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,X4),1),s.timestamp=v,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),d.process(s),h.process(s),m.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(p))},y=()=>{n=!0,r=!0,s.isProcessing||t(p)};return{schedule:Zu.reduce((v,T)=>{const _=o[T];return v[T]=(I,O=!1,N=!1)=>(n||y(),_.schedule(I,O,N)),v},{}),cancel:v=>{for(let T=0;T<Zu.length;T++)o[Zu[T]].cancel(v)},state:s,steps:o}}const{schedule:Ze,cancel:mi,state:zt,steps:qm}=wk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yn,!0),_k=V.createContext({strict:!1}),T_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Da={};for(const t in T_)Da[t]={isEnabled:e=>T_[t].some(n=>!!e[n])};function J4(t){for(const e in t)Da[e]={...Da[e],...t[e]}}const Z4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Z4.has(t)}let Ek=t=>!yh(t);function eD(t){t&&(Ek=e=>e.startsWith("on")?!yh(e):t(e))}try{eD(require("@emotion/is-prop-valid").default)}catch{}function tD(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Ek(s)||n===!0&&yh(s)||!e&&!yh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function nD(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const wf=V.createContext({});function Rc(t){return typeof t=="string"||Array.isArray(t)}function _f(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Rv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dv=["initial",...Rv];function Ef(t){return _f(t.animate)||Dv.some(e=>Rc(t[e]))}function bk(t){return!!(Ef(t)||t.variants)}function rD(t,e){if(Ef(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Rc(n)?n:void 0,animate:Rc(r)?r:void 0}}return t.inherit!==!1?e:{}}function sD(t){const{initial:e,animate:n}=rD(t,V.useContext(wf));return V.useMemo(()=>({initial:e,animate:n}),[k_(e),k_(n)])}function k_(t){return Array.isArray(t)?t.join(" "):t}const iD=Symbol.for("motionComponentSymbol");function oa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oD(t,e,n){return V.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):oa(n)&&(n.current=r))},[e])}const Ov=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),aD="framerAppearId",Tk="data-"+Ov(aD),{schedule:Lv}=wk(queueMicrotask,!1),kk=V.createContext({});function lD(t,e,n,r,s){var i,o;const{visualElement:a}=V.useContext(wf),l=V.useContext(_k),u=V.useContext(xf),d=V.useContext(Nv).reducedMotion,h=V.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=h.current,p=V.useContext(kk);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&cD(h.current,n,s,p);const y=V.useRef(!1);V.useInsertionEffect(()=>{m&&y.current&&m.update(n,u)});const g=n[Tk],b=V.useRef(!!g&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return vk(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Lv.render(m.render),b.current&&m.animationState&&m.animationState.animateChanges())}),V.useEffect(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),b.current=!1))}),m}function cD(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Sk(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&oa(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function Sk(t){if(t)return t.options.allowProjection!==!1?t.projection:Sk(t.parent)}function uD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&J4(t);function a(u,d){let h;const m={...V.useContext(Nv),...u,layoutId:dD(u)},{isStatic:p}=m,y=sD(u),g=r(u,p);if(!p&&Pv){hD();const b=fD(m);h=b.MeasureLayout,y.visualElement=lD(s,g,m,e,b.ProjectionNode)}return c.jsxs(wf.Provider,{value:y,children:[h&&y.visualElement?c.jsx(h,{visualElement:y.visualElement,...m}):null,n(s,u,oD(g,y.visualElement,d),g,p,y.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=V.forwardRef(a);return l[iD]=s,l}function dD({layoutId:t}){const e=V.useContext(Cv).id;return e&&t!==void 0?e+"-"+t:t}function hD(t,e){V.useContext(_k).strict}function fD(t){const{drag:e,layout:n}=Da;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const mD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Mv(t){return typeof t!="string"||t.includes("-")?!1:!!(mD.indexOf(t)>-1||/[A-Z]/u.test(t))}function S_(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Vv(t,e,n,r){if(typeof e=="function"){const[s,i]=S_(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=S_(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const Cg=t=>Array.isArray(t),pD=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),gD=t=>Cg(t)?t[t.length-1]||0:t,an=t=>!!(t&&t.getVelocity);function Id(t){const e=an(t)?t.get():t;return pD(e)?e.toValue():e}function yD({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:vD(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const Ak=t=>(e,n)=>{const r=V.useContext(wf),s=V.useContext(xf),i=()=>yD(t,e,r,s);return n?i():Iv(i)};function vD(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Id(i[m]);let{initial:o,animate:a}=t;const l=Ef(t),u=bk(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!_f(h)){const m=Array.isArray(h)?h:[h];for(let p=0;p<m.length;p++){const y=Vv(t,m[p]);if(y){const{transitionEnd:g,transition:b,...v}=y;for(const T in v){let _=v[T];if(Array.isArray(_)){const I=d?_.length-1:0;_=_[I]}_!==null&&(s[T]=_)}for(const T in g)s[T]=g[T]}}}return s}const Ja=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],To=new Set(Ja),Ck=t=>e=>typeof e=="string"&&e.startsWith(t),Ik=Ck("--"),xD=Ck("var(--"),Fv=t=>xD(t)?wD.test(t.split("/*")[0].trim()):!1,wD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Nk=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vs=(t,e,n)=>n>e?e:n<t?t:n,Za={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Dc={...Za,transform:t=>vs(0,1,t)},ed={...Za,default:1},nu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),js=nu("deg"),Ur=nu("%"),le=nu("px"),_D=nu("vh"),ED=nu("vw"),A_={...Ur,parse:t=>Ur.parse(t)/100,transform:t=>Ur.transform(t*100)},bD={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le},TD={rotate:js,rotateX:js,rotateY:js,rotateZ:js,scale:ed,scaleX:ed,scaleY:ed,scaleZ:ed,skew:js,skewX:js,skewY:js,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Dc,originX:A_,originY:A_,originZ:le},C_={...Za,transform:Math.round},Uv={...bD,...TD,zIndex:C_,size:le,fillOpacity:Dc,strokeOpacity:Dc,numOctaves:C_},kD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SD=Ja.length;function AD(t,e,n){let r="",s=!0;for(let i=0;i<SD;i++){const o=Ja[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=Nk(a,Uv[o]);if(!l){s=!1;const d=kD[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function $v(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(To.has(l)){o=!0;continue}else if(Ik(l)){s[l]=u;continue}else{const d=Nk(u,Uv[l]);l.startsWith("origin")?(a=!0,i[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=AD(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${u} ${d}`}}const CD={offset:"stroke-dashoffset",array:"stroke-dasharray"},ID={offset:"strokeDashoffset",array:"strokeDasharray"};function ND(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?CD:ID;t[i.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[i.array]=`${o} ${a}`}function I_(t,e,n){return typeof t=="string"?t:le.transform(e+n*t)}function PD(t,e,n){const r=I_(e,t.x,t.width),s=I_(n,t.y,t.height);return`${r} ${s}`}function Bv(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,h){if($v(t,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p,dimensions:y}=t;m.transform&&(y&&(p.transform=m.transform),delete m.transform),y&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=PD(y,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&ND(m,o,a,l,!1)}const zv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Pk=()=>({...zv(),attrs:{}}),Wv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function jk(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const Rk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Dk(t,e,n,r){jk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Rk.has(s)?s:Ov(s),e.attrs[s])}const vh={};function jD(t){Object.assign(vh,t)}function Ok(t,{layout:e,layoutId:n}){return To.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vh[t]||t==="opacity")}function Hv(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(an(s[o])||e.style&&an(e.style[o])||Ok(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function Lk(t,e,n){const r=Hv(t,e,n);for(const s in t)if(an(t[s])||an(e[s])){const i=Ja.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function RD(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const N_=["x","y","width","height","cx","cy","r"],DD={useVisualState:Ak({scrapeMotionValuesFromProps:Lk,createRenderState:Pk,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(To.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<N_.length;a++){const l=N_[a];t[l]!==e[l]&&(o=!0)}o&&Ze.read(()=>{RD(n,r),Ze.render(()=>{Bv(r,s,Wv(n.tagName),t.transformTemplate),Dk(n,r)})})}})},OD={useVisualState:Ak({scrapeMotionValuesFromProps:Hv,createRenderState:zv})};function Mk(t,e,n){for(const r in e)!an(e[r])&&!Ok(r,n)&&(t[r]=e[r])}function LD({transformTemplate:t},e){return V.useMemo(()=>{const n=zv();return $v(n,e,t),Object.assign({},n.vars,n.style)},[e])}function MD(t,e){const n=t.style||{},r={};return Mk(r,n,t),Object.assign(r,LD(t,e)),r}function VD(t,e){const n={},r=MD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function FD(t,e,n,r){const s=V.useMemo(()=>{const i=Pk();return Bv(i,e,Wv(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Mk(i,t.style,t),s.style={...i,...s.style}}return s}function UD(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(Mv(n)?FD:VD)(r,i,o,n),u=tD(r,typeof n=="string",t),d=n!==V.Fragment?{...u,...l,ref:s}:{},{children:h}=r,m=V.useMemo(()=>an(h)?h.get():h,[h]);return V.createElement(n,{...d,children:m})}}function $D(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...Mv(r)?DD:OD,preloadedFeatures:t,useRender:UD(s),createVisualElement:e,Component:r};return uD(o)}}function Vk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function bf(t,e,n){const r=t.getProps();return Vv(r,e,n!==void 0?n:r.custom,t)}const BD=jv(()=>window.ScrollTimeline!==void 0);class zD{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(BD()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class WD extends zD{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function qv(t,e){return t?t[e]||t.default||t:void 0}const Ig=2e4;function Fk(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Ig;)e+=n,r=t.next(e);return e>=Ig?1/0:e}function Gv(t){return typeof t=="function"}function P_(t,e){t.timeline=e,t.onfinish=null}const Kv=t=>Array.isArray(t)&&typeof t[0]=="number",HD={linearEasing:void 0};function qD(t,e){const n=jv(t);return()=>{var r;return(r=HD[e])!==null&&r!==void 0?r:n()}}const xh=qD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Uk=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(Ra(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function $k(t){return!!(typeof t=="function"&&xh()||!t||typeof t=="string"&&(t in Ng||xh())||Kv(t)||Array.isArray(t)&&t.every($k))}const Dl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Ng={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dl([0,.65,.55,1]),circOut:Dl([.55,0,1,.45]),backIn:Dl([.31,.01,.66,-.59]),backOut:Dl([.33,1.53,.69,.99])};function Bk(t,e){if(t)return typeof t=="function"&&xh()?Uk(t,e):Kv(t)?Dl(t):Array.isArray(t)?t.map(n=>Bk(n,e)||Ng.easeOut):Ng[t]}const gr={x:!1,y:!1};function zk(){return gr.x||gr.y}function GD(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function Wk(t,e){const n=GD(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function j_(t){return e=>{e.pointerType==="touch"||zk()||t(e)}}function KD(t,e,n={}){const[r,s,i]=Wk(t,n),o=j_(a=>{const{target:l}=a,u=e(a);if(typeof u!="function"||!l)return;const d=j_(h=>{u(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const Hk=(t,e)=>e?t===e?!0:Hk(t,e.parentElement):!1,Qv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,QD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function YD(t){return QD.has(t.tagName)||t.tabIndex!==-1}const Ol=new WeakSet;function R_(t){return e=>{e.key==="Enter"&&t(e)}}function Gm(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const XD=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=R_(()=>{if(Ol.has(n))return;Gm(n,"down");const s=R_(()=>{Gm(n,"up")}),i=()=>Gm(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function D_(t){return Qv(t)&&!zk()}function JD(t,e,n={}){const[r,s,i]=Wk(t,n),o=a=>{const l=a.currentTarget;if(!D_(a)||Ol.has(l))return;Ol.add(l);const u=e(a),d=(p,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),!(!D_(p)||!Ol.has(l))&&(Ol.delete(l),typeof u=="function"&&u(p,{success:y}))},h=p=>{d(p,n.useGlobalTarget||Hk(l,p.target))},m=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return r.forEach(a=>{!YD(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",u=>XD(u,s),s)}),i}function ZD(t){return t==="x"||t==="y"?gr[t]?null:(gr[t]=!0,()=>{gr[t]=!1}):gr.x||gr.y?null:(gr.x=gr.y=!0,()=>{gr.x=gr.y=!1})}const qk=new Set(["width","height","top","left","right","bottom",...Ja]);let Nd;function eO(){Nd=void 0}const $r={now:()=>(Nd===void 0&&$r.set(zt.isProcessing||Q4.useManualTiming?zt.timestamp:performance.now()),Nd),set:t=>{Nd=t,queueMicrotask(eO)}};function Yv(t,e){t.indexOf(e)===-1&&t.push(e)}function Xv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Jv{constructor(){this.subscriptions=[]}add(e){return Yv(this.subscriptions,e),()=>Xv(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Gk(t,e){return e?t*(1e3/e):0}const O_=30,tO=t=>!isNaN(parseFloat(t));class nO{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=$r.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=$r.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Jv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=$r.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>O_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,O_);return Gk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Oc(t,e){return new nO(t,e)}function rO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Oc(n))}function sO(t,e){const n=bf(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=gD(i[o]);rO(t,o,a)}}function iO(t){return!!(an(t)&&t.add)}function Pg(t,e){const n=t.getValue("willChange");if(iO(n))return n.add(e)}function Kk(t){return t.props[Tk]}const Qk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,oO=1e-7,aO=12;function lO(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=Qk(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>oO&&++a<aO);return o}function ru(t,e,n,r){if(t===e&&n===r)return Yn;const s=i=>lO(i,0,1,t,n);return i=>i===0||i===1?i:Qk(s(i),e,r)}const Yk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Xk=t=>e=>1-t(1-e),Jk=ru(.33,1.53,.69,.99),Zv=Xk(Jk),Zk=Yk(Zv),eS=t=>(t*=2)<1?.5*Zv(t):.5*(2-Math.pow(2,-10*(t-1))),e0=t=>1-Math.sin(Math.acos(t)),tS=Xk(e0),nS=Yk(e0),rS=t=>/^0[^.\s]+$/u.test(t);function cO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||rS(t):!0}const Zl=t=>Math.round(t*1e5)/1e5,t0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uO(t){return t==null}const dO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,n0=(t,e)=>n=>!!(typeof n=="string"&&dO.test(n)&&n.startsWith(t)||e&&!uO(n)&&Object.prototype.hasOwnProperty.call(n,e)),sS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(t0);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},hO=t=>vs(0,255,t),Km={...Za,transform:t=>Math.round(hO(t))},Ji={test:n0("rgb","red"),parse:sS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Km.transform(t)+", "+Km.transform(e)+", "+Km.transform(n)+", "+Zl(Dc.transform(r))+")"};function fO(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const jg={test:n0("#"),parse:fO,transform:Ji.transform},aa={test:n0("hsl","hue"),parse:sS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ur.transform(Zl(e))+", "+Ur.transform(Zl(n))+", "+Zl(Dc.transform(r))+")"},nn={test:t=>Ji.test(t)||jg.test(t)||aa.test(t),parse:t=>Ji.test(t)?Ji.parse(t):aa.test(t)?aa.parse(t):jg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ji.transform(t):aa.transform(t)},mO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(t0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(mO))===null||n===void 0?void 0:n.length)||0)>0}const iS="number",oS="color",gO="var",yO="var(",L_="${}",vO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(vO,l=>(nn.test(l)?(r.color.push(i),s.push(oS),n.push(nn.parse(l))):l.startsWith(yO)?(r.var.push(i),s.push(gO),n.push(l)):(r.number.push(i),s.push(iS),n.push(parseFloat(l))),++i,L_)).split(L_);return{values:n,split:a,indexes:r,types:s}}function aS(t){return Lc(t).values}function lS(t){const{split:e,types:n}=Lc(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===iS?i+=Zl(s[o]):a===oS?i+=nn.transform(s[o]):i+=s[o]}return i}}const xO=t=>typeof t=="number"?0:t;function wO(t){const e=aS(t);return lS(t)(e.map(xO))}const pi={test:pO,parse:aS,createTransformer:lS,getAnimatableNone:wO},_O=new Set(["brightness","contrast","saturate","opacity"]);function EO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(t0)||[];if(!r)return t;const s=n.replace(r,"");let i=_O.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const bO=/\b([a-z-]*)\(.*?\)/gu,Rg={...pi,getAnimatableNone:t=>{const e=t.match(bO);return e?e.map(EO).join(" "):t}},TO={...Uv,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:Rg,WebkitFilter:Rg},r0=t=>TO[t];function cS(t,e){let n=r0(t);return n!==Rg&&(n=pi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kO=new Set(["auto","none","0"]);function SO(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!kO.has(i)&&Lc(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=cS(n,s)}const M_=t=>t===Za||t===le,V_=(t,e)=>parseFloat(t.split(", ")[e]),F_=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return V_(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?V_(i[1],t):0}},AO=new Set(["x","y","z"]),CO=Ja.filter(t=>!AO.has(t));function IO(t){const e=[];return CO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Oa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:F_(4,13),y:F_(5,14)};Oa.translateX=Oa.x;Oa.translateY=Oa.y;const ro=new Set;let Dg=!1,Og=!1;function uS(){if(Og){const t=Array.from(ro).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=IO(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Og=!1,Dg=!1,ro.forEach(t=>t.complete()),ro.clear()}function dS(){ro.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Og=!0)})}function NO(){dS(),uS()}class s0{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ro.add(this),Dg||(Dg=!0,Ze.read(dS),Ze.resolveKeyframes(uS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ro.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ro.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const hS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),PO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jO(t){const e=PO.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function fS(t,e,n=1){const[r,s]=jO(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return hS(o)?parseFloat(o):o}return Fv(s)?fS(s,e,n+1):s}const mS=t=>e=>e.test(t),RO={test:t=>t==="auto",parse:t=>t},pS=[Za,le,Ur,js,ED,_D,RO],U_=t=>pS.find(mS(t));class gS extends s0{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Fv(u))){const d=fS(u,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!qk.has(r)||e.length!==2)return;const[s,i]=e,o=U_(s),a=U_(i);if(o!==a)if(M_(o)&&M_(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)cO(e[s])&&r.push(s);r.length&&SO(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Oa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Oa[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const $_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pi.test(t)||t==="0")&&!t.startsWith("url("));function DO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function OO(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=$_(s,e),a=$_(i,e);return!o||!a?!1:DO(t)||(n==="spring"||Gv(n))&&r}const LO=t=>t!==null;function Tf(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(LO),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const MO=40;class yS{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=$r.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&NO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=$r.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!OO(e,r,s,i))if(o)this.options.duration=0;else{l&&l(Tf(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const st=(t,e,n)=>t+(e-t)*n;function Qm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function VO({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Qm(l,a,t+1/3),i=Qm(l,a,t),o=Qm(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function wh(t,e){return n=>n>0?e:t}const Ym=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},FO=[jg,Ji,aa],UO=t=>FO.find(e=>e.test(t));function B_(t){const e=UO(t);if(!e)return!1;let n=e.parse(t);return e===aa&&(n=VO(n)),n}const z_=(t,e)=>{const n=B_(t),r=B_(e);if(!n||!r)return wh(t,e);const s={...n};return i=>(s.red=Ym(n.red,r.red,i),s.green=Ym(n.green,r.green,i),s.blue=Ym(n.blue,r.blue,i),s.alpha=st(n.alpha,r.alpha,i),Ji.transform(s))},$O=(t,e)=>n=>e(t(n)),su=(...t)=>t.reduce($O),Lg=new Set(["none","hidden"]);function BO(t,e){return Lg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zO(t,e){return n=>st(t,e,n)}function i0(t){return typeof t=="number"?zO:typeof t=="string"?Fv(t)?wh:nn.test(t)?z_:qO:Array.isArray(t)?vS:typeof t=="object"?nn.test(t)?z_:WO:wh}function vS(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>i0(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function WO(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=i0(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function HO(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const qO=(t,e)=>{const n=pi.createTransformer(e),r=Lc(t),s=Lc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Lg.has(t)&&!s.values.length||Lg.has(e)&&!r.values.length?BO(t,e):su(vS(HO(r,s),s.values),n):wh(t,e)};function xS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?st(t,e,n):i0(t)(t,e)}const GO=5;function wS(t,e,n){const r=Math.max(e-GO,0);return Gk(n-t(r),e-r)}const dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},W_=.001;function KO({duration:t=dt.duration,bounce:e=dt.bounce,velocity:n=dt.velocity,mass:r=dt.mass}){let s,i,o=1-e;o=vs(dt.minDamping,dt.maxDamping,o),t=vs(dt.minDuration,dt.maxDuration,ds(t)),o<1?(s=u=>{const d=u*o,h=d*t,m=d-n,p=Mg(u,o),y=Math.exp(-h);return W_-m/p*y},i=u=>{const h=u*o*t,m=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-h),g=Mg(Math.pow(u,2),o);return(-s(u)+W_>0?-1:1)*((m-p)*y)/g}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-.001+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const a=5/t,l=YO(s,i,a);if(t=us(t),isNaN(l))return{stiffness:dt.stiffness,damping:dt.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const QO=12;function YO(t,e,n){let r=n;for(let s=1;s<QO;s++)r=r-t(r)/e(r);return r}function Mg(t,e){return t*Math.sqrt(1-e*e)}const XO=["duration","bounce"],JO=["stiffness","damping","mass"];function H_(t,e){return e.some(n=>t[n]!==void 0)}function ZO(t){let e={velocity:dt.velocity,stiffness:dt.stiffness,damping:dt.damping,mass:dt.mass,isResolvedFromDuration:!1,...t};if(!H_(t,JO)&&H_(t,XO))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*vs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:dt.mass,stiffness:s,damping:i}}else{const n=KO(t);e={...e,...n,mass:dt.mass},e.isResolvedFromDuration=!0}return e}function _S(t=dt.visualDuration,e=dt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:p}=ZO({...n,velocity:-ds(n.velocity||0)}),y=m||0,g=u/(2*Math.sqrt(l*d)),b=o-i,v=ds(Math.sqrt(l/d)),T=Math.abs(b)<5;r||(r=T?dt.restSpeed.granular:dt.restSpeed.default),s||(s=T?dt.restDelta.granular:dt.restDelta.default);let _;if(g<1){const O=Mg(v,g);_=N=>{const C=Math.exp(-g*v*N);return o-C*((y+g*v*b)/O*Math.sin(O*N)+b*Math.cos(O*N))}}else if(g===1)_=O=>o-Math.exp(-v*O)*(b+(y+v*b)*O);else{const O=v*Math.sqrt(g*g-1);_=N=>{const C=Math.exp(-g*v*N),x=Math.min(O*N,300);return o-C*((y+g*v*b)*Math.sinh(x)+O*b*Math.cosh(x))/O}}const I={calculatedDuration:p&&h||null,next:O=>{const N=_(O);if(p)a.done=O>=h;else{let C=0;g<1&&(C=O===0?us(y):wS(_,O,N));const x=Math.abs(C)<=r,w=Math.abs(o-N)<=s;a.done=x&&w}return a.value=a.done?o:N,a},toString:()=>{const O=Math.min(Fk(I),Ig),N=Uk(C=>I.next(O*C).value,O,30);return O+"ms "+N}};return I}function q_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=t[0],m={done:!1,value:h},p=x=>a!==void 0&&x<a||l!==void 0&&x>l,y=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let g=n*e;const b=h+g,v=o===void 0?b:o(b);v!==b&&(g=v-h);const T=x=>-g*Math.exp(-x/r),_=x=>v+T(x),I=x=>{const w=T(x),k=_(x);m.done=Math.abs(w)<=u,m.value=m.done?v:k};let O,N;const C=x=>{p(m.value)&&(O=x,N=_S({keyframes:[m.value,y(m.value)],velocity:wS(_,x,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:x=>{let w=!1;return!N&&O===void 0&&(w=!0,I(x),C(x)),O!==void 0&&x>=O?N.next(x-O):(!w&&I(x),m)}}}const e3=ru(.42,0,1,1),t3=ru(0,0,.58,1),ES=ru(.42,0,.58,1),n3=t=>Array.isArray(t)&&typeof t[0]!="number",r3={linear:Yn,easeIn:e3,easeInOut:ES,easeOut:t3,circIn:e0,circInOut:nS,circOut:tS,backIn:Zv,backInOut:Zk,backOut:Jk,anticipate:eS},G_=t=>{if(Kv(t)){xk(t.length===4);const[e,n,r,s]=t;return ru(e,n,r,s)}else if(typeof t=="string")return r3[t];return t};function s3(t,e,n){const r=[],s=n||xS,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Yn:e;a=su(l,a)}r.push(a)}return r}function i3(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(xk(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=s3(e,r,s),l=a.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const m=Ra(t[h],t[h+1],d);return a[h](m)};return n?d=>u(vs(t[0],t[i-1],d)):u}function o3(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ra(0,e,r);t.push(st(n,1,s))}}function a3(t){const e=[0];return o3(e,t.length-1),e}function l3(t,e){return t.map(n=>n*e)}function c3(t,e){return t.map(()=>e||ES).splice(0,t.length-1)}function _h({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=n3(r)?r.map(G_):G_(r),i={done:!1,value:e[0]},o=l3(n&&n.length===e.length?n:a3(e),t),a=i3(o,e,{ease:Array.isArray(s)?s:c3(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const u3=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ze.update(e,!0),stop:()=>mi(e),now:()=>zt.isProcessing?zt.timestamp:$r.now()}},d3={decay:q_,inertia:q_,tween:_h,keyframes:_h,spring:_S},h3=t=>t/100;class o0 extends yS{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||s0,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=Gv(n)?n:d3[n]||_h;let l,u;a!==_h&&typeof e[0]!="number"&&(l=su(h3,xS(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});i==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Fk(d));const{calculatedDuration:h}=d,m=h+s,p=m*(r+1)-s;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:x}=this.options;return{done:!0,value:x[x.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return i.next(0);const{delay:m,repeat:p,repeatType:y,repeatDelay:g,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-m*(this.speed>=0?1:-1),T=this.speed>=0?v<0:v>d;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let _=this.currentTime,I=i;if(p){const x=Math.min(this.currentTime,d)/h;let w=Math.floor(x),k=x%1;!k&&x>=1&&(k=1),k===1&&w--,w=Math.min(w,p+1),!!(w%2)&&(y==="reverse"?(k=1-k,g&&(k-=g/h)):y==="mirror"&&(I=o)),_=vs(0,1,k)*h}const O=T?{done:!1,value:l[0]}:I.next(_);a&&(O.value=a(O.value));let{done:N}=O;!T&&u!==null&&(N=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return C&&s!==void 0&&(O.value=Tf(l,this.options,s)),b&&b(O.value),C&&this.finish(),O}get duration(){const{resolved:e}=this;return e?ds(e.calculatedDuration):0}get time(){return ds(this.currentTime)}set time(e){e=us(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=u3,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const f3=new Set(["opacity","clipPath","filter","transform"]);function m3(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const d=Bk(a,s);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const p3=jv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Eh=10,g3=2e4;function y3(t){return Gv(t.type)||t.type==="spring"||!$k(t.ease)}function v3(t,e){const n=new o0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<g3;)r=n.sample(i),s.push(r.value),i+=Eh;return{times:void 0,keyframes:s,duration:i-Eh,ease:"linear"}}const bS={anticipate:eS,backInOut:Zk,circInOut:nS};function x3(t){return t in bS}class K_ extends yS{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new gS(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&xh()&&x3(i)&&(i=bS[i]),y3(this.options)){const{onComplete:h,onUpdate:m,motionValue:p,element:y,...g}=this.options,b=v3(e,g);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,s=b.times,i=b.ease,o="keyframes"}const d=m3(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(P_(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(Tf(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ds(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ds(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=us(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Yn;const{animation:r}=n;P_(r,e)}return Yn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:m,...p}=this.options,y=new o0({...p,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),g=us(this.time);u.setWithVelocity(y.sample(g-Eh).value,y.sample(g).value,Eh)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return p3()&&r&&f3.has(r)&&!l&&!u&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const w3={type:"spring",stiffness:500,damping:25,restSpeed:10},_3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),E3={type:"keyframes",duration:.8},b3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T3=(t,{keyframes:e})=>e.length>2?E3:To.has(t)?t.startsWith("scale")?_3(e[1]):w3:b3;function k3({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const a0=(t,e,n,r={},s,i)=>o=>{const a=qv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-us(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};k3(a)||(d={...d,...T3(t,d)}),d.duration&&(d.duration=us(d.duration)),d.repeatDelay&&(d.repeatDelay=us(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!i&&e.get()!==void 0){const m=Tf(d.keyframes,a);if(m!==void 0)return Ze.update(()=>{d.onUpdate(m),d.onComplete()}),new WD([])}return!i&&K_.supports(d)?new K_(d):new o0(d)};function S3({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function TS(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const m=t.getValue(h,(i=t.latestValues[h])!==null&&i!==void 0?i:null),p=l[h];if(p===void 0||d&&S3(d,h))continue;const y={delay:n,...qv(o||{},h)};let g=!1;if(window.MotionHandoffAnimation){const v=Kk(t);if(v){const T=window.MotionHandoffAnimation(v,h,Ze);T!==null&&(y.startTime=T,g=!0)}}Pg(t,h),m.start(a0(h,m,p,t.shouldReduceMotion&&qk.has(h)?{type:!1}:y,t,g));const b=m.animation;b&&u.push(b)}return a&&Promise.all(u).then(()=>{Ze.update(()=>{a&&sO(t,a)})}),u}function Vg(t,e,n={}){var r;const s=bf(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(TS(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=i;return A3(t,e,d+u,h,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function A3(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(C3).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(Vg(u,e,{...i,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function C3(t,e){return t.sortNodePosition(e)}function I3(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Vg(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Vg(t,e,n);else{const s=typeof e=="function"?bf(t,e,n.custom):e;r=Promise.all(TS(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const N3=Dv.length;function kS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?kS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<N3;n++){const r=Dv[n],s=t.props[r];(Rc(s)||s===!1)&&(e[r]=s)}return e}const P3=[...Rv].reverse(),j3=Rv.length;function R3(t){return e=>Promise.all(e.map(({animation:n,options:r})=>I3(t,n,r)))}function D3(t){let e=R3(t),n=Q_(),r=!0;const s=l=>(u,d)=>{var h;const m=bf(t,d,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(m){const{transition:p,transitionEnd:y,...g}=m;u={...u,...g,...y}}return u};function i(l){e=l(t)}function o(l){const{props:u}=t,d=kS(t.parent)||{},h=[],m=new Set;let p={},y=1/0;for(let b=0;b<j3;b++){const v=P3[b],T=n[v],_=u[v]!==void 0?u[v]:d[v],I=Rc(_),O=v===l?T.isActive:null;O===!1&&(y=b);let N=_===d[v]&&_!==u[v]&&I;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),T.protectedKeys={...p},!T.isActive&&O===null||!_&&!T.prevProp||_f(_)||typeof _=="boolean")continue;const C=O3(T.prevProp,_);let x=C||v===l&&T.isActive&&!N&&I||b>y&&I,w=!1;const k=Array.isArray(_)?_:[_];let j=k.reduce(s(v),{});O===!1&&(j={});const{prevResolvedValues:P={}}=T,S={...P,...j},M=R=>{x=!0,m.has(R)&&(w=!0,m.delete(R)),T.needsAnimating[R]=!0;const $=t.getValue(R);$&&($.liveStyle=!1)};for(const R in S){const $=j[R],U=P[R];if(p.hasOwnProperty(R))continue;let z=!1;Cg($)&&Cg(U)?z=!Vk($,U):z=$!==U,z?$!=null?M(R):m.add(R):$!==void 0&&m.has(R)?M(R):T.protectedKeys[R]=!0}T.prevProp=_,T.prevResolvedValues=j,T.isActive&&(p={...p,...j}),r&&t.blockInitialAnimation&&(x=!1),x&&(!(N&&C)||w)&&h.push(...k.map(R=>({animation:R,options:{type:v}})))}if(m.size){const b={};m.forEach(v=>{const T=t.getBaseTarget(v),_=t.getValue(v);_&&(_.liveStyle=!0),b[v]=T??null}),h.push({animation:b})}let g=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const h=o(l);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Q_(),r=!0}}}function O3(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Vk(e,t):!1}function Ui(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Q_(){return{animate:Ui(!0),whileInView:Ui(),whileHover:Ui(),whileTap:Ui(),whileDrag:Ui(),whileFocus:Ui(),exit:Ui()}}class Ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}class L3 extends Ii{constructor(e){super(e),e.animationState||(e.animationState=D3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_f(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let M3=0;class V3 extends Ii{constructor(){super(...arguments),this.id=M3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const F3={animation:{Feature:L3},exit:{Feature:V3}};function Mc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function iu(t){return{point:{x:t.pageX,y:t.pageY}}}const U3=t=>e=>Qv(e)&&t(e,iu(e));function ec(t,e,n,r){return Mc(t,e,U3(n),r)}const Y_=(t,e)=>Math.abs(t-e);function $3(t,e){const n=Y_(t.x,e.x),r=Y_(t.y,e.y);return Math.sqrt(n**2+r**2)}class SS{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Jm(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=$3(h.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:y}=h,{timestamp:g}=zt;this.history.push({...y,timestamp:g});const{onStart:b,onMove:v}=this.handlers;m||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Xm(m,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Jm(h.type==="pointercancel"?this.lastMoveEventInfo:Xm(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,b),y&&y(h,b)},!Qv(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=iu(e),a=Xm(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=zt;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,Jm(a,this.history)),this.removeListeners=su(ec(this.contextWindow,"pointermove",this.handlePointerMove),ec(this.contextWindow,"pointerup",this.handlePointerUp),ec(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),mi(this.updatePoint)}}function Xm(t,e){return e?{point:e(t.point)}:t}function X_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Jm({point:t},e){return{point:t,delta:X_(t,AS(e)),offset:X_(t,B3(e)),velocity:z3(e,.1)}}function B3(t){return t[0]}function AS(t){return t[t.length-1]}function z3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=AS(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>us(e)));)n--;if(!r)return{x:0,y:0};const i=ds(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const CS=1e-4,W3=1-CS,H3=1+CS,IS=.01,q3=0-IS,G3=0+IS;function Jn(t){return t.max-t.min}function K3(t,e,n){return Math.abs(t-e)<=n}function J_(t,e,n,r=.5){t.origin=r,t.originPoint=st(e.min,e.max,t.origin),t.scale=Jn(n)/Jn(e),t.translate=st(n.min,n.max,t.origin)-t.originPoint,(t.scale>=W3&&t.scale<=H3||isNaN(t.scale))&&(t.scale=1),(t.translate>=q3&&t.translate<=G3||isNaN(t.translate))&&(t.translate=0)}function tc(t,e,n,r){J_(t.x,e.x,n.x,r?r.originX:void 0),J_(t.y,e.y,n.y,r?r.originY:void 0)}function Z_(t,e,n){t.min=n.min+e.min,t.max=t.min+Jn(e)}function Q3(t,e,n){Z_(t.x,e.x,n.x),Z_(t.y,e.y,n.y)}function e1(t,e,n){t.min=e.min-n.min,t.max=t.min+Jn(e)}function nc(t,e,n){e1(t.x,e.x,n.x),e1(t.y,e.y,n.y)}function Y3(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?st(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?st(n,t,r.max):Math.min(t,n)),t}function t1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function X3(t,{top:e,left:n,bottom:r,right:s}){return{x:t1(t.x,n,s),y:t1(t.y,e,r)}}function n1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function J3(t,e){return{x:n1(t.x,e.x),y:n1(t.y,e.y)}}function Z3(t,e){let n=.5;const r=Jn(t),s=Jn(e);return s>r?n=Ra(e.min,e.max-r,t.min):r>s&&(n=Ra(t.min,t.max-s,e.min)),vs(0,1,n)}function e5(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Fg=.35;function t5(t=Fg){return t===!1?t=0:t===!0&&(t=Fg),{x:r1(t,"left","right"),y:r1(t,"top","bottom")}}function r1(t,e,n){return{min:s1(t,e),max:s1(t,n)}}function s1(t,e){return typeof t=="number"?t:t[e]||0}const i1=()=>({translate:0,scale:1,origin:0,originPoint:0}),la=()=>({x:i1(),y:i1()}),o1=()=>({min:0,max:0}),xt=()=>({x:o1(),y:o1()});function nr(t){return[t("x"),t("y")]}function NS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function n5({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function r5(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Zm(t){return t===void 0||t===1}function Ug({scale:t,scaleX:e,scaleY:n}){return!Zm(t)||!Zm(e)||!Zm(n)}function Wi(t){return Ug(t)||PS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function PS(t){return a1(t.x)||a1(t.y)}function a1(t){return t&&t!=="0%"}function bh(t,e,n){const r=t-n,s=e*r;return n+s}function l1(t,e,n,r,s){return s!==void 0&&(t=bh(t,s,r)),bh(t,n,r)+e}function $g(t,e=0,n=1,r,s){t.min=l1(t.min,e,n,r,s),t.max=l1(t.max,e,n,r,s)}function jS(t,{x:e,y:n}){$g(t.x,e.translate,e.scale,e.originPoint),$g(t.y,n.translate,n.scale,n.originPoint)}const c1=.999999999999,u1=1.0000000000001;function s5(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ua(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,jS(t,o)),r&&Wi(i.latestValues)&&ua(t,i.latestValues))}e.x<u1&&e.x>c1&&(e.x=1),e.y<u1&&e.y>c1&&(e.y=1)}function ca(t,e){t.min=t.min+e,t.max=t.max+e}function d1(t,e,n,r,s=.5){const i=st(t.min,t.max,s);$g(t,e,n,i,r)}function ua(t,e){d1(t.x,e.x,e.scaleX,e.scale,e.originX),d1(t.y,e.y,e.scaleY,e.scale,e.originY)}function RS(t,e){return NS(r5(t.getBoundingClientRect(),e))}function i5(t,e,n){const r=RS(t,n),{scroll:s}=e;return s&&(ca(r.x,s.offset.x),ca(r.y,s.offset.y)),r}const DS=({current:t})=>t?t.ownerDocument.defaultView:null,o5=new WeakMap;class a5{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(iu(d).point)},i=(d,h)=>{const{drag:m,dragPropagation:p,onDragStart:y}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ZD(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nr(b=>{let v=this.getAxisMotionValue(b).get()||0;if(Ur.test(v)){const{projection:T}=this.visualElement;if(T&&T.layout){const _=T.layout.layoutBox[b];_&&(v=Jn(_)*(parseFloat(v)/100))}}this.originPoint[b]=v}),y&&Ze.postRender(()=>y(d,h)),Pg(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:y,onDrag:g}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=h;if(p&&this.currentDirection===null){this.currentDirection=l5(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),g&&g(d,h)},a=(d,h)=>this.stop(d,h),l=()=>nr(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new SS(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:DS(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ze.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!td(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Y3(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&oa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=X3(s.layoutBox,n):this.constraints=!1,this.elastic=t5(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&nr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=e5(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!oa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=i5(r,s.root,this.visualElement.getTransformPagePoint());let o=J3(s.layout.layoutBox,i);if(n){const a=n(n5(o));this.hasMutatedConstraints=!!a,a&&(o=NS(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=nr(d=>{if(!td(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const m=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Pg(this.visualElement,e),r.start(a0(e,r,0,n,this.visualElement,!1))}stopAnimation(){nr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nr(n=>{const{drag:r}=this.getProps();if(!td(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-st(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!oa(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};nr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Z3({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nr(o=>{if(!td(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(st(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;o5.set(this.visualElement,this);const e=this.visualElement.current,n=ec(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();oa(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ze.read(r);const o=Mc(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(nr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Fg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function td(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function l5(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class c5 extends Ii{constructor(e){super(e),this.removeGroupControls=Yn,this.removeListeners=Yn,this.controls=new a5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yn}unmount(){this.removeGroupControls(),this.removeListeners()}}const h1=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class u5 extends Ii{constructor(){super(...arguments),this.removePointerDownListener=Yn}onPointerDown(e){this.session=new SS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:h1(e),onStart:h1(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Ze.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=ec(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Pd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function f1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Sl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=f1(t,e.target.x),r=f1(t,e.target.y);return`${n}% ${r}%`}},d5={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=pi.parse(t);if(s.length>5)return r;const i=pi.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=st(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class h5 extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;jD(f5),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Pd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Lv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OS(t){const[e,n]=yk(),r=V.useContext(Cv);return c.jsx(h5,{...t,layoutGroup:r,switchLayoutGroup:V.useContext(kk),isPresent:e,safeToRemove:n})}const f5={borderRadius:{...Sl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sl,borderTopRightRadius:Sl,borderBottomLeftRadius:Sl,borderBottomRightRadius:Sl,boxShadow:d5};function m5(t,e,n){const r=an(t)?t:Oc(t);return r.start(a0("",r,e,n)),r.animation}function p5(t){return t instanceof SVGElement&&t.tagName!=="svg"}const g5=(t,e)=>t.depth-e.depth;class y5{constructor(){this.children=[],this.isDirty=!1}add(e){Yv(this.children,e),this.isDirty=!0}remove(e){Xv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(g5),this.isDirty=!1,this.children.forEach(e)}}function v5(t,e){const n=$r.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(mi(r),t(i-e))};return Ze.read(r,!0),()=>mi(r)}const LS=["TopLeft","TopRight","BottomLeft","BottomRight"],x5=LS.length,m1=t=>typeof t=="string"?parseFloat(t):t,p1=t=>typeof t=="number"||le.test(t);function w5(t,e,n,r,s,i){s?(t.opacity=st(0,n.opacity!==void 0?n.opacity:1,_5(r)),t.opacityExit=st(e.opacity!==void 0?e.opacity:1,0,E5(r))):i&&(t.opacity=st(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<x5;o++){const a=`border${LS[o]}Radius`;let l=g1(e,a),u=g1(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||p1(l)===p1(u)?(t[a]=Math.max(st(m1(l),m1(u),r),0),(Ur.test(u)||Ur.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=st(e.rotate||0,n.rotate||0,r))}function g1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _5=MS(0,.5,tS),E5=MS(.5,.95,Yn);function MS(t,e,n){return r=>r<t?0:r>e?1:n(Ra(t,e,r))}function y1(t,e){t.min=e.min,t.max=e.max}function tr(t,e){y1(t.x,e.x),y1(t.y,e.y)}function v1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function x1(t,e,n,r,s){return t-=e,t=bh(t,1/n,r),s!==void 0&&(t=bh(t,1/s,r)),t}function b5(t,e=0,n=1,r=.5,s,i=t,o=t){if(Ur.test(e)&&(e=parseFloat(e),e=st(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=st(i.min,i.max,r);t===i&&(a-=e),t.min=x1(t.min,e,n,a,s),t.max=x1(t.max,e,n,a,s)}function w1(t,e,[n,r,s],i,o){b5(t,e[n],e[r],e[s],e.scale,i,o)}const T5=["x","scaleX","originX"],k5=["y","scaleY","originY"];function _1(t,e,n,r){w1(t.x,e,T5,n?n.x:void 0,r?r.x:void 0),w1(t.y,e,k5,n?n.y:void 0,r?r.y:void 0)}function E1(t){return t.translate===0&&t.scale===1}function VS(t){return E1(t.x)&&E1(t.y)}function b1(t,e){return t.min===e.min&&t.max===e.max}function S5(t,e){return b1(t.x,e.x)&&b1(t.y,e.y)}function T1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function FS(t,e){return T1(t.x,e.x)&&T1(t.y,e.y)}function k1(t){return Jn(t.x)/Jn(t.y)}function S1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class A5{constructor(){this.members=[]}add(e){Yv(this.members,e),e.scheduleRender()}remove(e){if(Xv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function C5(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:p,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Hi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ll=typeof window<"u"&&window.MotionDebug!==void 0,ep=["","X","Y","Z"],I5={visibility:"hidden"},A1=1e3;let N5=0;function tp(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function US(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Kk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&US(r)}function $S({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=N5++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ll&&(Hi.totalNodes=Hi.resolvedTargetDeltas=Hi.recalculatedProjection=0),this.nodes.forEach(R5),this.nodes.forEach(V5),this.nodes.forEach(F5),this.nodes.forEach(D5),Ll&&window.MotionDebug.record(Hi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new y5)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Jv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=p5(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=v5(m,250),Pd.hasAnimatedSinceResize&&(Pd.hasAnimatedSinceResize=!1,this.nodes.forEach(I1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||W5,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=d.getProps(),T=!this.targetLayout||!FS(this.targetLayout,y)||p,_=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||m&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,_);const I={...qv(g,"layout"),onPlay:b,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else m||I1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,mi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(U5),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&US(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(C1);return}this.isUpdating||this.nodes.forEach(L5),this.isUpdating=!1,this.nodes.forEach(M5),this.nodes.forEach(P5),this.nodes.forEach(j5),this.clearAllSnapshots();const a=$r.now();zt.delta=vs(0,1e3/60,a-zt.timestamp),zt.timestamp=a,zt.isProcessing=!0,qm.update.process(zt),qm.preRender.process(zt),qm.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Lv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(O5),this.sharedNodes.forEach($5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!VS(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||Wi(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),H5(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return xt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(q5))){const{scroll:d}=this.root;d&&(ca(l.x,d.offset.x),ca(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=xt();if(tr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&tr(l,o),ca(l.x,h.offset.x),ca(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=xt();tr(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ua(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Wi(d.latestValues)&&ua(l,d.latestValues)}return Wi(this.latestValues)&&ua(l,this.latestValues),l}removeTransform(o){const a=xt();tr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Wi(u.latestValues))continue;Ug(u.latestValues)&&u.updateSnapshot();const d=xt(),h=u.measurePageBox();tr(d,h),_1(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Wi(this.latestValues)&&_1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=zt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),nc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Q3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tr(this.target,this.layout.layoutBox),jS(this.target,this.targetDelta)):tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),nc(this.relativeTargetOrigin,this.target,p.target),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ll&&Hi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ug(this.parent.latestValues)||PS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;tr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;s5(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=xt());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(v1(this.prevProjectionDelta.x,this.projectionDelta.x),v1(this.prevProjectionDelta.y,this.projectionDelta.y)),tc(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!S1(this.projectionDelta.x,this.prevProjectionDelta.x)||!S1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Ll&&Hi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=la(),this.projectionDelta=la(),this.projectionDeltaWithTransform=la()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=la();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=xt(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,g=p!==y,b=this.getStack(),v=!b||b.members.length<=1,T=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(z5));this.animationProgress=0;let _;this.mixTargetDelta=I=>{const O=I/1e3;N1(h.x,o.x,O),N1(h.y,o.y,O),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),B5(this.relativeTarget,this.relativeTargetOrigin,m,O),_&&S5(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=xt()),tr(_,this.relativeTarget)),g&&(this.animationValues=d,w5(d,u,this.latestValues,O,T,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(mi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{Pd.hasAnimatedSinceResize=!0,this.currentAnimation=m5(0,A1,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(A1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&BS(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||xt();const h=Jn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Jn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}tr(a,l),ua(a,d),tc(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new A5),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&tp("z",o,u,this.animationValues);for(let d=0;d<ep.length;d++)tp(`rotate${ep[d]}`,o,u,this.animationValues),tp(`skew${ep[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return I5;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Id(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Id(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Wi(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=C5(this.projectionDeltaWithTransform,this.treeScale,m),d&&(u.transform=d(m,u.transform));const{x:p,y}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const g in vh){if(m[g]===void 0)continue;const{correct:b,applyTo:v}=vh[g],T=u.transform==="none"?m[g]:b(m[g],h);if(v){const _=v.length;for(let I=0;I<_;I++)u[v[I]]=T}else u[g]=T}return this.options.layoutId&&(u.pointerEvents=h===this?Id(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(C1),this.root.sharedNodes.clear()}}}function P5(t){t.updateLayout()}function j5(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?nr(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],p=Jn(m);m.min=r[h].min,m.max=m.min+p}):BS(i,n.layoutBox,r)&&nr(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],p=Jn(r[h]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=la();tc(a,r,n.layoutBox);const l=la();o?tc(l,t.applyTransform(s,!0),n.measuredBox):tc(l,r,n.layoutBox);const u=!VS(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const y=xt();nc(y,n.layoutBox,m.layoutBox);const g=xt();nc(g,r,p.layoutBox),FS(y,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function R5(t){Ll&&Hi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function D5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function O5(t){t.clearSnapshot()}function C1(t){t.clearMeasurements()}function L5(t){t.isLayoutDirty=!1}function M5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function I1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function V5(t){t.resolveTargetDelta()}function F5(t){t.calcProjection()}function U5(t){t.resetSkewAndRotation()}function $5(t){t.removeLeadSnapshot()}function N1(t,e,n){t.translate=st(e.translate,0,n),t.scale=st(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function P1(t,e,n,r){t.min=st(e.min,n.min,r),t.max=st(e.max,n.max,r)}function B5(t,e,n,r){P1(t.x,e.x,n.x,r),P1(t.y,e.y,n.y,r)}function z5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const W5={duration:.45,ease:[.4,0,.1,1]},j1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),R1=j1("applewebkit/")&&!j1("chrome/")?Math.round:Yn;function D1(t){t.min=R1(t.min),t.max=R1(t.max)}function H5(t){D1(t.x),D1(t.y)}function BS(t,e,n){return t==="position"||t==="preserve-aspect"&&!K3(k1(e),k1(n),.2)}function q5(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const G5=$S({attachResizeListener:(t,e)=>Mc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),np={current:void 0},zS=$S({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!np.current){const t=new G5({});t.mount(window),t.setOptions({layoutScroll:!0}),np.current=t}return np.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),K5={pan:{Feature:u5},drag:{Feature:c5,ProjectionNode:zS,MeasureLayout:OS}};function O1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Ze.postRender(()=>i(e,iu(e)))}class Q5 extends Ii{mount(){const{current:e}=this.node;e&&(this.unmount=KD(e,n=>(O1(this.node,n,"Start"),r=>O1(this.node,r,"End"))))}unmount(){}}class Y5 extends Ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=su(Mc(this.node.current,"focus",()=>this.onFocus()),Mc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function L1(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Ze.postRender(()=>i(e,iu(e)))}class X5 extends Ii{mount(){const{current:e}=this.node;e&&(this.unmount=JD(e,n=>(L1(this.node,n,"Start"),(r,{success:s})=>L1(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Bg=new WeakMap,rp=new WeakMap,J5=t=>{const e=Bg.get(t.target);e&&e(t)},Z5=t=>{t.forEach(J5)};function eL({root:t,...e}){const n=t||document;rp.has(n)||rp.set(n,{});const r=rp.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Z5,{root:t,...e})),r[s]}function tL(t,e,n){const r=eL(e);return Bg.set(t,n),r.observe(t),()=>{Bg.delete(t),r.unobserve(t)}}const nL={some:0,all:1};class rL extends Ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:nL[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(l)};return tL(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sL(e,n))&&this.startObserver()}unmount(){}}function sL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const iL={inView:{Feature:rL},tap:{Feature:X5},focus:{Feature:Y5},hover:{Feature:Q5}},oL={layout:{ProjectionNode:zS,MeasureLayout:OS}},zg={current:null},WS={current:!1};function aL(){if(WS.current=!0,!!Pv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zg.current=t.matches;t.addListener(e),e()}else zg.current=!1}const lL=[...pS,nn,pi],cL=t=>lL.find(mS(t)),M1=new WeakMap;function uL(t,e,n){for(const r in e){const s=e[r],i=n[r];if(an(s))t.addValue(r,s);else if(an(i))t.addValue(r,Oc(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Oc(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const V1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dL{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=s0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=$r.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Ef(n),this.isVariantNode=bk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const y=m[p];l[p]!==void 0&&an(y)&&y.set(l[p],!1)}}mount(e){this.current=e,M1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),WS.current||aL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){M1.delete(this.current),this.projection&&this.projection.unmount(),mi(this.notifyUpdate),mi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=To.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Da){const n=Da[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<V1.length;r++){const s=V1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=uL(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Oc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(hS(s)||rS(s))?s=parseFloat(s):!cL(s)&&pi.test(n)&&(s=cS(e,n)),this.setBaseTarget(e,an(s)?s.get():s)),an(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=Vv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!an(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Jv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class HS extends dL{constructor(){super(...arguments),this.KeyframeResolver=gS}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function hL(t){return window.getComputedStyle(t)}class fL extends HS{constructor(){super(...arguments),this.type="html",this.renderInstance=jk}readValueFromInstance(e,n){if(To.has(n)){const r=r0(n);return r&&r.default||0}else{const r=hL(e),s=(Ik(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return RS(e,n)}build(e,n,r){$v(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Hv(e,n,r)}}class mL extends HS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(To.has(n)){const r=r0(n);return r&&r.default||0}return n=Rk.has(n)?n:Ov(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Lk(e,n,r)}build(e,n,r){Bv(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){Dk(e,n,r,s)}mount(e){this.isSVGTag=Wv(e.tagName),super.mount(e)}}const pL=(t,e)=>Mv(t)?new mL(e):new fL(e,{allowProjection:t!==V.Fragment}),gL=$D({...F3,...iL,...K5,...oL},pL),F=nD(gL),yL={},F1=t=>{let e;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const p=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(y=>y(e,p))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(yL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,l);return l},vL=t=>t?F1(t):F1;var qS={exports:{}},GS={},KS={exports:{}},QS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=V;function xL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wL=typeof Object.is=="function"?Object.is:xL,_L=La.useState,EL=La.useEffect,bL=La.useLayoutEffect,TL=La.useDebugValue;function kL(t,e){var n=e(),r=_L({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return bL(function(){s.value=n,s.getSnapshot=e,sp(s)&&i({inst:s})},[t,n,e]),EL(function(){return sp(s)&&i({inst:s}),t(function(){sp(s)&&i({inst:s})})},[t]),TL(n),n}function sp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wL(t,n)}catch{return!0}}function SL(t,e){return e()}var AL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?SL:kL;QS.useSyncExternalStore=La.useSyncExternalStore!==void 0?La.useSyncExternalStore:AL;KS.exports=QS;var CL=KS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf=V,IL=CL;function NL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var PL=typeof Object.is=="function"?Object.is:NL,jL=IL.useSyncExternalStore,RL=kf.useRef,DL=kf.useEffect,OL=kf.useMemo,LL=kf.useDebugValue;GS.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=RL(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=OL(function(){function l(p){if(!u){if(u=!0,d=p,p=r(p),s!==void 0&&o.hasValue){var y=o.value;if(s(y,p))return h=y}return h=p}if(y=h,PL(d,p))return y;var g=r(p);return s!==void 0&&s(y,g)?(d=p,y):(d=p,h=g)}var u=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,s]);var a=jL(t,i[0],i[1]);return DL(function(){o.hasValue=!0,o.value=a},[a]),LL(a),a};qS.exports=GS;var ML=qS.exports;const VL=Kb(ML),YS={},{useDebugValue:FL}=me,{useSyncExternalStoreWithSelector:UL}=VL;let U1=!1;const $L=t=>t;function BL(t,e=$L,n){(YS?"production":void 0)!=="production"&&n&&!U1&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),U1=!0);const r=UL(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return FL(r),r}const $1=t=>{(YS?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?vL(t):t,n=(r,s)=>BL(e,r,s);return Object.assign(n,e),n},Sf=t=>t?$1(t):$1;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=()=>{};var B1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},WL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},JS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new HL;const m=i<<2|a>>4;if(r.push(m),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qL=function(t){const e=XS(t);return JS.encodeByteArray(e,!0)},Th=function(t){return qL(t).replace(/\./g,"")},ZS=function(t){try{return JS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=()=>GL().__FIREBASE_DEFAULTS__,QL=()=>{if(typeof process>"u"||typeof B1>"u")return;const t=B1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ZS(t[1]);return e&&JSON.parse(e)},Af=()=>{try{return zL()||KL()||QL()||YL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eA=t=>{var e,n;return(n=(e=Af())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tA=t=>{const e=eA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nA=()=>{var t;return(t=Af())===null||t===void 0?void 0:t.config},rA=t=>{var e;return(e=Af())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XL=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Th(JSON.stringify(n)),Th(JSON.stringify(o)),""].join(".")}const rc={};function JL(){const t={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?t.emulator.push(e):t.prod.push(e);return t}function ZL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let z1=!1;function c0(t,e){if(typeof window>"u"||typeof document>"u"||!Ni(window.location.host)||rc[t]===e||rc[t]||z1)return;rc[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=JL().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{z1=!0,o()},m}function d(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=ZL(r),p=n("text"),y=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),b=document.getElementById(g)||document.createElement("a"),v=n("preprendIcon"),T=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const _=m.element;a(_),d(b,g);const I=u();l(T,v),_.append(T,y,b,I),document.body.appendChild(_)}i?(y.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function tM(){var t;const e=(t=Af())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iM(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oM(){return!tM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aM(){try{return typeof indexedDB=="object"}catch{return!1}}function lM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="FirebaseError";class Jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cM,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ou.prototype.create)}}class ou{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?uM(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Jr(s,a,r)}}function uM(t,e){return t.replace(dM,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const dM=/\{\$([^}]+)}/g;function hM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(W1(i)&&W1(o)){if(!fo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function W1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ml(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Vl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fM(t,e){const n=new mM(t,e);return n.subscribe.bind(n)}class mM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pM(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ip),s.error===void 0&&(s.error=ip),s.complete===void 0&&(s.complete=ip);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ip(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class gi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new XL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vM(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yM(t){return t===qi?void 0:t}function vM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const wM={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},_M=Ee.INFO,EM={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},bM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=EM[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class u0{constructor(e){this.name=e,this._logLevel=_M,this._logHandler=bM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const TM=(t,e)=>e.some(n=>t instanceof n);let H1,q1;function kM(){return H1||(H1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SM(){return q1||(q1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iA=new WeakMap,Wg=new WeakMap,oA=new WeakMap,op=new WeakMap,d0=new WeakMap;function AM(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(li(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&iA.set(n,t)}).catch(()=>{}),d0.set(e,t),e}function CM(t){if(Wg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Wg.set(t,e)}let Hg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IM(t){Hg=t(Hg)}function NM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ap(this),e,...n);return oA.set(r,e.sort?e.sort():[e]),li(r)}:SM().includes(t)?function(...e){return t.apply(ap(this),e),li(iA.get(this))}:function(...e){return li(t.apply(ap(this),e))}}function PM(t){return typeof t=="function"?NM(t):(t instanceof IDBTransaction&&CM(t),TM(t,kM())?new Proxy(t,Hg):t)}function li(t){if(t instanceof IDBRequest)return AM(t);if(op.has(t))return op.get(t);const e=PM(t);return e!==t&&(op.set(t,e),d0.set(e,t)),e}const ap=t=>d0.get(t);function jM(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=li(o);return r&&o.addEventListener("upgradeneeded",l=>{r(li(o.result),l.oldVersion,l.newVersion,li(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const RM=["get","getKey","getAll","getAllKeys","count"],DM=["put","add","delete","clear"],lp=new Map;function G1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lp.get(e))return lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=DM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||RM.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return lp.set(e,i),i}IM(t=>({...t,get:(e,n,r)=>G1(e,n)||t.get(e,n,r),has:(e,n)=>!!G1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qg="@firebase/app",K1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new u0("@firebase/app"),MM="@firebase/app-compat",VM="@firebase/analytics-compat",FM="@firebase/analytics",UM="@firebase/app-check-compat",$M="@firebase/app-check",BM="@firebase/auth",zM="@firebase/auth-compat",WM="@firebase/database",HM="@firebase/data-connect",qM="@firebase/database-compat",GM="@firebase/functions",KM="@firebase/functions-compat",QM="@firebase/installations",YM="@firebase/installations-compat",XM="@firebase/messaging",JM="@firebase/messaging-compat",ZM="@firebase/performance",eV="@firebase/performance-compat",tV="@firebase/remote-config",nV="@firebase/remote-config-compat",rV="@firebase/storage",sV="@firebase/storage-compat",iV="@firebase/firestore",oV="@firebase/ai",aV="@firebase/firestore-compat",lV="firebase",cV="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="[DEFAULT]",uV={[qg]:"fire-core",[MM]:"fire-core-compat",[FM]:"fire-analytics",[VM]:"fire-analytics-compat",[$M]:"fire-app-check",[UM]:"fire-app-check-compat",[BM]:"fire-auth",[zM]:"fire-auth-compat",[WM]:"fire-rtdb",[HM]:"fire-data-connect",[qM]:"fire-rtdb-compat",[GM]:"fire-fn",[KM]:"fire-fn-compat",[QM]:"fire-iid",[YM]:"fire-iid-compat",[XM]:"fire-fcm",[JM]:"fire-fcm-compat",[ZM]:"fire-perf",[eV]:"fire-perf-compat",[tV]:"fire-rc",[nV]:"fire-rc-compat",[rV]:"fire-gcs",[sV]:"fire-gcs-compat",[iV]:"fire-fst",[aV]:"fire-fst-compat",[oV]:"fire-vertex","fire-js":"fire-js",[lV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Map,dV=new Map,Kg=new Map;function Q1(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mo(t){const e=t.name;if(Kg.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;Kg.set(e,t);for(const n of kh.values())Q1(n,t);for(const n of dV.values())Q1(n,t);return!0}function Cf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new ou("app","Firebase",hV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=cV;function aA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gg,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ci.create("bad-app-name",{appName:String(s)});if(n||(n=nA()),!n)throw ci.create("no-options");const i=kh.get(s);if(i){if(fo(n,i.options)&&fo(r,i.config))return i;throw ci.create("duplicate-app",{appName:s})}const o=new xM(s);for(const l of Kg.values())o.addComponent(l);const a=new fV(n,r,o);return kh.set(s,a),a}function h0(t=Gg){const e=kh.get(t);if(!e&&t===Gg&&nA())return aA();if(!e)throw ci.create("no-app",{appName:t});return e}function Br(t,e,n){var r;let s=(r=uV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(a.join(" "));return}mo(new gi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="firebase-heartbeat-database",pV=1,Vc="firebase-heartbeat-store";let cp=null;function lA(){return cp||(cp=jM(mV,pV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ci.create("idb-open",{originalErrorMessage:t.message})})),cp}async function gV(t){try{const n=(await lA()).transaction(Vc),r=await n.objectStore(Vc).get(cA(t));return await n.done,r}catch(e){if(e instanceof Jr)xs.warn(e.message);else{const n=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(n.message)}}}async function Y1(t,e){try{const r=(await lA()).transaction(Vc,"readwrite");await r.objectStore(Vc).put(e,cA(t)),await r.done}catch(n){if(n instanceof Jr)xs.warn(n.message);else{const r=ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xs.warn(r.message)}}}function cA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=1024,vV=30;class xV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _V(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=X1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>vV){const o=EV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=X1(),{heartbeatsToSend:r,unsentEntries:s}=wV(this._heartbeatsCache.heartbeats),i=Th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xs.warn(n),""}}}function X1(){return new Date().toISOString().substring(0,10)}function wV(t,e=yV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),J1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),J1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _V{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aM()?lM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Y1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Y1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function J1(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}function EV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){mo(new gi("platform-logger",e=>new OM(e),"PRIVATE")),mo(new gi("heartbeat",e=>new xV(e),"PRIVATE")),Br(qg,K1,t),Br(qg,K1,"esm2017"),Br("fire-js","")}bV("");function f0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function uA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TV=uA,dA=new ou("auth","Firebase",uA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new u0("@firebase/auth");function kV(t,...e){Sh.logLevel<=Ee.WARN&&Sh.warn(`Auth (${ko}): ${t}`,...e)}function jd(t,...e){Sh.logLevel<=Ee.ERROR&&Sh.error(`Auth (${ko}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,...e){throw m0(t,...e)}function zr(t,...e){return m0(t,...e)}function hA(t,e,n){const r=Object.assign(Object.assign({},TV()),{[e]:n});return new ou("auth","Firebase",r).create(e,{appName:t.name})}function hs(t){return hA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function m0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dA.create(t,...e)}function ce(t,e,...n){if(!t)throw m0(e,...n)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jd(e),new Error(e)}function ws(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function SV(){return Z1()==="http:"||Z1()==="https:"}function Z1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SV()||rM()||"connection"in navigator)?navigator.onLine:!0}function CV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=eM()||sM()}get(){return AV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t,e){ws(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PV=new lu(3e4,6e4);function Pi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ts(t,e,n,r,s={}){return mA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=au(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return nM()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ni(t.emulatorConfig.host)&&(u.credentials="include"),fA.fetch()(await pA(t,t.config.apiHost,n,a),u)})}async function mA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},IV),e);try{const s=new RV(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw nd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw nd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw hA(t,d,u);Sr(t,d)}}catch(s){if(s instanceof Jr)throw s;Sr(t,"network-request-failed",{message:String(s)})}}async function cu(t,e,n,r,s={}){const i=await Ts(t,e,n,r,s);return"mfaPendingCredential"in i&&Sr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function pA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?p0(t.config,s):`${t.config.apiScheme}://${s}`;return NV.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function jV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zr(this.auth,"network-request-failed")),PV.get())})}}function nd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=zr(t,e,r);return s.customData._tokenResponse=n,s}function eE(t){return t!==void 0&&t.enterprise!==void 0}class DV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OV(t,e){return Ts(t,"GET","/v2/recaptchaConfig",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(t,e){return Ts(t,"POST","/v1/accounts:delete",e)}async function Ah(t,e){return Ts(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MV(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=g0(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:sc(up(s.auth_time)),issuedAtTime:sc(up(s.iat)),expirationTime:sc(up(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function up(t){return Number(t)*1e3}function g0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{const s=ZS(n);return s?JSON.parse(s):(jd("Failed to decode base64 JWT payload"),null)}catch(s){return jd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function tE(t){const e=g0(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jr&&VV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ma(t,Ah(n,{idToken:r}));ce(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?gA(i.providerUserInfo):[],a=$V(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Yg(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function UV(t){const e=at(t);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $V(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gA(t){return t.map(e=>{var{providerId:n}=e,r=f0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(t,e){const n=await mA(t,{},async()=>{const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await pA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ni(t.emulatorConfig.host)&&(l.credentials="include"),fA.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zV(t,e){return Ts(t,"POST","/v2/accounts:revokeToken",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=tE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await BV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xa;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _r{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=f0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Yg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ma(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MV(this,e)}reload(){return UV(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await Ma(this,LV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,T=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:I,isAnonymous:O,providerData:N,stsTokenManager:C}=n;ce(_&&C,e,"internal-error");const x=xa.fromJSON(this.name,C);ce(typeof _=="string",e,"internal-error"),Ns(h,e.name),Ns(m,e.name),ce(typeof I=="boolean",e,"internal-error"),ce(typeof O=="boolean",e,"internal-error"),Ns(p,e.name),Ns(y,e.name),Ns(g,e.name),Ns(b,e.name),Ns(v,e.name),Ns(T,e.name);const w=new _r({uid:_,auth:e,email:m,emailVerified:I,displayName:h,isAnonymous:O,photoURL:y,phoneNumber:p,tenantId:g,stsTokenManager:x,createdAt:v,lastLoginAt:T});return N&&Array.isArray(N)&&(w.providerData=N.map(k=>Object.assign({},k))),b&&(w._redirectEventId=b),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new xa;s.updateFromServerResponse(n);const i=new _r({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ch(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?gA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new xa;a.updateFromIdToken(r);const l=new _r({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Yg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;function as(t){ws(t instanceof Function,"Expected a class definition");let e=nE.get(t);return e?(ws(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yA.type="NONE";const rE=yA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t,e,n){return`firebase:${t}:${e}:${n}`}class wa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Rd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Rd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ah(this.auth,{idToken:e}).catch(()=>{});return n?_r._fromGetAccountInfoResponse(this.auth,n,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wa(as(rE),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||as(rE);const o=Rd(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const m=await Ah(e,{idToken:d}).catch(()=>{});if(!m)break;h=await _r._fromGetAccountInfoResponse(e,m,d)}else h=_r._fromJSON(e,d);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new wa(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new wa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_A(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bA(e))return"Blackberry";if(TA(e))return"Webos";if(xA(e))return"Safari";if((e.includes("chrome/")||wA(e))&&!e.includes("edge/"))return"Chrome";if(EA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vA(t=cn()){return/firefox\//i.test(t)}function xA(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wA(t=cn()){return/crios\//i.test(t)}function _A(t=cn()){return/iemobile/i.test(t)}function EA(t=cn()){return/android/i.test(t)}function bA(t=cn()){return/blackberry/i.test(t)}function TA(t=cn()){return/webos/i.test(t)}function y0(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WV(t=cn()){var e;return y0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HV(){return iM()&&document.documentMode===10}function kA(t=cn()){return y0(t)||EA(t)||TA(t)||bA(t)||/windows phone/i.test(t)||_A(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e=[]){let n;switch(t){case"Browser":n=sE(cn());break;case"Worker":n=`${sE(cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ko}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e={}){return Ts(t,"GET","/v2/passwordPolicy",Pi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=6;class QV{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:KV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iE(this),this.idTokenSubscription=new iE(this),this.beforeStateQueue=new qV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=as(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ah(this,{idToken:e}),r=await _r._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(hs(this));const n=e?at(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GV(this),n=new QV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ou("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&as(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[as(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&kV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function So(t){return at(t)}class iE{constructor(e){this.auth=e,this.observer=null,this.addObserver=fM(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XV(t){If=t}function AA(t){return If.loadJS(t)}function JV(){return If.recaptchaEnterpriseScript}function ZV(){return If.gapiScript}function e6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class t6{constructor(){this.enterprise=new n6}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class n6{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const r6="recaptcha-enterprise",CA="NO_RECAPTCHA";class s6{constructor(e){this.type=r6,this.auth=So(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{OV(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new DV(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;eE(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(CA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t6().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&eE(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=JV();l.length!==0&&(l+=a),AA(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function oE(t,e,n,r=!1,s=!1){const i=new s6(t);let o;if(s)o=CA;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Xg(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await oE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await oE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t,e){const n=Cf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(fo(i,e??{}))return s;Sr(s,"already-initialized")}return n.initialize({options:e})}function o6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(as);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function a6(t,e,n){const r=So(t);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=IA(e),{host:o,port:a}=l6(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(fo(u,r.config.emulator)&&fo(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ni(o)?(l0(`${i}//${o}${l}`),c0("Auth",!0)):c6()}function IA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function l6(t){const e=IA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:aE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:aE(o)}}}function aE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function c6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}async function u6(t,e){return Ts(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(t,e){return cu(t,"POST","/v1/accounts:signInWithPassword",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(t,e){return cu(t,"POST","/v1/accounts:signInWithEmailLink",Pi(t,e))}async function f6(t,e){return cu(t,"POST","/v1/accounts:signInWithEmailLink",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends v0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Fc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xg(e,n,"signInWithPassword",d6);case"emailLink":return h6(e,{email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xg(e,r,"signUpPassword",u6);case"emailLink":return f6(e,{idToken:n,email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t,e){return cu(t,"POST","/v1/accounts:signInWithIdp",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="http://localhost";class po extends v0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=f0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new po(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _a(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_a(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_a(e,n)}buildRequest(){const e={requestUri:m6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g6(t){const e=Ml(Vl(t)).link,n=e?Ml(Vl(e)).deep_link_id:null,r=Ml(Vl(t)).deep_link_id;return(r?Ml(Vl(r)).link:null)||r||n||e||t}class x0{constructor(e){var n,r,s,i,o,a;const l=Ml(Vl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=p6((s=l.mode)!==null&&s!==void 0?s:null);ce(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=g6(e);try{return new x0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(e,n){return Fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=x0.parseLink(n);return ce(r,"argument-error"),Fc._fromEmailAndCode(e,r.code,r.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends NA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends uu{constructor(){super("facebook.com")}static credential(e){return po._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return po._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends uu{constructor(){super("github.com")}static credential(e){return po._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends uu{constructor(){super("twitter.com")}static credential(e,n){return po._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ws.credential(n,r)}catch{return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com";Ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(t,e){return cu(t,"POST","/v1/accounts:signUp",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await _r._fromIdTokenResponse(e,r,s),o=lE(r);return new go({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=lE(r);return new go({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function lE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends Jr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ih.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ih(e,n,r,s)}}function PA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ih._fromErrorAndOperation(t,i,e,r):i})}async function v6(t,e,n=!1){const r=await Ma(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return go._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x6(t,e,n=!1){const{auth:r}=t;if(zn(r.app))return Promise.reject(hs(r));const s="reauthenticate";try{const i=await Ma(t,PA(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=g0(i.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),go._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Sr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e,n=!1){if(zn(t.app))return Promise.reject(hs(t));const r="signIn",s=await PA(t,r,e),i=await go._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function w6(t,e){return jA(So(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t){const e=So(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _6(t,e,n){if(zn(t.app))return Promise.reject(hs(t));const r=So(t),o=await Xg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y6).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&RA(t),l}),a=await go._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function E6(t,e,n){return zn(t.app)?Promise.reject(hs(t)):w6(at(t),el.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&RA(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(t,e){return Ts(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cE(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=at(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ma(r,b6(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function T6(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function k6(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function S6(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function A6(t){return at(t).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=1e3,I6=10;class OA extends DA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);HV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,I6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},C6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OA.type="LOCAL";const N6=OA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends DA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LA.type="SESSION";const MA=LA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Nf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await P6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=w0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(){return window}function R6(t){Wr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){return typeof Wr().WorkerGlobalScope<"u"&&typeof Wr().importScripts=="function"}async function D6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function L6(){return VA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="firebaseLocalStorageDb",M6=1,Ph="firebaseLocalStorage",UA="fbase_key";class du{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pf(t,e){return t.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function V6(){const t=indexedDB.deleteDatabase(FA);return new du(t).toPromise()}function Jg(){const t=indexedDB.open(FA,M6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ph,{keyPath:UA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ph)?e(r):(r.close(),await V6(),e(await Jg()))})})}async function uE(t,e,n){const r=Pf(t,!0).put({[UA]:e,value:n});return new du(r).toPromise()}async function F6(t,e){const n=Pf(t,!1).get(e),r=await new du(n).toPromise();return r===void 0?null:r.value}function dE(t,e){const n=Pf(t,!0).delete(e);return new du(n).toPromise()}const U6=800,$6=3;class $A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nf._getInstance(L6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await D6(),!this.activeServiceWorker)return;this.sender=new j6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jg();return await uE(e,Nh,"1"),await dE(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>F6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pf(s,!1).getAll();return new du(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$A.type="LOCAL";const B6=$A;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t,e){return e?as(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends v0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _a(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function W6(t){return jA(t.auth,new _0(t),t.bypassAuthState)}function H6(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),x6(n,new _0(t),t.bypassAuthState)}async function q6(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),v6(n,new _0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W6;case"linkViaPopup":case"linkViaRedirect":return q6;case"reauthViaPopup":case"reauthViaRedirect":return H6;default:Sr(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=new lu(2e3,1e4);class da extends BA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,da.currentPopupAction&&da.currentPopupAction.cancel(),da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=w0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G6.get())};e()}}da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="pendingRedirect",Dd=new Map;class Q6 extends BA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dd.get(this.auth._key());if(!e){try{const r=await Y6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y6(t,e){const n=Z6(e),r=J6(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function X6(t,e){Dd.set(t._key(),e)}function J6(t){return as(t._redirectPersistence)}function Z6(t){return Rd(K6,t.config.apiKey,t.name)}async function eF(t,e,n=!1){if(zn(t.app))return Promise.reject(hs(t));const r=So(t),s=z6(r,e),o=await new Q6(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=10*60*1e3;class nF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tF&&this.cachedEventUids.clear(),this.cachedEventUids.has(hE(e))}saveEventToCache(e){this.cachedEventUids.add(hE(e)),this.lastProcessedEventTime=Date.now()}}function hE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sF(t,e={}){return Ts(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oF=/^https?/;async function aF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sF(t);for(const n of e)try{if(lF(n))return}catch{}Sr(t,"unauthorized-domain")}function lF(t){const e=Qg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oF.test(n))return!1;if(iF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=new lu(3e4,6e4);function fE(){const t=Wr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uF(t){return new Promise((e,n)=>{var r,s,i;function o(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),n(zr(t,"network-request-failed"))},timeout:cF.get()})}if(!((s=(r=Wr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Wr().gapi)===null||i===void 0)&&i.load)o();else{const a=e6("iframefcb");return Wr()[a]=()=>{gapi.load?o():n(zr(t,"network-request-failed"))},AA(`${ZV()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Od=null,e})}let Od=null;function dF(t){return Od=Od||uF(t),Od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=new lu(5e3,15e3),fF="__/auth/iframe",mF="emulator/auth/iframe",pF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yF(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?p0(e,mF):`https://${t.config.authDomain}/${fF}`,r={apiKey:e.apiKey,appName:t.name,v:ko},s=gF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${au(r).slice(1)}`}async function vF(t){const e=await dF(t),n=Wr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:yF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=zr(t,"network-request-failed"),a=Wr().setTimeout(()=>{i(o)},hF.get());function l(){Wr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wF=500,_F=600,EF="_blank",bF="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TF(t,e,n,r=wF,s=_F){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xF),{width:r.toString(),height:s.toString(),top:i,left:o}),u=cn().toLowerCase();n&&(a=wA(u)?EF:n),vA(u)&&(e=e||bF,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(WV(u)&&a!=="_self")return kF(e||"",a),new mE(null);const h=window.open(e||"",a,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new mE(h)}function kF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="__/auth/handler",AF="emulator/auth/handler",CF=encodeURIComponent("fac");async function pE(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ko,eventId:s};if(e instanceof NA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof uu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${CF}=${encodeURIComponent(l)}`:"";return`${IF(t)}?${au(a).slice(1)}${u}`}function IF({config:t}){return t.emulator?p0(t,AF):`https://${t.authDomain}/${SF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="webStorageSupport";class NF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MA,this._completeRedirectFn=eF,this._overrideRedirectResult=X6}async _openPopup(e,n,r,s){var i;ws((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await pE(e,n,r,Qg(),s);return TF(e,o,w0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await pE(e,n,r,Qg(),s);return R6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ws(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vF(e),r=new nF(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dp,{type:dp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[dp];o!==void 0&&n(!!o),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kA()||xA()||y0()}}const PF=NF;var gE="@firebase/auth",yE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DF(t){mo(new gi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SA(t)},u=new YV(r,s,i,l);return o6(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mo(new gi("auth-internal",e=>{const n=So(e.getProvider("auth").getImmediate());return(r=>new jF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(gE,yE,RF(t)),Br(gE,yE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=5*60,LF=rA("authIdTokenMaxAge")||OF;let vE=null;const MF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LF)return;const s=n==null?void 0:n.token;vE!==s&&(vE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function VF(t=h0()){const e=Cf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i6(t,{popupRedirectResolver:PF,persistence:[B6,N6,MA]}),r=rA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=MF(i.toString());k6(n,o,()=>o(n.currentUser)),T6(n,a=>o(a))}}const s=eA("auth");return s&&a6(n,`http://${s}`),n}function FF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=zr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",FF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DF("Browser");var xE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,WA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function w(){}w.prototype=x.prototype,C.D=x.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(k,j,P){for(var S=Array(arguments.length-2),M=2;M<arguments.length;M++)S[M-2]=arguments[M];return x.prototype[j].apply(k,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,x,w){w||(w=0);var k=Array(16);if(typeof x=="string")for(var j=0;16>j;++j)k[j]=x.charCodeAt(w++)|x.charCodeAt(w++)<<8|x.charCodeAt(w++)<<16|x.charCodeAt(w++)<<24;else for(j=0;16>j;++j)k[j]=x[w++]|x[w++]<<8|x[w++]<<16|x[w++]<<24;x=C.g[0],w=C.g[1],j=C.g[2];var P=C.g[3],S=x+(P^w&(j^P))+k[0]+3614090360&4294967295;x=w+(S<<7&4294967295|S>>>25),S=P+(j^x&(w^j))+k[1]+3905402710&4294967295,P=x+(S<<12&4294967295|S>>>20),S=j+(w^P&(x^w))+k[2]+606105819&4294967295,j=P+(S<<17&4294967295|S>>>15),S=w+(x^j&(P^x))+k[3]+3250441966&4294967295,w=j+(S<<22&4294967295|S>>>10),S=x+(P^w&(j^P))+k[4]+4118548399&4294967295,x=w+(S<<7&4294967295|S>>>25),S=P+(j^x&(w^j))+k[5]+1200080426&4294967295,P=x+(S<<12&4294967295|S>>>20),S=j+(w^P&(x^w))+k[6]+2821735955&4294967295,j=P+(S<<17&4294967295|S>>>15),S=w+(x^j&(P^x))+k[7]+4249261313&4294967295,w=j+(S<<22&4294967295|S>>>10),S=x+(P^w&(j^P))+k[8]+1770035416&4294967295,x=w+(S<<7&4294967295|S>>>25),S=P+(j^x&(w^j))+k[9]+2336552879&4294967295,P=x+(S<<12&4294967295|S>>>20),S=j+(w^P&(x^w))+k[10]+4294925233&4294967295,j=P+(S<<17&4294967295|S>>>15),S=w+(x^j&(P^x))+k[11]+2304563134&4294967295,w=j+(S<<22&4294967295|S>>>10),S=x+(P^w&(j^P))+k[12]+1804603682&4294967295,x=w+(S<<7&4294967295|S>>>25),S=P+(j^x&(w^j))+k[13]+4254626195&4294967295,P=x+(S<<12&4294967295|S>>>20),S=j+(w^P&(x^w))+k[14]+2792965006&4294967295,j=P+(S<<17&4294967295|S>>>15),S=w+(x^j&(P^x))+k[15]+1236535329&4294967295,w=j+(S<<22&4294967295|S>>>10),S=x+(j^P&(w^j))+k[1]+4129170786&4294967295,x=w+(S<<5&4294967295|S>>>27),S=P+(w^j&(x^w))+k[6]+3225465664&4294967295,P=x+(S<<9&4294967295|S>>>23),S=j+(x^w&(P^x))+k[11]+643717713&4294967295,j=P+(S<<14&4294967295|S>>>18),S=w+(P^x&(j^P))+k[0]+3921069994&4294967295,w=j+(S<<20&4294967295|S>>>12),S=x+(j^P&(w^j))+k[5]+3593408605&4294967295,x=w+(S<<5&4294967295|S>>>27),S=P+(w^j&(x^w))+k[10]+38016083&4294967295,P=x+(S<<9&4294967295|S>>>23),S=j+(x^w&(P^x))+k[15]+3634488961&4294967295,j=P+(S<<14&4294967295|S>>>18),S=w+(P^x&(j^P))+k[4]+3889429448&4294967295,w=j+(S<<20&4294967295|S>>>12),S=x+(j^P&(w^j))+k[9]+568446438&4294967295,x=w+(S<<5&4294967295|S>>>27),S=P+(w^j&(x^w))+k[14]+3275163606&4294967295,P=x+(S<<9&4294967295|S>>>23),S=j+(x^w&(P^x))+k[3]+4107603335&4294967295,j=P+(S<<14&4294967295|S>>>18),S=w+(P^x&(j^P))+k[8]+1163531501&4294967295,w=j+(S<<20&4294967295|S>>>12),S=x+(j^P&(w^j))+k[13]+2850285829&4294967295,x=w+(S<<5&4294967295|S>>>27),S=P+(w^j&(x^w))+k[2]+4243563512&4294967295,P=x+(S<<9&4294967295|S>>>23),S=j+(x^w&(P^x))+k[7]+1735328473&4294967295,j=P+(S<<14&4294967295|S>>>18),S=w+(P^x&(j^P))+k[12]+2368359562&4294967295,w=j+(S<<20&4294967295|S>>>12),S=x+(w^j^P)+k[5]+4294588738&4294967295,x=w+(S<<4&4294967295|S>>>28),S=P+(x^w^j)+k[8]+2272392833&4294967295,P=x+(S<<11&4294967295|S>>>21),S=j+(P^x^w)+k[11]+1839030562&4294967295,j=P+(S<<16&4294967295|S>>>16),S=w+(j^P^x)+k[14]+4259657740&4294967295,w=j+(S<<23&4294967295|S>>>9),S=x+(w^j^P)+k[1]+2763975236&4294967295,x=w+(S<<4&4294967295|S>>>28),S=P+(x^w^j)+k[4]+1272893353&4294967295,P=x+(S<<11&4294967295|S>>>21),S=j+(P^x^w)+k[7]+4139469664&4294967295,j=P+(S<<16&4294967295|S>>>16),S=w+(j^P^x)+k[10]+3200236656&4294967295,w=j+(S<<23&4294967295|S>>>9),S=x+(w^j^P)+k[13]+681279174&4294967295,x=w+(S<<4&4294967295|S>>>28),S=P+(x^w^j)+k[0]+3936430074&4294967295,P=x+(S<<11&4294967295|S>>>21),S=j+(P^x^w)+k[3]+3572445317&4294967295,j=P+(S<<16&4294967295|S>>>16),S=w+(j^P^x)+k[6]+76029189&4294967295,w=j+(S<<23&4294967295|S>>>9),S=x+(w^j^P)+k[9]+3654602809&4294967295,x=w+(S<<4&4294967295|S>>>28),S=P+(x^w^j)+k[12]+3873151461&4294967295,P=x+(S<<11&4294967295|S>>>21),S=j+(P^x^w)+k[15]+530742520&4294967295,j=P+(S<<16&4294967295|S>>>16),S=w+(j^P^x)+k[2]+3299628645&4294967295,w=j+(S<<23&4294967295|S>>>9),S=x+(j^(w|~P))+k[0]+4096336452&4294967295,x=w+(S<<6&4294967295|S>>>26),S=P+(w^(x|~j))+k[7]+1126891415&4294967295,P=x+(S<<10&4294967295|S>>>22),S=j+(x^(P|~w))+k[14]+2878612391&4294967295,j=P+(S<<15&4294967295|S>>>17),S=w+(P^(j|~x))+k[5]+4237533241&4294967295,w=j+(S<<21&4294967295|S>>>11),S=x+(j^(w|~P))+k[12]+1700485571&4294967295,x=w+(S<<6&4294967295|S>>>26),S=P+(w^(x|~j))+k[3]+2399980690&4294967295,P=x+(S<<10&4294967295|S>>>22),S=j+(x^(P|~w))+k[10]+4293915773&4294967295,j=P+(S<<15&4294967295|S>>>17),S=w+(P^(j|~x))+k[1]+2240044497&4294967295,w=j+(S<<21&4294967295|S>>>11),S=x+(j^(w|~P))+k[8]+1873313359&4294967295,x=w+(S<<6&4294967295|S>>>26),S=P+(w^(x|~j))+k[15]+4264355552&4294967295,P=x+(S<<10&4294967295|S>>>22),S=j+(x^(P|~w))+k[6]+2734768916&4294967295,j=P+(S<<15&4294967295|S>>>17),S=w+(P^(j|~x))+k[13]+1309151649&4294967295,w=j+(S<<21&4294967295|S>>>11),S=x+(j^(w|~P))+k[4]+4149444226&4294967295,x=w+(S<<6&4294967295|S>>>26),S=P+(w^(x|~j))+k[11]+3174756917&4294967295,P=x+(S<<10&4294967295|S>>>22),S=j+(x^(P|~w))+k[2]+718787259&4294967295,j=P+(S<<15&4294967295|S>>>17),S=w+(P^(j|~x))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(j+(S<<21&4294967295|S>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+P&4294967295}r.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var w=x-this.blockSize,k=this.B,j=this.h,P=0;P<x;){if(j==0)for(;P<=w;)s(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<x;)if(k[j++]=C.charCodeAt(P++),j==this.blockSize){s(this,k),j=0;break}}else for(;P<x;)if(k[j++]=C[P++],j==this.blockSize){s(this,k),j=0;break}}this.h=j,this.o+=x},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var w=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=w&255,w/=256;for(this.u(C),C=Array(16),x=w=0;4>x;++x)for(var k=0;32>k;k+=8)C[w++]=this.g[x]>>>k&255;return C};function i(C,x){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=x(C)}function o(C,x){this.h=x;for(var w=[],k=!0,j=C.length-1;0<=j;j--){var P=C[j]|0;k&&P==x||(w[j]=P,k=!1)}this.g=w}var a={};function l(C){return-128<=C&&128>C?i(C,function(x){return new o([x|0],0>x?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return b(u(-C));for(var x=[],w=1,k=0;C>=w;k++)x[k]=C/w|0,w*=4294967296;return new o(x,0)}function d(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return b(d(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(x,8)),k=h,j=0;j<C.length;j+=8){var P=Math.min(8,C.length-j),S=parseInt(C.substring(j,j+P),x);8>P?(P=u(Math.pow(x,P)),k=k.j(P).add(u(S))):(k=k.j(w),k=k.add(u(S)))}return k}var h=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-b(this).m();for(var C=0,x=1,w=0;w<this.g.length;w++){var k=this.i(w);C+=(0<=k?k:4294967296+k)*x,x*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(g(this))return"-"+b(this).toString(C);for(var x=u(Math.pow(C,6)),w=this,k="";;){var j=I(w,x).g;w=v(w,j.j(x));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=j,y(w))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function g(C){return C.h==-1}t.l=function(C){return C=v(this,C),g(C)?-1:y(C)?0:1};function b(C){for(var x=C.g.length,w=[],k=0;k<x;k++)w[k]=~C.g[k];return new o(w,~C.h).add(m)}t.abs=function(){return g(this)?b(this):this},t.add=function(C){for(var x=Math.max(this.g.length,C.g.length),w=[],k=0,j=0;j<=x;j++){var P=k+(this.i(j)&65535)+(C.i(j)&65535),S=(P>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);k=S>>>16,P&=65535,S&=65535,w[j]=S<<16|P}return new o(w,w[w.length-1]&-2147483648?-1:0)};function v(C,x){return C.add(b(x))}t.j=function(C){if(y(this)||y(C))return h;if(g(this))return g(C)?b(this).j(b(C)):b(b(this).j(C));if(g(C))return b(this.j(b(C)));if(0>this.l(p)&&0>C.l(p))return u(this.m()*C.m());for(var x=this.g.length+C.g.length,w=[],k=0;k<2*x;k++)w[k]=0;for(k=0;k<this.g.length;k++)for(var j=0;j<C.g.length;j++){var P=this.i(k)>>>16,S=this.i(k)&65535,M=C.i(j)>>>16,B=C.i(j)&65535;w[2*k+2*j]+=S*B,T(w,2*k+2*j),w[2*k+2*j+1]+=P*B,T(w,2*k+2*j+1),w[2*k+2*j+1]+=S*M,T(w,2*k+2*j+1),w[2*k+2*j+2]+=P*M,T(w,2*k+2*j+2)}for(k=0;k<x;k++)w[k]=w[2*k+1]<<16|w[2*k];for(k=x;k<2*x;k++)w[k]=0;return new o(w,0)};function T(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function _(C,x){this.g=C,this.h=x}function I(C,x){if(y(x))throw Error("division by zero");if(y(C))return new _(h,h);if(g(C))return x=I(b(C),x),new _(b(x.g),b(x.h));if(g(x))return x=I(C,b(x)),new _(b(x.g),x.h);if(30<C.g.length){if(g(C)||g(x))throw Error("slowDivide_ only works with positive integers.");for(var w=m,k=x;0>=k.l(C);)w=O(w),k=O(k);var j=N(w,1),P=N(k,1);for(k=N(k,2),w=N(w,2);!y(k);){var S=P.add(k);0>=S.l(C)&&(j=j.add(w),P=S),k=N(k,1),w=N(w,1)}return x=v(C,j.j(x)),new _(j,x)}for(j=h;0<=C.l(x);){for(w=Math.max(1,Math.floor(C.m()/x.m())),k=Math.ceil(Math.log(w)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=u(w),S=P.j(x);g(S)||0<S.l(C);)w-=k,P=u(w),S=P.j(x);y(P)&&(P=m),j=j.add(P),C=v(C,S)}return new _(j,C)}t.A=function(C){return I(this,C).h},t.and=function(C){for(var x=Math.max(this.g.length,C.g.length),w=[],k=0;k<x;k++)w[k]=this.i(k)&C.i(k);return new o(w,this.h&C.h)},t.or=function(C){for(var x=Math.max(this.g.length,C.g.length),w=[],k=0;k<x;k++)w[k]=this.i(k)|C.i(k);return new o(w,this.h|C.h)},t.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),w=[],k=0;k<x;k++)w[k]=this.i(k)^C.i(k);return new o(w,this.h^C.h)};function O(C){for(var x=C.g.length+1,w=[],k=0;k<x;k++)w[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(w,C.h)}function N(C,x){var w=x>>5;x%=32;for(var k=C.g.length-w,j=[],P=0;P<k;P++)j[P]=0<x?C.i(P+w)>>>x|C.i(P+w+1)<<32-x:C.i(P+w);return new o(j,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,WA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,ui=o}).apply(typeof xE<"u"?xE:typeof self<"u"?self:typeof window<"u"?window:{});var rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HA,Fl,qA,Ld,Zg,GA,KA,QA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,A){return f==Array.prototype||f==Object.prototype||(f[E]=A.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof rd=="object"&&rd];for(var E=0;E<f.length;++E){var A=f[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function s(f,E){if(E)e:{var A=r;f=f.split(".");for(var L=0;L<f.length-1;L++){var W=f[L];if(!(W in A))break e;A=A[W]}f=f[f.length-1],L=A[f],E=E(L),E!=L&&E!=null&&e(A,f,{configurable:!0,writable:!0,value:E})}}function i(f,E){f instanceof String&&(f+="");var A=0,L=!1,W={next:function(){if(!L&&A<f.length){var q=A++;return{value:E(q,f[q]),done:!1}}return L=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(f){return f||function(){return i(this,function(E,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function u(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function d(f,E,A){return f.call.apply(f.bind,arguments)}function h(f,E,A){if(!f)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,L),f.apply(E,W)}}return function(){return f.apply(E,arguments)}}function m(f,E,A){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function p(f,E){var A=Array.prototype.slice.call(arguments,1);return function(){var L=A.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function y(f,E){function A(){}A.prototype=E.prototype,f.aa=E.prototype,f.prototype=new A,f.prototype.constructor=f,f.Qb=function(L,W,q){for(var ne=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ne[$e-2]=arguments[$e];return E.prototype[W].apply(L,ne)}}function g(f){const E=f.length;if(0<E){const A=Array(E);for(let L=0;L<E;L++)A[L]=f[L];return A}return[]}function b(f,E){for(let A=1;A<arguments.length;A++){const L=arguments[A];if(l(L)){const W=f.length||0,q=L.length||0;f.length=W+q;for(let ne=0;ne<q;ne++)f[W+ne]=L[ne]}else f.push(L)}}class v{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function T(f){return/^[\s\xa0]*$/.test(f)}function _(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function I(f){return I[" "](f),f}I[" "]=function(){};var O=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function N(f,E,A){for(const L in f)E.call(A,f[L],L,f)}function C(f,E){for(const A in f)E.call(void 0,f[A],A,f)}function x(f){const E={};for(const A in f)E[A]=f[A];return E}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,E){let A,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(A in L)f[A]=L[A];for(let q=0;q<w.length;q++)A=w[q],Object.prototype.hasOwnProperty.call(L,A)&&(f[A]=L[A])}}function j(f){var E=1;f=f.split(":");const A=[];for(;0<E&&f.length;)A.push(f.shift()),E--;return f.length&&A.push(f.join(":")),A}function P(f){a.setTimeout(()=>{throw f},0)}function S(){var f=U;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class M{constructor(){this.h=this.g=null}add(E,A){const L=B.get();L.set(E,A),this.h?this.h.next=L:this.g=L,this.h=L}}var B=new v(()=>new D,f=>f.reset());class D{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let R,$=!1,U=new M,z=()=>{const f=a.Promise.resolve(void 0);R=()=>{f.then(J)}};var J=()=>{for(var f;f=S();){try{f.h.call(f.g)}catch(A){P(A)}var E=B;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}$=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const A=()=>{};a.addEventListener("test",A,E),a.removeEventListener("test",A,E)}catch{}return f}();function H(f,E){if(Z.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var A=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(O){e:{try{I(E.nodeName);var W=!0;break e}catch{}W=!1}W||(E=null)}}else A=="mouseover"?E=f.fromElement:A=="mouseout"&&(E=f.toElement);this.relatedTarget=E,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:se[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&H.aa.h.call(this)}}y(H,Z);var se={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),ye=0;function fe(f,E,A,L,W){this.listener=f,this.proxy=null,this.src=E,this.type=A,this.capture=!!L,this.ha=W,this.key=++ye,this.da=this.fa=!1}function ke(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Se(f){this.src=f,this.g={},this.h=0}Se.prototype.add=function(f,E,A,L,W){var q=f.toString();f=this.g[q],f||(f=this.g[q]=[],this.h++);var ne=un(f,E,L,W);return-1<ne?(E=f[ne],A||(E.fa=!1)):(E=new fe(E,this.src,q,!!L,W),E.fa=A,f.push(E)),E};function Ue(f,E){var A=E.type;if(A in f.g){var L=f.g[A],W=Array.prototype.indexOf.call(L,E,void 0),q;(q=0<=W)&&Array.prototype.splice.call(L,W,1),q&&(ke(E),f.g[A].length==0&&(delete f.g[A],f.h--))}}function un(f,E,A,L){for(var W=0;W<f.length;++W){var q=f[W];if(!q.da&&q.listener==E&&q.capture==!!A&&q.ha==L)return W}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),De={};function tt(f,E,A,L,W){if(Array.isArray(E)){for(var q=0;q<E.length;q++)tt(f,E[q],A,L,W);return null}return A=ze(A),f&&f[he]?f.K(E,A,u(L)?!!L.capture:!1,W):Ae(f,E,A,!1,L,W)}function Ae(f,E,A,L,W,q){if(!E)throw Error("Invalid event type");var ne=u(W)?!!W.capture:!!W,$e=Be(f);if($e||(f[Ft]=$e=new Se(f)),A=$e.add(E,A,L,ne,q),A.proxy)return A;if(L=Ie(),A.proxy=L,L.src=f,L.listener=A,f.addEventListener)Q||(W=ne),W===void 0&&(W=!1),f.addEventListener(E.toString(),L,W);else if(f.attachEvent)f.attachEvent(Ge(E.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Ie(){function f(A){return E.call(f.src,f.listener,A)}const E=Ut;return f}function ct(f,E,A,L,W){if(Array.isArray(E))for(var q=0;q<E.length;q++)ct(f,E[q],A,L,W);else L=u(L)?!!L.capture:!!L,A=ze(A),f&&f[he]?(f=f.i,E=String(E).toString(),E in f.g&&(q=f.g[E],A=un(q,A,L,W),-1<A&&(ke(q[A]),Array.prototype.splice.call(q,A,1),q.length==0&&(delete f.g[E],f.h--)))):f&&(f=Be(f))&&(E=f.g[E.toString()],f=-1,E&&(f=un(E,A,L,W)),(A=-1<f?E[f]:null)&&pt(A))}function pt(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[he])Ue(E.i,f);else{var A=f.type,L=f.proxy;E.removeEventListener?E.removeEventListener(A,L,f.capture):E.detachEvent?E.detachEvent(Ge(A),L):E.addListener&&E.removeListener&&E.removeListener(L),(A=Be(E))?(Ue(A,f),A.h==0&&(A.src=null,E[Ft]=null)):ke(f)}}}function Ge(f){return f in De?De[f]:De[f]="on"+f}function Ut(f,E){if(f.da)f=!0;else{E=new H(E,this);var A=f.listener,L=f.ha||f.src;f.fa&&pt(f),f=A.call(L,E)}return f}function Be(f){return f=f[Ft],f instanceof Se?f:null}var je="__closure_events_fn_"+(1e9*Math.random()>>>0);function ze(f){return typeof f=="function"?f:(f[je]||(f[je]=function(E){return f.handleEvent(E)}),f[je])}function Ve(){G.call(this),this.i=new Se(this),this.M=this,this.F=null}y(Ve,G),Ve.prototype[he]=!0,Ve.prototype.removeEventListener=function(f,E,A,L){ct(this,f,E,A,L)};function nt(f,E){var A,L=f.F;if(L)for(A=[];L;L=L.F)A.push(L);if(f=f.M,L=E.type||E,typeof E=="string")E=new Z(E,f);else if(E instanceof Z)E.target=E.target||f;else{var W=E;E=new Z(L,f),k(E,W)}if(W=!0,A)for(var q=A.length-1;0<=q;q--){var ne=E.g=A[q];W=K(ne,L,!0,E)&&W}if(ne=E.g=f,W=K(ne,L,!0,E)&&W,W=K(ne,L,!1,E)&&W,A)for(q=0;q<A.length;q++)ne=E.g=A[q],W=K(ne,L,!1,E)&&W}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var A=f.g[E],L=0;L<A.length;L++)ke(A[L]);delete f.g[E],f.h--}}this.F=null},Ve.prototype.K=function(f,E,A,L){return this.i.add(String(f),E,!1,A,L)},Ve.prototype.L=function(f,E,A,L){return this.i.add(String(f),E,!0,A,L)};function K(f,E,A,L){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var W=!0,q=0;q<E.length;++q){var ne=E[q];if(ne&&!ne.da&&ne.capture==A){var $e=ne.listener,$t=ne.ha||ne.src;ne.fa&&Ue(f.i,ne),W=$e.call($t,L)!==!1&&W}}return W&&!L.defaultPrevented}function _e(f,E,A){if(typeof f=="function")A&&(f=m(f,A));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(f,E||0)}function Ne(f){f.g=_e(()=>{f.g=null,f.i&&(f.i=!1,Ne(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class Ke extends G{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(f){G.call(this),this.h=f,this.g={}}y(Fe,G);var gt=[];function Oe(f){N(f.g,function(E,A){this.g.hasOwnProperty(A)&&pt(E)},f),f.g={}}Fe.prototype.N=function(){Fe.aa.N.call(this),Oe(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yt=a.JSON.stringify,Oi=a.JSON.parse,On=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Qt(){}Qt.prototype.h=null;function Ln(f){return f.h||(f.h=f.i())}function Mn(){}var Ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dn(){Z.call(this,"d")}y(dn,Z);function _n(){Z.call(this,"c")}y(_n,Z);var En={},ks=null;function Li(){return ks=ks||new Ve}En.La="serverreachability";function Nr(f){Z.call(this,En.La,f)}y(Nr,Z);function Vn(f){const E=Li();nt(E,new Nr(E))}En.STAT_EVENT="statevent";function xx(f,E){Z.call(this,En.STAT_EVENT,f),this.stat=E}y(xx,Z);function hn(f){const E=Li();nt(E,new xx(E,f))}En.Ma="timingevent";function wx(f,E){Z.call(this,En.Ma,f),this.size=E}y(wx,Z);function ll(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},E)}function cl(){this.g=!0}cl.prototype.xa=function(){this.g=!1};function BN(f,E,A,L,W,q){f.info(function(){if(f.g)if(q)for(var ne="",$e=q.split("&"),$t=0;$t<$e.length;$t++){var Re=$e[$t].split("=");if(1<Re.length){var Yt=Re[0];Re=Re[1];var Xt=Yt.split("_");ne=2<=Xt.length&&Xt[1]=="type"?ne+(Yt+"="+Re+"&"):ne+(Yt+"=redacted&")}}else ne=null;else ne=q;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+E+`
`+A+`
`+ne})}function zN(f,E,A,L,W,q,ne){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+E+`
`+A+`
`+q+" "+ne})}function jo(f,E,A,L){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+HN(f,A)+(L?" "+L:"")})}function WN(f,E){f.info(function(){return"TIMEOUT: "+E})}cl.prototype.info=function(){};function HN(f,E){if(!f.g)return E;if(!E)return null;try{var A=JSON.parse(E);if(A){for(f=0;f<A.length;f++)if(Array.isArray(A[f])){var L=A[f];if(!(2>L.length)){var W=L[1];if(Array.isArray(W)&&!(1>W.length)){var q=W[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ne=1;ne<W.length;ne++)W[ne]=""}}}}return yt(A)}catch{return E}}var _u={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_x={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},am;function Eu(){}y(Eu,Qt),Eu.prototype.g=function(){return new XMLHttpRequest},Eu.prototype.i=function(){return{}},am=new Eu;function Ss(f,E,A,L){this.j=f,this.i=E,this.l=A,this.R=L||1,this.U=new Fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ex}function Ex(){this.i=null,this.g="",this.h=!1}var bx={},lm={};function cm(f,E,A){f.L=1,f.v=Su(Zr(E)),f.m=A,f.P=!0,Tx(f,null)}function Tx(f,E){f.F=Date.now(),bu(f),f.A=Zr(f.v);var A=f.A,L=f.R;Array.isArray(L)||(L=[String(L)]),Vx(A.i,"t",L),f.C=0,A=f.j.J,f.h=new Ex,f.g=nw(f.j,A?E:null,!f.m),0<f.O&&(f.M=new Ke(m(f.Y,f,f.g),f.O)),E=f.U,A=f.g,L=f.ca;var W="readystatechange";Array.isArray(W)||(W&&(gt[0]=W.toString()),W=gt);for(var q=0;q<W.length;q++){var ne=tt(A,W[q],L||E.handleEvent,!1,E.h||E);if(!ne)break;E.g[ne.key]=ne}E=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),Vn(),BN(f.i,f.u,f.A,f.l,f.R,f.m)}Ss.prototype.ca=function(f){f=f.target;const E=this.M;E&&es(f)==3?E.j():this.Y(f)},Ss.prototype.Y=function(f){try{if(f==this.g)e:{const Xt=es(this.g);var E=this.g.Ba();const Oo=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Hx(this.g)))){this.J||Xt!=4||E==7||(E==8||0>=Oo?Vn(3):Vn(2)),um(this);var A=this.g.Z();this.X=A;t:if(kx(this)){var L=Hx(this.g);f="";var W=L.length,q=es(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),ul(this);var ne="";break t}this.h.i=new a.TextDecoder}for(E=0;E<W;E++)this.h.h=!0,f+=this.h.i.decode(L[E],{stream:!(q&&E==W-1)});L.length=0,this.h.g+=f,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=A==200,zN(this.i,this.u,this.A,this.l,this.R,Xt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,$t=this.g;if(($e=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T($e)){var Re=$e;break t}}Re=null}if(A=Re)jo(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dm(this,A);else{this.o=!1,this.s=3,hn(12),Mi(this),ul(this);break e}}if(this.P){A=!0;let fr;for(;!this.J&&this.C<ne.length;)if(fr=qN(this,ne),fr==lm){Xt==4&&(this.s=4,hn(14),A=!1),jo(this.i,this.l,null,"[Incomplete Response]");break}else if(fr==bx){this.s=4,hn(15),jo(this.i,this.l,ne,"[Invalid Chunk]"),A=!1;break}else jo(this.i,this.l,fr,null),dm(this,fr);if(kx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||ne.length!=0||this.h.h||(this.s=1,hn(16),A=!1),this.o=this.o&&A,!A)jo(this.i,this.l,ne,"[Invalid Chunked Response]"),Mi(this),ul(this);else if(0<ne.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),ym(Yt),Yt.M=!0,hn(11))}}else jo(this.i,this.l,ne,null),dm(this,ne);Xt==4&&Mi(this),this.o&&!this.J&&(Xt==4?Jx(this.j,this):(this.o=!1,bu(this)))}else cP(this.g),A==400&&0<ne.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),Mi(this),ul(this)}}}catch{}finally{}};function kx(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function qN(f,E){var A=f.C,L=E.indexOf(`
`,A);return L==-1?lm:(A=Number(E.substring(A,L)),isNaN(A)?bx:(L+=1,L+A>E.length?lm:(E=E.slice(L,L+A),f.C=L+A,E)))}Ss.prototype.cancel=function(){this.J=!0,Mi(this)};function bu(f){f.S=Date.now()+f.I,Sx(f,f.I)}function Sx(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ll(m(f.ba,f),E)}function um(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Ss.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(WN(this.i,this.A),this.L!=2&&(Vn(),hn(17)),Mi(this),this.s=2,ul(this)):Sx(this,this.S-f)};function ul(f){f.j.G==0||f.J||Jx(f.j,f)}function Mi(f){um(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,Oe(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function dm(f,E){try{var A=f.j;if(A.G!=0&&(A.g==f||hm(A.h,f))){if(!f.K&&hm(A.h,f)&&A.G==3){try{var L=A.Da.g.parse(E)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<f.F)ju(A),Nu(A);else break e;gm(A),hn(18)}}else A.za=W[1],0<A.za-A.T&&37500>W[2]&&A.F&&A.v==0&&!A.C&&(A.C=ll(m(A.Za,A),6e3));if(1>=Ix(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Fi(A,11)}else if((f.K||A.g==f)&&ju(A),!T(E))for(W=A.Da.g.parse(E),E=0;E<W.length;E++){let Re=W[E];if(A.T=Re[0],Re=Re[1],A.G==2)if(Re[0]=="c"){A.K=Re[1],A.ia=Re[2];const Yt=Re[3];Yt!=null&&(A.la=Yt,A.j.info("VER="+A.la));const Xt=Re[4];Xt!=null&&(A.Aa=Xt,A.j.info("SVER="+A.Aa));const Oo=Re[5];Oo!=null&&typeof Oo=="number"&&0<Oo&&(L=1.5*Oo,A.L=L,A.j.info("backChannelRequestTimeoutMs_="+L)),L=A;const fr=f.g;if(fr){const Du=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Du){var q=L.h;q.g||Du.indexOf("spdy")==-1&&Du.indexOf("quic")==-1&&Du.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(fm(q,q.h),q.h=null))}if(L.D){const vm=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;vm&&(L.ya=vm,Qe(L.I,L.D,vm))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-f.F,A.j.info("Handshake RTT: "+A.R+"ms")),L=A;var ne=f;if(L.qa=tw(L,L.J?L.ia:null,L.W),ne.K){Nx(L.h,ne);var $e=ne,$t=L.L;$t&&($e.I=$t),$e.B&&(um($e),bu($e)),L.g=ne}else Yx(L);0<A.i.length&&Pu(A)}else Re[0]!="stop"&&Re[0]!="close"||Fi(A,7);else A.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Fi(A,7):pm(A):Re[0]!="noop"&&A.l&&A.l.ta(Re),A.v=0)}}Vn(4)}catch{}}var GN=class{constructor(f,E){this.g=f,this.map=E}};function Ax(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cx(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ix(f){return f.h?1:f.g?f.g.size:0}function hm(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function fm(f,E){f.g?f.g.add(E):f.h=E}function Nx(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}Ax.prototype.cancel=function(){if(this.i=Px(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Px(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const A of f.g.values())E=E.concat(A.D);return E}return g(f.i)}function KN(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var E=[],A=f.length,L=0;L<A;L++)E.push(f[L]);return E}E=[],A=0;for(L in f)E[A++]=f[L];return E}function QN(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var E=[];f=f.length;for(var A=0;A<f;A++)E.push(A);return E}E=[],A=0;for(const L in f)E[A++]=L;return E}}}function jx(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var A=QN(f),L=KN(f),W=L.length,q=0;q<W;q++)E.call(void 0,L[q],A&&A[q],f)}var Rx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YN(f,E){if(f){f=f.split("&");for(var A=0;A<f.length;A++){var L=f[A].indexOf("="),W=null;if(0<=L){var q=f[A].substring(0,L);W=f[A].substring(L+1)}else q=f[A];E(q,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Vi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Vi){this.h=f.h,Tu(this,f.j),this.o=f.o,this.g=f.g,ku(this,f.s),this.l=f.l;var E=f.i,A=new fl;A.i=E.i,E.g&&(A.g=new Map(E.g),A.h=E.h),Dx(this,A),this.m=f.m}else f&&(E=String(f).match(Rx))?(this.h=!1,Tu(this,E[1]||"",!0),this.o=dl(E[2]||""),this.g=dl(E[3]||"",!0),ku(this,E[4]),this.l=dl(E[5]||"",!0),Dx(this,E[6]||"",!0),this.m=dl(E[7]||"")):(this.h=!1,this.i=new fl(null,this.h))}Vi.prototype.toString=function(){var f=[],E=this.j;E&&f.push(hl(E,Ox,!0),":");var A=this.g;return(A||E=="file")&&(f.push("//"),(E=this.o)&&f.push(hl(E,Ox,!0),"@"),f.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&f.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(hl(A,A.charAt(0)=="/"?ZN:JN,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",hl(A,tP)),f.join("")};function Zr(f){return new Vi(f)}function Tu(f,E,A){f.j=A?dl(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function ku(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function Dx(f,E,A){E instanceof fl?(f.i=E,nP(f.i,f.h)):(A||(E=hl(E,eP)),f.i=new fl(E,f.h))}function Qe(f,E,A){f.i.set(E,A)}function Su(f){return Qe(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function dl(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function hl(f,E,A){return typeof f=="string"?(f=encodeURI(f).replace(E,XN),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function XN(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Ox=/[#\/\?@]/g,JN=/[#\?:]/g,ZN=/[#\?]/g,eP=/[#\?@]/g,tP=/#/g;function fl(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function As(f){f.g||(f.g=new Map,f.h=0,f.i&&YN(f.i,function(E,A){f.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}t=fl.prototype,t.add=function(f,E){As(this),this.i=null,f=Ro(this,f);var A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(E),this.h+=1,this};function Lx(f,E){As(f),E=Ro(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function Mx(f,E){return As(f),E=Ro(f,E),f.g.has(E)}t.forEach=function(f,E){As(this),this.g.forEach(function(A,L){A.forEach(function(W){f.call(E,W,L,this)},this)},this)},t.na=function(){As(this);const f=Array.from(this.g.values()),E=Array.from(this.g.keys()),A=[];for(let L=0;L<E.length;L++){const W=f[L];for(let q=0;q<W.length;q++)A.push(E[L])}return A},t.V=function(f){As(this);let E=[];if(typeof f=="string")Mx(this,f)&&(E=E.concat(this.g.get(Ro(this,f))));else{f=Array.from(this.g.values());for(let A=0;A<f.length;A++)E=E.concat(f[A])}return E},t.set=function(f,E){return As(this),this.i=null,f=Ro(this,f),Mx(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function Vx(f,E,A){Lx(f,E),0<A.length&&(f.i=null,f.g.set(Ro(f,E),g(A)),f.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(var A=0;A<E.length;A++){var L=E[A];const q=encodeURIComponent(String(L)),ne=this.V(L);for(L=0;L<ne.length;L++){var W=q;ne[L]!==""&&(W+="="+encodeURIComponent(String(ne[L]))),f.push(W)}}return this.i=f.join("&")};function Ro(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function nP(f,E){E&&!f.j&&(As(f),f.i=null,f.g.forEach(function(A,L){var W=L.toLowerCase();L!=W&&(Lx(this,L),Vx(this,W,A))},f)),f.j=E}function rP(f,E){const A=new cl;if(a.Image){const L=new Image;L.onload=p(Cs,A,"TestLoadImage: loaded",!0,E,L),L.onerror=p(Cs,A,"TestLoadImage: error",!1,E,L),L.onabort=p(Cs,A,"TestLoadImage: abort",!1,E,L),L.ontimeout=p(Cs,A,"TestLoadImage: timeout",!1,E,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else E(!1)}function sP(f,E){const A=new cl,L=new AbortController,W=setTimeout(()=>{L.abort(),Cs(A,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:L.signal}).then(q=>{clearTimeout(W),q.ok?Cs(A,"TestPingServer: ok",!0,E):Cs(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(W),Cs(A,"TestPingServer: error",!1,E)})}function Cs(f,E,A,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(A)}catch{}}function iP(){this.g=new On}function oP(f,E,A){const L=A||"";try{jx(f,function(W,q){let ne=W;u(W)&&(ne=yt(W)),E.push(L+q+"="+encodeURIComponent(ne))})}catch(W){throw E.push(L+"type="+encodeURIComponent("_badmap")),W}}function Au(f){this.l=f.Ub||null,this.j=f.eb||!1}y(Au,Qt),Au.prototype.g=function(){return new Cu(this.l,this.j)},Au.prototype.i=function(f){return function(){return f}}({});function Cu(f,E){Ve.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Cu,Ve),t=Cu.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,pl(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ml(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,pl(this)),this.g&&(this.readyState=3,pl(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fx(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fx(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?ml(this):pl(this),this.readyState==3&&Fx(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,ml(this))},t.Qa=function(f){this.g&&(this.response=f,ml(this))},t.ga=function(){this.g&&ml(this)};function ml(f){f.readyState=4,f.l=null,f.j=null,f.v=null,pl(f)}t.setRequestHeader=function(f,E){this.u.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=E.next();return f.join(`\r
`)};function pl(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ux(f){let E="";return N(f,function(A,L){E+=L,E+=":",E+=A,E+=`\r
`}),E}function mm(f,E,A){e:{for(L in A){var L=!1;break e}L=!0}L||(A=Ux(A),typeof f=="string"?A!=null&&encodeURIComponent(String(A)):Qe(f,E,A))}function ut(f){Ve.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ut,Ve);var aP=/^https?$/i,lP=["POST","PUT"];t=ut.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,E,A,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():am.g(),this.v=this.o?Ln(this.o):Ln(am),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(q){$x(this,q);return}if(f=A||"",A=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)A.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const q of L.keys())A.set(q,L.get(q));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(A.keys()).find(q=>q.toLowerCase()=="content-type"),W=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(lP,E,void 0))||L||W||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of A)this.g.setRequestHeader(q,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wx(this),this.u=!0,this.g.send(f),this.u=!1}catch(q){$x(this,q)}};function $x(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,Bx(f),Iu(f)}function Bx(f){f.A||(f.A=!0,nt(f,"complete"),nt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,nt(this,"complete"),nt(this,"abort"),Iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Iu(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zx(this):this.bb())},t.bb=function(){zx(this)};function zx(f){if(f.h&&typeof o<"u"&&(!f.v[1]||es(f)!=4||f.Z()!=2)){if(f.u&&es(f)==4)_e(f.Ea,0,f);else if(nt(f,"readystatechange"),es(f)==4){f.h=!1;try{const ne=f.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var L;if(L=ne===0){var W=String(f.D).match(Rx)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),L=!aP.test(W?W.toLowerCase():"")}A=L}if(A)nt(f,"complete"),nt(f,"success");else{f.m=6;try{var q=2<es(f)?f.g.statusText:""}catch{q=""}f.l=q+" ["+f.Z()+"]",Bx(f)}}finally{Iu(f)}}}}function Iu(f,E){if(f.g){Wx(f);const A=f.g,L=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||nt(f,"ready");try{A.onreadystatechange=L}catch{}}}function Wx(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function es(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<es(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),Oi(E)}};function Hx(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function cP(f){const E={};f=(f.g&&2<=es(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(T(f[L]))continue;var A=j(f[L]);const W=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const q=E[W]||[];E[W]=q,q.push(A)}C(E,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gl(f,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||E}function qx(f){this.Aa=0,this.i=[],this.j=new cl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gl("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gl("baseRetryDelayMs",5e3,f),this.cb=gl("retryDelaySeedMs",1e4,f),this.Wa=gl("forwardChannelMaxRetries",2,f),this.wa=gl("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ax(f&&f.concurrentRequestLimit),this.Da=new iP,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qx.prototype,t.la=8,t.G=1,t.connect=function(f,E,A,L){hn(0),this.W=f,this.H=E||{},A&&L!==void 0&&(this.H.OSID=A,this.H.OAID=L),this.F=this.X,this.I=tw(this,null,this.W),Pu(this)};function pm(f){if(Gx(f),f.G==3){var E=f.U++,A=Zr(f.I);if(Qe(A,"SID",f.K),Qe(A,"RID",E),Qe(A,"TYPE","terminate"),yl(f,A),E=new Ss(f,f.j,E),E.L=2,E.v=Su(Zr(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=E.v,A=!0),A||(E.g=nw(E.j,null),E.g.ea(E.v)),E.F=Date.now(),bu(E)}ew(f)}function Nu(f){f.g&&(ym(f),f.g.cancel(),f.g=null)}function Gx(f){Nu(f),f.u&&(a.clearTimeout(f.u),f.u=null),ju(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Pu(f){if(!Cx(f.h)&&!f.s){f.s=!0;var E=f.Ga;R||z(),$||(R(),$=!0),U.add(E,f),f.B=0}}function uP(f,E){return Ix(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ll(m(f.Ga,f,E),Zx(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const W=new Ss(this,this.j,f);let q=this.o;if(this.S&&(q?(q=x(q),k(q,this.S)):q=this.S),this.m!==null||this.O||(W.H=q,q=null),this.P)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var L=this.i[A];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(E+=L,4096<E){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Qx(this,W,E),A=Zr(this.I),Qe(A,"RID",f),Qe(A,"CVER",22),this.D&&Qe(A,"X-HTTP-Session-Id",this.D),yl(this,A),q&&(this.O?E="headers="+encodeURIComponent(String(Ux(q)))+"&"+E:this.m&&mm(A,this.m,q)),fm(this.h,W),this.Ua&&Qe(A,"TYPE","init"),this.P?(Qe(A,"$req",E),Qe(A,"SID","null"),W.T=!0,cm(W,A,null)):cm(W,A,E),this.G=2}}else this.G==3&&(f?Kx(this,f):this.i.length==0||Cx(this.h)||Kx(this))};function Kx(f,E){var A;E?A=E.l:A=f.U++;const L=Zr(f.I);Qe(L,"SID",f.K),Qe(L,"RID",A),Qe(L,"AID",f.T),yl(f,L),f.m&&f.o&&mm(L,f.m,f.o),A=new Ss(f,f.j,A,f.B+1),f.m===null&&(A.H=f.o),E&&(f.i=E.D.concat(f.i)),E=Qx(f,A,1e3),A.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),fm(f.h,A),cm(A,L,E)}function yl(f,E){f.H&&N(f.H,function(A,L){Qe(E,L,A)}),f.l&&jx({},function(A,L){Qe(E,L,A)})}function Qx(f,E,A){A=Math.min(f.i.length,A);var L=f.l?m(f.l.Na,f.l,f):null;e:{var W=f.i;let q=-1;for(;;){const ne=["count="+A];q==-1?0<A?(q=W[0].g,ne.push("ofs="+q)):q=0:ne.push("ofs="+q);let $e=!0;for(let $t=0;$t<A;$t++){let Re=W[$t].g;const Yt=W[$t].map;if(Re-=q,0>Re)q=Math.max(0,W[$t].g-100),$e=!1;else try{oP(Yt,ne,"req"+Re+"_")}catch{L&&L(Yt)}}if($e){L=ne.join("&");break e}}}return f=f.i.splice(0,A),E.D=f,L}function Yx(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;R||z(),$||(R(),$=!0),U.add(E,f),f.v=0}}function gm(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ll(m(f.Fa,f),Zx(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Xx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ll(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),Nu(this),Xx(this))};function ym(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function Xx(f){f.g=new Ss(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=Zr(f.qa);Qe(E,"RID","rpc"),Qe(E,"SID",f.K),Qe(E,"AID",f.T),Qe(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&Qe(E,"TO",f.ja),Qe(E,"TYPE","xmlhttp"),yl(f,E),f.m&&f.o&&mm(E,f.m,f.o),f.L&&(f.g.I=f.L);var A=f.g;f=f.ia,A.L=1,A.v=Su(Zr(E)),A.m=null,A.P=!0,Tx(A,f)}t.Za=function(){this.C!=null&&(this.C=null,Nu(this),gm(this),hn(19))};function ju(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Jx(f,E){var A=null;if(f.g==E){ju(f),ym(f),f.g=null;var L=2}else if(hm(f.h,E))A=E.D,Nx(f.h,E),L=1;else return;if(f.G!=0){if(E.o)if(L==1){A=E.m?E.m.length:0,E=Date.now()-E.F;var W=f.B;L=Li(),nt(L,new wx(L,A)),Pu(f)}else Yx(f);else if(W=E.s,W==3||W==0&&0<E.X||!(L==1&&uP(f,E)||L==2&&gm(f)))switch(A&&0<A.length&&(E=f.h,E.i=E.i.concat(A)),W){case 1:Fi(f,5);break;case 4:Fi(f,10);break;case 3:Fi(f,6);break;default:Fi(f,2)}}}function Zx(f,E){let A=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(A*=2),A*E}function Fi(f,E){if(f.j.info("Error code "+E),E==2){var A=m(f.fb,f),L=f.Xa;const W=!L;L=new Vi(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tu(L,"https"),Su(L),W?rP(L.toString(),A):sP(L.toString(),A)}else hn(2);f.G=0,f.l&&f.l.sa(E),ew(f),Gx(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function ew(f){if(f.G=0,f.ka=[],f.l){const E=Px(f.h);(E.length!=0||f.i.length!=0)&&(b(f.ka,E),b(f.ka,f.i),f.h.i.length=0,g(f.i),f.i.length=0),f.l.ra()}}function tw(f,E,A){var L=A instanceof Vi?Zr(A):new Vi(A);if(L.g!="")E&&(L.g=E+"."+L.g),ku(L,L.s);else{var W=a.location;L=W.protocol,E=E?E+"."+W.hostname:W.hostname,W=+W.port;var q=new Vi(null);L&&Tu(q,L),E&&(q.g=E),W&&ku(q,W),A&&(q.l=A),L=q}return A=f.D,E=f.ya,A&&E&&Qe(L,A,E),Qe(L,"VER",f.la),yl(f,L),L}function nw(f,E,A){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new ut(new Au({eb:A})):new ut(f.pa),E.Ha(f.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rw(){}t=rw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ru(){}Ru.prototype.g=function(f,E){return new Fn(f,E)};function Fn(f,E){Ve.call(this),this.g=new qx(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!T(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!T(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new Do(this)}y(Fn,Ve),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){pm(this.g)},Fn.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.u&&(A={},A.__data__=yt(f),f=A);E.i.push(new GN(E.Ya++,f)),E.G==3&&Pu(E)},Fn.prototype.N=function(){this.g.l=null,delete this.j,pm(this.g),delete this.g,Fn.aa.N.call(this)};function sw(f){dn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const A in E){f=A;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}y(sw,dn);function iw(){_n.call(this),this.status=1}y(iw,_n);function Do(f){this.g=f}y(Do,rw),Do.prototype.ua=function(){nt(this.g,"a")},Do.prototype.ta=function(f){nt(this.g,new sw(f))},Do.prototype.sa=function(f){nt(this.g,new iw)},Do.prototype.ra=function(){nt(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,QA=function(){return new Ru},KA=function(){return Li()},GA=En,Zg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_u.NO_ERROR=0,_u.TIMEOUT=8,_u.HTTP_ERROR=6,Ld=_u,_x.COMPLETE="complete",qA=_x,Mn.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,Fl=Mn,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,HA=ut}).apply(typeof rd<"u"?rd:typeof self<"u"?self:typeof window<"u"?window:{});const wE="@firebase/firestore",_E="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new u0("@firebase/firestore");function $o(){return yo.logLevel}function ie(t,...e){if(yo.logLevel<=Ee.DEBUG){const n=e.map(E0);yo.debug(`Firestore (${tl}): ${t}`,...n)}}function _s(t,...e){if(yo.logLevel<=Ee.ERROR){const n=e.map(E0);yo.error(`Firestore (${tl}): ${t}`,...n)}}function yi(t,...e){if(yo.logLevel<=Ee.WARN){const n=e.map(E0);yo.warn(`Firestore (${tl}): ${t}`,...n)}}function E0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,YA(t,r,n)}function YA(t,e,n){let r=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _s(r),new Error(r)}function Le(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||YA(e,s,r)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rn.UNAUTHENTICATED))}shutdown(){}}class $F{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BF{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new fs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new fs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new XA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class zF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const r=i=>{i.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new EE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new EE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=qF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function ey(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return xe(r,s);{const i=JA(),o=GF(i.encode(bE(t,n)),i.encode(bE(e,n)));return o!==0?o:xe(r,s)}}n+=r>65535?2:1}return xe(t.length,e.length)}function bE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function GF(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return xe(t[n],e[n]);return xe(t.length,e.length)}function Va(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="__name__";class Dr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Dr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return xe(e.length,n.length)}static compareSegments(e,n){const r=Dr.isNumericId(e),s=Dr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Dr.extractNumericId(e).compare(Dr.extractNumericId(n)):ey(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class He extends Dr{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new He(n)}static emptyPath(){return new He([])}}const KF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Dr{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return KF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TE}static keyField(){return new Ht([TE])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new re(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new re(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(He.fromString(e))}static fromName(e){return new ae(He.fromString(e).popFirst(5))}static empty(){return new ae(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e,n){if(!n)throw new re(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QF(t,e,n,r){if(e===!0&&r===!0)throw new re(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kE(t){if(!ae.isDocumentKey(t))throw new re(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SE(t){if(ae.isDocumentKey(t))throw new re(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function Ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jf(t);throw new re(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,e){const n={typeString:t};return e&&(n.value=e),n}function hu(t,e){if(!eC(t))throw new re(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new re(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=-62135596800,CE=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*CE);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<AE)throw new re(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CE}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Ct("string",Xe._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Xe(0,0))}static max(){return new de(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=-1;function YF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new vi(s,ae.empty(),e)}function XF(t){return new vi(t.readTime,t.key,Uc)}class vi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vi(de.min(),ae.empty(),Uc)}static max(){return new vi(de.max(),ae.empty(),Uc)}}function JF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==ZF)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(s=>s?X.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new X((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new X((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function tU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Rf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=-1;function Df(t){return t==null}function jh(t){return t===0&&1/t==-1/0}function nU(t){return typeof t=="number"&&Number.isInteger(t)&&!jh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="";function rU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IE(e)),e=sU(t.get(n),e);return IE(e)}function sU(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case tC:n+="";break;default:n+=i}}return n}function IE(t){return t+tC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ji(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Wt.RED,this.left=s??Wt.EMPTY,this.right=i??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PE(this.data.getIterator())}getIteratorFrom(e){return new PE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class PE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new jt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rC("Invalid base64 string: "+i):i}}(e);return new Kt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const iU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(t){if(Le(!!t,39018),typeof t=="string"){let e=0;const n=iU.exec(t);if(Le(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wi(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="server_timestamp",iC="__type__",oC="__previous_value__",aC="__local_write_time__";function k0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[iC])===null||n===void 0?void 0:n.stringValue)===sC}function Of(t){const e=t.mapValue.fields[oC];return k0(e)?Of(e):e}function $c(t){const e=xi(t.mapValue.fields[aC].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n,r,s,i,o,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const Rh="(default)";class Bc{constructor(e,n){this.projectId=e,this.database=n||Rh}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database===Rh}isEqual(e){return e instanceof Bc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__type__",aU="__max__",id={mapValue:{}},cC="__vector__",Dh="value";function _i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?k0(t)?4:cU(t)?9007199254740991:lU(t)?10:11:ue(28295,{value:t})}function Qr(t,e){if(t===e)return!0;const n=_i(t);if(n!==_i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $c(t).isEqual($c(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=xi(s.timestampValue),a=xi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return wi(s.bytesValue).isEqual(wi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return wt(s.geoPointValue.latitude)===wt(i.geoPointValue.latitude)&&wt(s.geoPointValue.longitude)===wt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return wt(s.integerValue)===wt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=wt(s.doubleValue),a=wt(i.doubleValue);return o===a?jh(o)===jh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(NE(o)!==NE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Qr(o[l],a[l])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function zc(t,e){return(t.values||[]).find(n=>Qr(n,e))!==void 0}function Fa(t,e){if(t===e)return 0;const n=_i(t),r=_i(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=wt(i.integerValue||i.doubleValue),l=wt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return jE(t.timestampValue,e.timestampValue);case 4:return jE($c(t),$c(e));case 5:return ey(t.stringValue,e.stringValue);case 6:return function(i,o){const a=wi(i),l=wi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=xe(a[u],l[u]);if(d!==0)return d}return xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=xe(wt(i.latitude),wt(o.latitude));return a!==0?a:xe(wt(i.longitude),wt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return RE(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,d;const h=i.fields||{},m=o.fields||{},p=(a=h[Dh])===null||a===void 0?void 0:a.arrayValue,y=(l=m[Dh])===null||l===void 0?void 0:l.arrayValue,g=xe(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return g!==0?g:RE(p,y)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===id.mapValue&&o===id.mapValue)return 0;if(i===id.mapValue)return 1;if(o===id.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=ey(l[h],d[h]);if(m!==0)return m;const p=Fa(a[l[h]],u[d[h]]);if(p!==0)return p}return xe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{le:n})}}function jE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=xi(t),r=xi(e),s=xe(n.seconds,r.seconds);return s!==0?s:xe(n.nanos,r.nanos)}function RE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fa(n[s],r[s]);if(i)return i}return xe(n.length,r.length)}function Ua(t){return ty(t)}function ty(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ty(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ty(n.fields[o])}`;return s+"}"}(t.mapValue):ue(61005,{value:t})}function Md(t){switch(_i(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Of(t);return e?16+Md(e):16;case 5:return 2*t.stringValue.length;case 6:return wi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Md(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ji(r.fields,(i,o)=>{s+=i.length+Md(o)}),s}(t.mapValue);default:throw ue(13486,{value:t})}}function DE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ny(t){return!!t&&"integerValue"in t}function S0(t){return!!t&&"arrayValue"in t}function OE(t){return!!t&&"nullValue"in t}function LE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vd(t){return!!t&&"mapValue"in t}function lU(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[lC])===null||n===void 0?void 0:n.stringValue)===cC}function ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ji(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ic(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===aU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=Ht.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ic(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Vd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ji(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new In(ic(this.value))}}function uC(t){const e=[];return ji(t.fields,(n,r)=>{const s=new Ht([n]);if(Vd(r)){const i=uC(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new on(e,0,de.min(),de.min(),de.min(),In.empty(),0)}static newFoundDocument(e,n,r,s){return new on(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new on(e,2,n,de.min(),de.min(),In.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,de.min(),de.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.position=e,this.inclusive=n}}function ME(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=Fa(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function VE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n="asc"){this.field=e,this.dir=n}}function uU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{}class At extends dC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hU(e,n,r):n==="array-contains"?new pU(e,r):n==="in"?new gU(e,r):n==="not-in"?new yU(e,r):n==="array-contains-any"?new vU(e,r):new At(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fU(e,r):new mU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fa(n,this.value)):n!==null&&_i(this.value)===_i(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends dC{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Cr(e,n)}matches(e){return hC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function hC(t){return t.op==="and"}function fC(t){return dU(t)&&hC(t)}function dU(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function ry(t){if(t instanceof At)return t.field.canonicalString()+t.op.toString()+Ua(t.value);if(fC(t))return t.filters.map(e=>ry(e)).join(",");{const e=t.filters.map(n=>ry(n)).join(",");return`${t.op}(${e})`}}function mC(t,e){return t instanceof At?function(r,s){return s instanceof At&&r.op===s.op&&r.field.isEqual(s.field)&&Qr(r.value,s.value)}(t,e):t instanceof Cr?function(r,s){return s instanceof Cr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&mC(o,s.filters[a]),!0):!1}(t,e):void ue(19439)}function pC(t){return t instanceof At?function(n){return`${n.field.canonicalString()} ${n.op} ${Ua(n.value)}`}(t):t instanceof Cr?function(n){return n.op.toString()+" {"+n.getFilters().map(pC).join(" ,")+"}"}(t):"Filter"}class hU extends At{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class fU extends At{constructor(e,n){super(e,"in",n),this.keys=gC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mU extends At{constructor(e,n){super(e,"not-in",n),this.keys=gC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class pU extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return S0(n)&&zc(n.arrayValue,this.value)}}class gU extends At{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zc(this.value.arrayValue,n)}}class yU extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zc(this.value.arrayValue,n)}}class vU extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!S0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function FE(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xU(t,e,n,r,s,i,o)}function A0(t){const e=pe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ry(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ua(r)).join(",")),e.Pe=n}return e.Pe}function C0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VE(t.startAt,e.startAt)&&VE(t.endAt,e.endAt)}function sy(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function wU(t,e,n,r,s,i,o,a){return new fu(t,e,n,r,s,i,o,a)}function I0(t){return new fu(t)}function UE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yC(t){return t.collectionGroup!==null}function oc(t){const e=pe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(Ht.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Lh(i,r))}),n.has(Ht.keyField().canonicalString())||e.Te.push(new Lh(Ht.keyField(),r))}return e.Te}function Hr(t){const e=pe(t);return e.Ie||(e.Ie=_U(e,oc(t))),e.Ie}function _U(t,e){if(t.limitType==="F")return FE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Lh(s.field,i)});const n=t.endAt?new Oh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oh(t.startAt.position,t.startAt.inclusive):null;return FE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function iy(t,e){const n=t.filters.concat([e]);return new fu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function oy(t,e,n){return new fu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lf(t,e){return C0(Hr(t),Hr(e))&&t.limitType===e.limitType}function vC(t){return`${A0(Hr(t))}|lt:${t.limitType}`}function Bo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>pC(s)).join(", ")}]`),Df(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ua(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ua(s)).join(",")),`Target(${r})`}(Hr(t))}; limitType=${t.limitType})`}function Mf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=ME(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,oc(r),s)||r.endAt&&!function(o,a,l){const u=ME(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,oc(r),s))}(t,e)}function EU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xC(t){return(e,n)=>{let r=!1;for(const s of oc(t)){const i=bU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bU(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Fa(l,u):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=new lt(ae.comparator);function Es(){return TU}const wC=new lt(ae.comparator);function Ul(...t){let e=wC;for(const n of t)e=e.insert(n.key,n);return e}function _C(t){let e=wC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zi(){return ac()}function EC(){return ac()}function ac(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const kU=new lt(ae.comparator),SU=new jt(ae.comparator);function be(...t){let e=SU;for(const n of t)e=e.add(n);return e}const AU=new jt(xe);function CU(){return AU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function bC(t){return{integerValue:""+t}}function IU(t,e){return nU(e)?bC(e):N0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function NU(t,e,n){return t instanceof Mh?function(s,i){const o={fields:{[iC]:{stringValue:sC},[aC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&k0(i)&&(i=Of(i)),i&&(o.fields[oC]=i),{mapValue:o}}(n,e):t instanceof Wc?kC(t,e):t instanceof Hc?SC(t,e):function(s,i){const o=TC(s,i),a=$E(o)+$E(s.Ee);return ny(o)&&ny(s.Ee)?bC(a):N0(s.serializer,a)}(t,e)}function PU(t,e,n){return t instanceof Wc?kC(t,e):t instanceof Hc?SC(t,e):n}function TC(t,e){return t instanceof Vh?function(r){return ny(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Mh extends Vf{}class Wc extends Vf{constructor(e){super(),this.elements=e}}function kC(t,e){const n=AC(e);for(const r of t.elements)n.some(s=>Qr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hc extends Vf{constructor(e){super(),this.elements=e}}function SC(t,e){let n=AC(e);for(const r of t.elements)n=n.filter(s=>!Qr(s,r));return{arrayValue:{values:n}}}class Vh extends Vf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function $E(t){return wt(t.integerValue||t.doubleValue)}function AC(t){return S0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jU(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wc&&s instanceof Wc||r instanceof Hc&&s instanceof Hc?Va(r.elements,s.elements,Qr):r instanceof Vh&&s instanceof Vh?Qr(r.Ee,s.Ee):r instanceof Mh&&s instanceof Mh}(t.transform,e.transform)}class RU{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ff{}function CC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new P0(t.key,lr.none()):new mu(t.key,t.data,lr.none());{const n=t.data,r=In.empty();let s=new jt(Ht.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ri(t.key,r,new Hn(s.toArray()),lr.none())}}function DU(t,e,n){t instanceof mu?function(s,i,o){const a=s.value.clone(),l=zE(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ri?function(s,i,o){if(!Fd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=zE(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(IC(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,r){return t instanceof mu?function(i,o,a,l){if(!Fd(i.precondition,o))return a;const u=i.value.clone(),d=WE(i.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ri?function(i,o,a,l){if(!Fd(i.precondition,o))return a;const u=WE(i.fieldTransforms,l,o),d=o.data;return d.setAll(IC(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Fd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function OU(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=TC(r.transform,s||null);i!=null&&(n===null&&(n=In.empty()),n.set(r.field,i))}return n||null}function BE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Va(r,s,(i,o)=>jU(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mu extends Ff{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ri extends Ff{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zE(t,e,n){const r=new Map;Le(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,PU(o,a,n[s]))}return r}function WE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NU(i,o,e))}return r}class P0 extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LU extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&DU(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=CC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(n,r)=>BE(n,r))&&Va(this.baseMutations,e.baseMutations,(n,r)=>BE(n,r))}}class j0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return kU}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new j0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Ce;function UU(t){switch(t){case Y.OK:return ue(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function NC(t){if(t===void 0)return _s("GRPC error has no .code"),Y.UNKNOWN;switch(t){case Tt.OK:return Y.OK;case Tt.CANCELLED:return Y.CANCELLED;case Tt.UNKNOWN:return Y.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return Y.INTERNAL;case Tt.UNAVAILABLE:return Y.UNAVAILABLE;case Tt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Tt.NOT_FOUND:return Y.NOT_FOUND;case Tt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Tt.ABORTED:return Y.ABORTED;case Tt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Tt.DATA_LOSS:return Y.DATA_LOSS;default:return ue(39323,{code:t})}}(Ce=Tt||(Tt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=new ui([4294967295,4294967295],0);function HE(t){const e=JA().encode(t),n=new WA;return n.update(e),new Uint8Array(n.digest())}function qE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ui([n,r],0),new ui([s,i],0)]}class R0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(r<0)throw new $l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ui.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(ui.fromNumber(r)));return s.compare($U)===1&&(s=new ui([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=HE(e),[r,s]=qE(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new R0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=HE(e),[r,s]=qE(n);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uf(de.min(),s,new lt(xe),Es(),be())}}class pu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pu(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class PC{constructor(e,n){this.targetId=e,this.De=n}}class jC{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class GE{constructor(){this.ve=0,this.Ce=KE(),this.Fe=Kt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=be(),n=be(),r=be();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}}),new pu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=KE()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class BU{constructor(e){this.We=e,this.Ge=new Map,this.ze=Es(),this.je=od(),this.Je=od(),this.He=new lt(xe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(sy(i))if(r===0){const o=new ae(i.path);this.Xe(n,o,on.newNoDocument(o,de.min()))}else Le(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=wi(r).toUint8Array()}catch(l){if(l instanceof rC)return yi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new R0(o,s,i)}catch(l){return yi(l instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,o)=>{const a=this.st(o);if(a){if(i.current&&sy(a.target)){const l=new ae(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,on.newNoDocument(l,e))}i.Ne&&(n.set(o,i.Le()),i.ke())}});let r=be();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Uf(e,n,this.He,this.ze,r);return this.ze=Es(),this.je=od(),this.Je=od(),this.He=new lt(xe),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new GE,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new jt(xe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new jt(xe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new GE),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function od(){return new lt(ae.comparator)}function KE(){return new lt(ae.comparator)}const zU={asc:"ASCENDING",desc:"DESCENDING"},WU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HU={and:"AND",or:"OR"};class qU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ay(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function Fh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GU(t,e){return Fh(t,e.toTimestamp())}function qr(t){return Le(!!t,49232),de.fromTimestamp(function(n){const r=xi(n);return new Xe(r.seconds,r.nanos)}(t))}function D0(t,e){return ly(t,e).canonicalString()}function ly(t,e){const n=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DC(t){const e=He.fromString(t);return Le(FC(e),10190,{key:e.toString()}),e}function cy(t,e){return D0(t.databaseId,e.path)}function hp(t,e){const n=DC(e);if(n.get(1)!==t.databaseId.projectId)throw new re(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(LC(n))}function OC(t,e){return D0(t.databaseId,e)}function KU(t){const e=DC(t);return e.length===4?He.emptyPath():LC(e)}function uy(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LC(t){return Le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function QE(t,e,n){return{name:cy(t,e),fields:n.value.mapValue.fields}}function QU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Le(d===void 0||typeof d=="string",58123),Kt.fromBase64String(d||"")):(Le(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Kt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?Y.UNKNOWN:NC(u.code);return new re(d,u.message||"")}(o);n=new jC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=hp(t,r.document.name),i=qr(r.document.updateTime),o=r.document.createTime?qr(r.document.createTime):de.min(),a=new In({mapValue:{fields:r.document.fields}}),l=on.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Ud(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=hp(t,r.document),i=r.readTime?qr(r.readTime):de.min(),o=on.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ud([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=hp(t,r.document),i=r.removedTargetIds||[];n=new Ud([],i,s,null)}else{if(!("filter"in e))return ue(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new FU(s,i),a=r.targetId;n=new PC(a,o)}}return n}function YU(t,e){let n;if(e instanceof mu)n={update:QE(t,e.key,e.value)};else if(e instanceof P0)n={delete:cy(t,e.key)};else if(e instanceof Ri)n={update:QE(t,e.key,e.data),updateMask:i$(e.fieldMask)};else{if(!(e instanceof LU))return ue(16599,{Rt:e.type});n={verify:cy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Mh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:GU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)}(t,e.precondition)),n}function XU(t,e){return t&&t.length>0?(Le(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?qr(s.updateTime):qr(i);return o.isEqual(de.min())&&(o=qr(i)),new RU(o,s.transformResults||[])}(n,e))):[]}function JU(t,e){return{documents:[OC(t,e.path)]}}function ZU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OC(t,s);const i=function(u){if(u.length!==0)return VC(Cr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:zo(m.field),direction:n$(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ay(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:s}}function e$(t){let e=KU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const m=MC(h);return m instanceof Cr&&fC(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(y){return new Lh(Wo(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Df(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new Oh(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,p=h.values||[];return new Oh(p,m)}(n.endAt)),wU(e,s,o,i,a,"F",l,u)}function t$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wo(n.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wo(n.unaryFilter.field);return At.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wo(n.unaryFilter.field);return At.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wo(n.unaryFilter.field);return At.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return At.create(Wo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cr.create(n.compositeFilter.filters.map(r=>MC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function n$(t){return zU[t]}function r$(t){return WU[t]}function s$(t){return HU[t]}function zo(t){return{fieldPath:t.canonicalString()}}function Wo(t){return Ht.fromServerFormat(t.fieldPath)}function VC(t){return t instanceof At?function(n){if(n.op==="=="){if(LE(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(OE(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LE(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(OE(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:r$(n.op),value:n.value}}}(t):t instanceof Cr?function(n){const r=n.getFilters().map(s=>VC(s));return r.length===1?r[0]:{compositeFilter:{op:s$(n.op),filters:r}}}(t):ue(54877,{filter:t})}function i$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,r,s,i=de.min(),o=de.min(),a=Kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.gt=e}}function a$(t){const e=e$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(){this.Dn=new c$}addToCollectionParentIndex(e,n){return this.Dn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(vi.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class c${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new jt(He.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UC=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(UC,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new $a(0)}static ur(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LruGarbageCollector",u$=1048576;function JE([t,e],[n,r]){const s=xe(t,n);return s===0?xe(e,r):s}class d${constructor(e){this.Tr=e,this.buffer=new jt(JE),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();JE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class h${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(XE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rl(n)?ie(XE,"Ignoring IndexedDB error during garbage collection: ",n):await nl(n)}await this.Rr(3e5)})}}class f${constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return X.resolve(Rf.ue);const r=new d$(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(YE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),$o()<=Ee.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function m$(t,e){return new f$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lc(r.mutation,s,Hn.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const s=Zi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ul();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Es();const o=ac(),a=function(){return ac()}();return n.forEach((l,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Ri)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),lc(d.mutation,u,d.mutation.getFieldMask(),Xe.now())):o.set(u.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new g$(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ac();let s=new lt((o,a)=>o-a),i=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Hn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(s.get(a.batchId)||be()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=EC();d.forEach(m=>{if(!i.has(m)){const p=CC(n.get(m),r.get(m));p!==null&&h.set(m,p),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return X.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):X.resolve(Zi());let a=Uc,l=i;return o.next(u=>X.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?X.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,be())).next(d=>({batchId:a,changes:_C(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=Ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ul();return this.indexManager.getCollectionParents(e,i).next(a=>X.forEach(a,l=>{const u=function(h,m){return new fu(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,on.newInvalidDocument(d)))});let a=Ul();return o.forEach((l,u)=>{const d=i.get(l);d!==void 0&&lc(d.mutation,u,Hn.empty(),Xe.now()),Mf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return X.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:qr(s.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:a$(s.bundledQuery),readTime:qr(s.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(){this.overlays=new lt(ae.comparator),this.kr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zi();return X.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const s=Zi(),i=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return X.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new lt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Zi(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Zi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return X.resolve(a)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VU(n,r));let i=this.kr.get(n);i===void 0&&(i=be(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.qr=new jt(Ot.Qr),this.$r=new jt(Ot.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Ot(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ot(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ae(new He([])),r=new Ot(n,e),s=new Ot(n,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ae(new He([])),r=new Ot(n,e),s=new Ot(n,e+1);let i=be();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ot(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ae.comparator(e.key,n.key)||xe(e.Hr,n.Hr)}static Ur(e,n){return xe(e.Hr,n.Hr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new jt(Ot.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MU(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new Ot(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?T0:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ot(n,0),s=new Ot(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(xe);return n.forEach(s=>{const i=new Ot(s,0),o=new Ot(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),X.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const o=new Ot(new ae(i),0);let a=new jt(xe);return this.Yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Hr)),!0)},o),X.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return X.forEach(n.mutations,s=>{const i=new Ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Ot(n,0),s=this.Yr.firstAfterOrEqual(r);return X.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e){this.ni=e,this.docs=function(){return new lt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let r=Es();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():on.newInvalidDocument(s))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Es();const o=n.path,a=new ae(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||JF(XF(d),r)<=0||(s.has(d.key)||Mf(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ri(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new b$(this)}getSize(e){return X.resolve(this.size)}}class b$ extends p${constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.persistence=e,this.ii=new Ao(n=>A0(n),C0),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.si=0,this.oi=new O0,this.targetCount=0,this._i=$a.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),X.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.hr(n),X.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),X.waitFor(i).next(()=>s)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),X.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.ai={},this.overlays={},this.ui=new Rf(0),this.ci=!1,this.ci=!0,this.li=new w$,this.referenceDelegate=e(this),this.hi=new T$(this),this.indexManager=new l$,this.remoteDocumentCache=function(s){return new E$(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new o$(n),this.Ti=new v$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new x$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new _$(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new k$(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return X.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class k$ extends eU{constructor(e){super(),this.currentSequenceNumber=e}}class L0{constructor(e){this.persistence=e,this.Ai=new O0,this.Ri=null}static Vi(e){return new L0(e)}get mi(){if(this.Ri)return this.Ri;throw ue(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,r=>{const s=ae.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,de.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return X.or([()=>X.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Uh{constructor(e,n){this.persistence=e,this.gi=new Ao(r=>rU(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=m$(this,n)}static Vi(e,n){return new Uh(e,n)}Ii(){}di(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return X.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?X.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,de.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),X.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Md(e.data.value)),n}Sr(e,n,r){return X.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=be(),s=be();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new M0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return oM()?8:tU(cn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new S$;return this.ws(e,n,o).next(a=>{if(i.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?($o()<=Ee.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):($o()<=Ee.DEBUG&&ie("QueryEngine","Query:",Bo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?($o()<=Ee.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(n))):X.resolve())}ps(e,n){if(UE(n))return X.resolve(null);let r=Hr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=oy(n,null,"F"),r=Hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=be(...i);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.bs(n,a);return this.Ds(n,u,o,l.readTime)?this.ps(e,oy(n,null,"F")):this.vs(e,u,n,l)}))})))}ys(e,n,r,s){return UE(n)||s.isEqual(de.min())?X.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ds(n,o,r,s)?X.resolve(null):($o()<=Ee.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bo(n)),this.vs(e,o,n,YF(s,Uc)).next(a=>a))})}bs(e,n){let r=new jt(xC(e));return n.forEach((s,i)=>{Mf(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return $o()<=Ee.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Bo(n)),this.gs.getDocumentsMatchingQuery(e,n,vi.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="LocalStore",C$=3e8;class I${constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new lt(xe),this.Ms=new Ao(i=>A0(i),C0),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new y$(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function N$(t,e,n,r){return new I$(t,e,n,r)}async function BC(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=be();for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function P$(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,m=h.keys();let p=X.resolve();return m.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(g=>{const b=u.docVersions.get(y);Le(b!==null,48541),g.version.compareTo(b)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=be();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zC(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function j$(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;a.push(n.hi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(i,d.addedDocuments,h)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Kt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(g,b,v){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=C$?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,p,d)&&a.push(n.hi.updateTargetData(i,p))});let l=Es(),u=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(R$(i,o,e.documentUpdates).next(d=>{l=d.Ls,u=d.ks})),!r.isEqual(de.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next(h=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return X.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Fs=s,i))}function R$(t,e,n){let r=be(),s=be();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Es();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ie(V0,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:o,ks:s}})}function D$(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=T0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function O$(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,X.resolve(s)):n.hi.allocateTargetId(r).next(o=>(s=new Ys(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function dy(t,e,n){const r=pe(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!rl(o))throw o;ie(V0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function ZE(t,e,n){const r=pe(t);let s=de.min(),i=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=pe(l),m=h.Ms.get(d);return m!==void 0?X.resolve(h.Fs.get(m)):h.hi.getTargetData(u,d)}(r,o,Hr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?i:be())).next(a=>(L$(r,EU(e),a),{documents:a,qs:i})))}function L$(t,e,n){let r=t.xs.get(e)||de.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class eb{constructor(){this.activeTargetIds=CU()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M${constructor(){this.Fo=new eb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new eb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="ConnectivityMonitor";class nb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(tb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ie(tb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=null;function hy(){return ad===null?ad=function(){return 268435456+Math.round(2147483648*Math.random())}():ad++,"0x"+ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="RestConnection",F$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U${get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Rh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=hy(),a=this.Go(e,n.toUriEncodedString());ie(fp,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,s,i);const{host:u}=new URL(a),d=Ni(u);return this.jo(e,a,l,r,d).then(h=>(ie(fp,`Received RPC '${e}' ${o}: `,h),h),h=>{throw yi(fp,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=F$[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class B$ extends U${constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const o=hy();return new Promise((a,l)=>{const u=new HA;u.setWithCredentials(!0),u.listenOnce(qA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ld.NO_ERROR:const h=u.getResponseJson();ie(en,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Ld.TIMEOUT:ie(en,`RPC '${e}' ${o} timed out`),l(new re(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Ld.HTTP_ERROR:const m=u.getStatus();if(ie(en,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const g=function(v){const T=v.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(T)>=0?T:Y.UNKNOWN}(y.status);l(new re(g,y.message))}else l(new re(Y.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new re(Y.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ie(en,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ie(en,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}P_(e,n,r){const s=hy(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=QA(),a=KA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ie(en,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.T_(h);let m=!1,p=!1;const y=new $$({Ho:b=>{p?ie(en,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(ie(en,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),ie(en,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Yo:()=>h.close()}),g=(b,v,T)=>{b.listen(v,_=>{try{T(_)}catch(I){setTimeout(()=>{throw I},0)}})};return g(h,Fl.EventType.OPEN,()=>{p||(ie(en,`RPC '${e}' stream ${s} transport opened.`),y.s_())}),g(h,Fl.EventType.CLOSE,()=>{p||(p=!0,ie(en,`RPC '${e}' stream ${s} transport closed`),y.__(),this.I_(h))}),g(h,Fl.EventType.ERROR,b=>{p||(p=!0,yi(en,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),y.__(new re(Y.UNAVAILABLE,"The operation could not be completed")))}),g(h,Fl.EventType.MESSAGE,b=>{var v;if(!p){const T=b.data[0];Le(!!T,16349);const _=T,I=(_==null?void 0:_.error)||((v=_[0])===null||v===void 0?void 0:v.error);if(I){ie(en,`RPC '${e}' stream ${s} received error:`,I);const O=I.status;let N=function(w){const k=Tt[w];if(k!==void 0)return NC(k)}(O),C=I.message;N===void 0&&(N=Y.INTERNAL,C="Unknown error status: "+O+" with message "+I.message),p=!0,y.__(new re(N,C)),h.close()}else ie(en,`RPC '${e}' stream ${s} received:`,T),y.a_(T)}}),g(a,GA.STAT_EVENT,b=>{b.stat===Zg.PROXY?ie(en,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Zg.NOPROXY&&ie(en,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.o_()},0),y}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function mp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t){return new qU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="PersistentStream";class HC{constructor(e,n,r,s,i,o,a,l){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WC(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(_s(n.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new re(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ie(rb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ie(rb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z$ extends HC{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=QU(this.serializer,e),r=function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?qr(o.readTime):de.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=uy(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=sy(l)?{documents:JU(i,l)}:{query:ZU(i,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=RC(i,o.resumeToken);const u=ay(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=Fh(i,o.snapshotVersion.toTimestamp());const u=ay(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=t$(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=uy(this.serializer),n.removeTarget=e,this.k_(n)}}class W$ extends HC{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=XU(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=uy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>YU(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${}class q$ extends H${constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new re(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,ly(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(Y.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,ly(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(Y.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class G${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_s(n),this._a=!1):ie("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="RemoteStore";class K${constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Co(this)&&(ie(vo,"Restarting streams for network reachability change."),await async function(l){const u=pe(l);u.Ia.add(4),await gu(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Bf(u)}(this))})}),this.Aa=new G$(r,s)}}async function Bf(t){if(Co(t))for(const e of t.da)await e(!0)}async function gu(t){for(const e of t.da)await e(!1)}function qC(t,e){const n=pe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),B0(n)?$0(n):sl(n).x_()&&U0(n,e))}function F0(t,e){const n=pe(t),r=sl(n);n.Ta.delete(e),r.x_()&&GC(n,e),n.Ta.size===0&&(r.x_()?r.B_():Co(n)&&n.Aa.set("Unknown"))}function U0(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sl(t).H_(e)}function GC(t,e){t.Ra.$e(e),sl(t).Y_(e)}function $0(t){t.Ra=new BU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),sl(t).start(),t.Aa.aa()}function B0(t){return Co(t)&&!sl(t).M_()&&t.Ta.size>0}function Co(t){return pe(t).Ia.size===0}function KC(t){t.Ra=void 0}async function Q$(t){t.Aa.set("Online")}async function Y$(t){t.Ta.forEach((e,n)=>{U0(t,e)})}async function X$(t,e){KC(t),B0(t)?(t.Aa.la(e),$0(t)):t.Aa.set("Unknown")}async function J$(t,e,n){if(t.Aa.set("Online"),e instanceof jC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))}(t,e)}catch(r){ie(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $h(t,r)}else if(e instanceof Ud?t.Ra.Ye(e):e instanceof PC?t.Ra.it(e):t.Ra.et(e),!n.isEqual(de.min()))try{const r=await zC(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Ra.Pt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ta.get(u);d&&i.Ta.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=i.Ta.get(l);if(!d)return;i.Ta.set(l,d.withResumeToken(Kt.EMPTY_BYTE_STRING,d.snapshotVersion)),GC(i,l);const h=new Ys(d.target,l,u,d.sequenceNumber);U0(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ie(vo,"Failed to raise snapshot:",r),await $h(t,r)}}async function $h(t,e,n){if(!rl(e))throw e;t.Ia.add(1),await gu(t),t.Aa.set("Offline"),n||(n=()=>zC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(vo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Bf(t)})}function QC(t,e){return e().catch(n=>$h(t,n,e))}async function zf(t){const e=pe(t),n=Ei(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:T0;for(;Z$(e);)try{const s=await D$(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,e9(e,s)}catch(s){await $h(e,s)}YC(e)&&XC(e)}function Z$(t){return Co(t)&&t.Pa.length<10}function e9(t,e){t.Pa.push(e);const n=Ei(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function YC(t){return Co(t)&&!Ei(t).M_()&&t.Pa.length>0}function XC(t){Ei(t).start()}async function t9(t){Ei(t).na()}async function n9(t){const e=Ei(t);for(const n of t.Pa)e.X_(n.mutations)}async function r9(t,e,n){const r=t.Pa.shift(),s=j0.from(r,e,n);await QC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zf(t)}async function s9(t,e){e&&Ei(t).Z_&&await async function(r,s){if(function(o){return UU(o)&&o!==Y.ABORTED}(s.code)){const i=r.Pa.shift();Ei(r).N_(),await QC(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zf(r)}}(t,e),YC(t)&&XC(t)}async function sb(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),ie(vo,"RemoteStore received new credentials");const r=Co(n);n.Ia.add(3),await gu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Bf(n)}async function i9(t,e){const n=pe(t);e?(n.Ia.delete(2),await Bf(n)):e||(n.Ia.add(2),await gu(n),n.Aa.set("Unknown"))}function sl(t){return t.Va||(t.Va=function(n,r,s){const i=pe(n);return i.ia(),new z$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Q$.bind(null,t),e_:Y$.bind(null,t),n_:X$.bind(null,t),J_:J$.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),B0(t)?$0(t):t.Aa.set("Unknown")):(await t.Va.stop(),KC(t))})),t.Va}function Ei(t){return t.ma||(t.ma=function(n,r,s){const i=pe(n);return i.ia(),new W$(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:t9.bind(null,t),n_:s9.bind(null,t),ea:n9.bind(null,t),ta:r9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await zf(t)):(await t.ma.stop(),t.Pa.length>0&&(ie(vo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new z0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function W0(t,e){if(_s("AsyncQueue",`${e}: ${t}`),rl(t))return new re(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{static emptySet(e){return new Ea(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Ul(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ea)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ea;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.fa=new lt(ae.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ba{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ba(e,n,Ea.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class a9{constructor(){this.queries=ob(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=pe(n),i=s.queries;s.queries=ob(),i.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new re(Y.ABORTED,"Firestore shutting down"))}}function ob(){return new Ao(t=>vC(t),Lf)}async function JC(t,e){const n=pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new o9,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=W0(o,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&H0(n)}async function ZC(t,e){const n=pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function l9(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.wa)a.Ca(s)&&(r=!0);o.ya=s}}r&&H0(n)}function c9(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function H0(t){t.Da.forEach(e=>{e.next()})}var fy,ab;(ab=fy||(fy={})).Fa="default",ab.Cache="cache";class eI{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ba(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==fy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.key=e}}class nI{constructor(e){this.key=e}}class u9{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=be(),this.mutatedKeys=be(),this.Xa=xC(e),this.eu=new Ea(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new ib,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),p=Mf(this.query,h)?h:null,y=!!m&&this.mutatedKeys.has(m.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;m&&p?m.data.isEqual(p.data)?y!==g&&(r.track({type:3,doc:p}),b=!0):this.iu(m,p)||(r.track({type:2,doc:p}),b=!0,(l&&this.Xa(p,l)>0||u&&this.Xa(p,u)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),b=!0):m&&!p&&(r.track({type:1,doc:m}),b=!0,(l||u)&&(a=!0)),b&&(p?(o=o.add(p),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,h)=>function(p,y){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{At:b})}};return g(p)-g(y)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),s=s!=null&&s;const a=n&&!s?this.ou():[],l=this.Za.size===0&&this.current&&!s?1:0,u=l!==this.Ya;return this.Ya=l,o.length!==0||u?{snapshot:new Ba(this.query,e.eu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ib,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=be(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new nI(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new tI(r))}),n}uu(e){this.Ha=e.qs,this.Za=be();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ba.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const q0="SyncEngine";class d9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class h9{constructor(e){this.key=e,this.lu=!1}}class f9{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ao(a=>vC(a),Lf),this.Tu=new Map,this.Iu=new Set,this.du=new lt(ae.comparator),this.Eu=new Map,this.Au=new O0,this.Ru={},this.Vu=new Map,this.mu=$a.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function m9(t,e,n=!0){const r=lI(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await rI(r,e,n,!0),s}async function p9(t,e){const n=lI(t);await rI(n,e,!0,!1)}async function rI(t,e,n,r){const s=await O$(t.localStore,Hr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await g9(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&qC(t.remoteStore,s),a}async function g9(t,e,n,r,s){t.gu=(h,m,p)=>async function(g,b,v,T){let _=b.view.nu(v);_.Ds&&(_=await ZE(g.localStore,b.query,!1).then(({documents:C})=>b.view.nu(C,_)));const I=T&&T.targetChanges.get(b.targetId),O=T&&T.targetMismatches.get(b.targetId)!=null,N=b.view.applyChanges(_,g.isPrimaryClient,I,O);return cb(g,b.targetId,N._u),N.snapshot}(t,h,m,p);const i=await ZE(t.localStore,e,!0),o=new u9(e,i.qs),a=o.nu(i.documents),l=pu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);cb(t,n,u._u);const d=new d9(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function y9(t,e,n){const r=pe(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Lf(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&F0(r.remoteStore,s.targetId),my(r,s.targetId)}).catch(nl)):(my(r,s.targetId),await dy(r.localStore,s.targetId,!0))}async function v9(t,e){const n=pe(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),F0(n.remoteStore,r.targetId))}async function x9(t,e,n){const r=S9(t);try{const s=await function(o,a){const l=pe(o),u=Xe.now(),d=a.reduce((p,y)=>p.add(y.key),be());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=Es(),g=be();return l.Os.getEntries(p,d).next(b=>{y=b,y.forEach((v,T)=>{T.isValidDocument()||(g=g.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(b=>{h=b;const v=[];for(const T of a){const _=OU(T,h.get(T.key).overlayedDocument);_!=null&&v.push(new Ri(T.key,_,uC(_.value.mapValue),lr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,v,a)}).next(b=>{m=b;const v=b.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(p,b.batchId,v)})}).then(()=>({batchId:m.batchId,changes:_C(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Ru[o.currentUser.toKey()];u||(u=new lt(xe)),u=u.insert(a,l),o.Ru[o.currentUser.toKey()]=u}(r,s.batchId,n),await yu(r,s.changes),await zf(r.remoteStore)}catch(s){const i=W0(s,"Failed to persist write");n.reject(i)}}async function sI(t,e){const n=pe(t);try{const r=await j$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?Le(o.lu,14607):s.removedDocuments.size>0&&(Le(o.lu,42227),o.lu=!1))}),await yu(n,r,e)}catch(r){await nl(r)}}function lb(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=pe(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.wa)m.va(a)&&(u=!0)}),u&&H0(l)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function w9(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new lt(ae.comparator);o=o.insert(i,on.newNoDocument(i,de.min()));const a=be().add(i),l=new Uf(de.min(),new Map,new lt(xe),o,a);await sI(r,l),r.du=r.du.remove(i),r.Eu.delete(e),G0(r)}else await dy(r.localStore,e,!1).then(()=>my(r,e,n)).catch(nl)}async function _9(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await P$(n.localStore,e);oI(n,r,null),iI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yu(n,s)}catch(s){await nl(s)}}async function E9(t,e,n){const r=pe(t);try{const s=await function(o,a){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Le(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);oI(r,e,n),iI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yu(r,s)}catch(s){await nl(s)}}function iI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function oI(t,e,n){const r=pe(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function my(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||aI(t,r)})}function aI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(F0(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),G0(t))}function cb(t,e,n){for(const r of n)r instanceof tI?(t.Au.addReference(r.key,e),b9(t,r)):r instanceof nI?(ie(q0,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||aI(t,r.key)):ue(19791,{yu:r})}function b9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ie(q0,"New document in limbo: "+n),t.Iu.add(r),G0(t))}function G0(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ae(He.fromString(e)),r=t.mu.next();t.Eu.set(r,new h9(n)),t.du=t.du.insert(n,r),qC(t.remoteStore,new Ys(Hr(I0(n.path)),r,"TargetPurposeLimboResolution",Rf.ue))}}async function yu(t,e,n){const r=pe(t),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=M0.Es(l.targetId,u);i.push(h)}}))}),await Promise.all(o),r.hu.J_(s),await async function(l,u){const d=pe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>X.forEach(u,m=>X.forEach(m.Is,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>X.forEach(m.ds,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!rl(h))throw h;ie(V0,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const p=d.Fs.get(m),y=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(y);d.Fs=d.Fs.insert(m,g)}}}(r.localStore,i))}async function T9(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){ie(q0,"User change. New user:",e.toKey());const r=await BC(n.localStore,e);n.currentUser=e,function(i,o){i.Vu.forEach(a=>{a.forEach(l=>{l.reject(new re(Y.CANCELLED,o))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yu(n,r.Bs)}}function k9(t,e){const n=pe(t),r=n.Eu.get(e);if(r&&r.lu)return be().add(r.key);{let s=be();const i=n.Tu.get(e);if(!i)return s;for(const o of i){const a=n.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}function lI(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w9.bind(null,e),e.hu.J_=l9.bind(null,e.eventManager),e.hu.pu=c9.bind(null,e.eventManager),e}function S9(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E9.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$f(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return N$(this.persistence,new A$,e.initialUser,this.serializer)}Du(e){return new $C(L0.Vi,this.serializer)}bu(e){return new M$}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class A9 extends Bh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Le(this.persistence.referenceDelegate instanceof Uh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new h$(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new $C(r=>Uh.Vi(r,n),this.serializer)}}class py{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T9.bind(null,this.syncEngine),await i9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new a9}()}createDatastore(e){const n=$f(e.databaseInfo.databaseId),r=function(i){return new B$(i)}(e.databaseInfo);return function(i,o,a,l){return new q$(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new K$(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>lb(this.syncEngine,n,0),function(){return nb.C()?new nb:new V$}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,d){const h=new f9(s,i,o,a,l,u);return d&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=pe(s);ie(vo,"RemoteStore shutting down."),i.Ia.add(5),await gu(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}py.provider={build:()=>new py};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class C9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=rn.UNAUTHENTICATED,this.clientId=b0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ie(bi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(bi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=W0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function pp(t,e){t.asyncQueue.verifyOperationInProgress(),ie(bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await BC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{yi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{yi("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function ub(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I9(t);ie(bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sb(e.remoteStore,s)),t._onlineComponents=e}async function I9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(bi,"Using user provided OfflineComponentProvider");try{await pp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;yi("Error using user provided cache. Falling back to memory cache: "+n),await pp(t,new Bh)}}else ie(bi,"Using default OfflineComponentProvider"),await pp(t,new A9(void 0));return t._offlineComponents}async function uI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(bi,"Using user provided OnlineComponentProvider"),await ub(t,t._uninitializedComponentsProvider._online)):(ie(bi,"Using default OnlineComponentProvider"),await ub(t,new py))),t._onlineComponents}function N9(t){return uI(t).then(e=>e.syncEngine)}async function dI(t){const e=await uI(t),n=e.eventManager;return n.onListen=m9.bind(null,e.syncEngine),n.onUnlisten=y9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=p9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=v9.bind(null,e.syncEngine),n}function P9(t,e,n={}){const r=new fs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const d=new cI({next:m=>{d.Ou(),o.enqueueAndForget(()=>ZC(i,h));const p=m.docs.has(a);!p&&m.fromCache?u.reject(new re(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new re(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new eI(I0(a.path),d,{includeMetadataChanges:!0,ka:!0});return JC(i,h)}(await dI(t),t.asyncQueue,e,n,r)),r.promise}function j9(t,e,n={}){const r=new fs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const d=new cI({next:m=>{d.Ou(),o.enqueueAndForget(()=>ZC(i,h)),m.fromCache&&l.source==="server"?u.reject(new re(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new eI(a,d,{includeMetadataChanges:!0,ka:!0});return JC(i,h)}(await dI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firestore.googleapis.com",hb=!0;class fb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fI,this.ssl=hb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:hb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<u$)throw new re(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new UF;switch(r.type){case"firstParty":return new WF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=db.get(n);r&&(ie("ComponentProvider","Removing Datastore"),db.delete(n),r.terminate())}(this),Promise.resolve()}}function R9(t,e,n,r={}){var s;t=Ar(t,Wf);const i=Ni(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(l0(`https://${l}`),c0("Firestore",!0)),o.host!==fI&&o.host!==l&&yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!fo(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=rn.MOCK_USER;else{d=sA(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new re(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new rn(m)}t._authCredentials=new $F(new XA(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new il(this.firestore,e,this._query)}}class Et{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(hu(n,Et._jsonSchema))return new Et(e,r||null,new ae(He.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Ct("string",Et._jsonSchemaVersion),referencePath:Ct("string")};class di extends il{constructor(e,n,r){super(e,n,I0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new ae(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function Mo(t,e,...n){if(t=at(t),ZA("collection","path",e),t instanceof Wf){const r=He.fromString(e,...n);return SE(r),new di(t,null,r)}{if(!(t instanceof Et||t instanceof di))throw new re(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return SE(r),new di(t.firestore,null,r)}}function mn(t,e,...n){if(t=at(t),arguments.length===1&&(e=b0.newId()),ZA("doc","path",e),t instanceof Wf){const r=He.fromString(e,...n);return kE(r),new Et(t,null,new ae(r))}{if(!(t instanceof Et||t instanceof di))throw new re(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return kE(r),new Et(t.firestore,t instanceof di?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="AsyncQueue";class pb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WC(this,"async_queue_retry"),this.oc=()=>{const r=mp();r&&ie(mb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=mp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=mp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new fs;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!rl(e))throw e;ie(mb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,_s("INTERNAL UNHANDLED ERROR: ",gb(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=z0.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&ue(47125,{hc:gb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function gb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Io extends Wf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new pb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pb(e),this._firestoreClient=void 0,await e}}}function D9(t,e){const n=typeof t=="object"?t:h0(),r=typeof t=="string"?t:Rh,s=Cf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=tA("firestore");i&&R9(s,...i)}return s}function K0(t){if(t._terminated)throw new re(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||O9(t),t._firestoreClient}function O9(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,d){return new oU(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hI(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new C9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(Kt.fromBase64String(e))}catch(n){throw new re(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ir(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:Ct("string",ir._jsonSchemaVersion),bytes:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:Ct("string",Gr._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Kr(e.vectorValues);throw new re(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:Ct("string",Kr._jsonSchemaVersion),vectorValues:Ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=/^__.*__$/;class M9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class mI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ec:t})}}class Y0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Y0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return zh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(pI(this.Ec)&&L9.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class V9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$f(e)}Dc(e,n,r,s=!1){return new Y0({Ec:e,methodName:n,bc:r,path:Ht.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qf(t){const e=t._freezeSettings(),n=$f(t._databaseId);return new V9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gI(t,e,n,r,s,i={}){const o=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);X0("Data must be an object, but it was:",o,r);const a=yI(r,o);let l,u;if(i.merge)l=new Hn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const m=gy(e,h,n);if(!o.contains(m))throw new re(Y.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xI(d,m)||d.push(m)}l=new Hn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new M9(new In(a),l,u)}class Gf extends Q0{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function F9(t,e,n,r){const s=t.Dc(1,e,n);X0("Data must be an object, but it was:",s,r);const i=[],o=In.empty();ji(r,(l,u)=>{const d=J0(e,l,n);u=at(u);const h=s.gc(d);if(u instanceof Gf)i.push(d);else{const m=vu(u,h);m!=null&&(i.push(d),o.set(d,m))}});const a=new Hn(i);return new mI(o,a,s.fieldTransforms)}function U9(t,e,n,r,s,i){const o=t.Dc(1,e,n),a=[gy(e,r,n)],l=[s];if(i.length%2!=0)throw new re(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(gy(e,i[m])),l.push(i[m+1]);const u=[],d=In.empty();for(let m=a.length-1;m>=0;--m)if(!xI(u,a[m])){const p=a[m];let y=l[m];y=at(y);const g=o.gc(p);if(y instanceof Gf)u.push(p);else{const b=vu(y,g);b!=null&&(u.push(p),d.set(p,b))}}const h=new Hn(u);return new mI(d,h,o.fieldTransforms)}function $9(t,e,n,r=!1){return vu(n,t.Dc(r?4:3,e))}function vu(t,e){if(vI(t=at(t)))return X0("Unsupported field value:",e,t),yI(t,e);if(t instanceof Q0)return function(r,s){if(!pI(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=vu(a,s.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Fh(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fh(s.serializer,i)}}if(r instanceof Gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ir)return{bytesValue:RC(s.serializer,r._byteString)};if(r instanceof Et){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:D0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Kr)return function(o,a){return{mapValue:{fields:{[lC]:{stringValue:cC},[Dh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return N0(a.serializer,u)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${jf(r)}`)}(t,e)}function yI(t,e){const n={};return nC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(t,(r,s)=>{const i=vu(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Gr||t instanceof ir||t instanceof Et||t instanceof Q0||t instanceof Kr)}function X0(t,e,n){if(!vI(n)||!eC(n)){const r=jf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function gy(t,e,n){if((e=at(e))instanceof Hf)return e._internalPath;if(typeof e=="string")return J0(t,e);throw zh("Field path arguments must be of type string or ",t,!1,void 0,n)}const B9=new RegExp("[~\\*/\\[\\]]");function J0(t,e,n){if(e.search(B9)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hf(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new re(Y.INVALID_ARGUMENT,a+t+l)}function xI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Z0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z9 extends wI{data(){return super.data()}}function Z0(t,e){return typeof e=="string"?J0(t,e):e instanceof Hf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ex{}class H9 extends ex{}function gp(t,e,...n){let r=[];e instanceof ex&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof tx).length,a=i.filter(l=>l instanceof Kf).length;if(o>1||o>0&&a>0)throw new re(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Kf extends H9{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kf(e,n,r)}_apply(e){const n=this._parse(e);return _I(e._query,n),new il(e.firestore,e.converter,iy(e._query,n))}_parse(e){const n=qf(e.firestore);return function(i,o,a,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new re(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){vb(h,d);const y=[];for(const g of h)y.push(yb(l,i,g));m={arrayValue:{values:y}}}else m=yb(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||vb(h,d),m=$9(a,o,h,d==="in"||d==="not-in");return At.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yp(t,e,n){const r=e,s=Z0("where",t);return Kf._create(s,r,n)}class tx extends ex{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)_I(o,l),o=iy(o,l)}(e._query,n),new il(e.firestore,e.converter,iy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function yb(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new re(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yC(e)&&n.indexOf("/")!==-1)throw new re(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(He.fromString(n));if(!ae.isDocumentKey(r))throw new re(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return DE(t,new ae(r))}if(n instanceof Et)return DE(t,n._key);throw new re(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jf(n)}.`)}function vb(t,e){if(!Array.isArray(t)||t.length===0)throw new re(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _I(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class q9{convertValue(e,n="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ji(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Dh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>wt(o.doubleValue));return new Kr(i)}convertGeoPoint(e){return new Gr(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Of(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const n=xi(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);Le(FC(r),9688,{name:e});const s=new Bc(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||_s(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class so extends wI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Z0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=so._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}so._jsonSchemaVersion="firestore/documentSnapshot/1.0",so._jsonSchema={type:Ct("string",so._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class $d extends so{data(e={}){return super.data(e)}}class ba{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Bl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $d(this._firestore,this._userDataWriter,r.key,r,new Bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new $d(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Bl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new $d(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Bl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:G9(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=b0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function G9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){t=Ar(t,Et);const e=Ar(t.firestore,Io);return P9(K0(e),t._key).then(n=>Q9(e,t,n))}ba._jsonSchemaVersion="firestore/querySnapshot/1.0",ba._jsonSchema={type:Ct("string",ba._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class bI extends q9{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function vp(t){t=Ar(t,il);const e=Ar(t.firestore,Io),n=K0(e),r=new bI(e);return W9(t._query),j9(n,t._query).then(s=>new ba(e,r,t,s))}function xb(t,e,n){t=Ar(t,Et);const r=Ar(t.firestore,Io),s=EI(t.converter,e);return Qf(r,[gI(qf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,lr.none())])}function Ho(t,e,n,...r){t=Ar(t,Et);const s=Ar(t.firestore,Io),i=qf(s);let o;return o=typeof(e=at(e))=="string"||e instanceof Hf?U9(i,"updateDoc",t._key,e,n,r):F9(i,"updateDoc",t._key,e),Qf(s,[o.toMutation(t._key,lr.exists(!0))])}function K9(t){return Qf(Ar(t.firestore,Io),[new P0(t._key,lr.none())])}function xp(t,e){const n=Ar(t.firestore,Io),r=mn(t),s=EI(t.converter,e);return Qf(n,[gI(qf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}function Qf(t,e){return function(r,s){const i=new fs;return r.asyncQueue.enqueueAndForget(async()=>x9(await N9(r),s,i)),i.promise}(K0(t),e)}function Q9(t,e,n){const r=n.docs.get(e._key),s=new bI(t);return new so(t,s,e._key,r,new Bl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){tl=s})(ko),mo(new gi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Io(new BF(r.getProvider("auth-internal")),new HF(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Br(wE,_E,e),Br(wE,_E,"esm2017")})();var Y9="firebase",X9="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(Y9,X9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebasestorage.googleapis.com",kI="storageBucket",J9=2*60*1e3,Z9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It=class SI extends Jr{constructor(e,n,r=0){super(wp(e),`Firebase Storage: ${n} (${wp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,SI.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var mt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mt||(mt={}));function wp(t){return"storage/"+t}function nx(){const t="An unknown error occurred, please check the error payload for server response.";return new It(mt.UNKNOWN,t)}function e8(t){return new It(mt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function t8(t){return new It(mt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function n8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new It(mt.UNAUTHENTICATED,t)}function r8(){return new It(mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function s8(t){return new It(mt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function i8(){return new It(mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function o8(){return new It(mt.CANCELED,"User canceled the upload/download.")}function a8(t){return new It(mt.INVALID_URL,"Invalid URL '"+t+"'.")}function l8(t){return new It(mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function c8(){return new It(mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kI+"' property when initializing the app?")}function u8(){return new It(mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d8(){return new It(mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function h8(t){return new It(mt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yy(t){return new It(mt.INVALID_ARGUMENT,t)}function AI(){return new It(mt.APP_DELETED,"The Firebase app was deleted.")}function f8(t){return new It(mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cc(t,e){return new It(mt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Al(t){throw new It(mt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qn.makeFromUrl(e,n)}catch{return new qn(e,"")}if(r.path==="")return r;throw l8(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${m}`,"i"),y={bucket:1,path:3},g=n===TI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",v=new RegExp(`^https?://${g}/${s}/${b}`,"i"),_=[{regex:a,indices:l,postModify:i},{regex:p,indices:y,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<_.length;I++){const O=_[I],N=O.regex.exec(e);if(N){const C=N[O.indices.bucket];let x=N[O.indices.path];x||(x=""),r=new qn(C,x),O.postModify(r);break}}if(r==null)throw a8(e);return r}}class m8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(p,l())},b)}function m(){i&&clearTimeout(i)}function p(b,...v){if(u){m();return}if(b){m(),d.call(null,b,...v);return}if(l()||o){m(),d.call(null,b,...v);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,h(_)}let y=!1;function g(b){y||(y=!0,m(),!u&&(s!==null?(b||(a=2),clearTimeout(s),h(0)):b||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function g8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(t){return t!==void 0}function v8(t){return typeof t=="object"&&!Array.isArray(t)}function rx(t){return typeof t=="string"||t instanceof String}function wb(t){return sx()&&t instanceof Blob}function sx(){return typeof Blob<"u"}function _b(t,e,n,r){if(r<e)throw yy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw yy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function CI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var io;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(io||(io={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n,r,s,i,o,a,l,u,d,h,m=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,g)=>{this.resolve_=y,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ld(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===io.NO_ERROR,l=i.getStatus();if(!a||x8(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===io.ABORT;r(!1,new ld(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new ld(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());y8(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=nx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?AI():o8();o(l)}else{const l=i8();o(l)}};this.canceled_?n(!1,new ld(!1,null,!0)):this.backoffId_=p8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ld{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function b8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function T8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function k8(t,e,n,r,s,i,o=!0,a=!1){const l=CI(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return b8(d,e),_8(d,n),E8(d,i),T8(d,r),new w8(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A8(...t){const e=S8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(sx())return new Blob(t);throw new It(mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t){if(typeof atob>"u")throw h8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _p{constructor(e,n){this.data=e,this.contentType=n||null}}function N8(t,e){switch(t){case Mr.RAW:return new _p(II(e));case Mr.BASE64:case Mr.BASE64URL:return new _p(NI(t,e));case Mr.DATA_URL:return new _p(j8(e),R8(e))}throw nx()}function II(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function P8(t){let e;try{e=decodeURIComponent(t)}catch{throw cc(Mr.DATA_URL,"Malformed data URL.")}return II(e)}function NI(t,e){switch(t){case Mr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw cc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Mr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw cc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=I8(e)}catch(s){throw s.message.includes("polyfill")?s:cc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class PI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw cc(Mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=D8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function j8(t){const e=new PI(t);return e.base64?NI(Mr.BASE64,e.rest):P8(e.rest)}function R8(t){return new PI(t).contentType}function D8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){let r=0,s="";wb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(wb(this.data_)){const r=this.data_,s=C8(r,e,n);return s===null?null:new Hs(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Hs(r,!0)}}static getBlob(...e){if(sx()){const n=e.map(r=>r instanceof Hs?r.data_:r);return new Hs(A8.apply(null,n))}else{const n=e.map(o=>rx(o)?N8(Mr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Hs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){let e;try{e=JSON.parse(t)}catch{return null}return v8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function RI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t,e){return e}class fn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||M8}}let cd=null;function V8(t){return!rx(t)||t.length<2?t:RI(t)}function DI(){if(cd)return cd;const t=[];t.push(new fn("bucket")),t.push(new fn("generation")),t.push(new fn("metageneration")),t.push(new fn("name","fullPath",!0));function e(i,o){return V8(o)}const n=new fn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new fn("size");return s.xform=r,t.push(s),t.push(new fn("timeCreated")),t.push(new fn("updated")),t.push(new fn("md5Hash",null,!0)),t.push(new fn("cacheControl",null,!0)),t.push(new fn("contentDisposition",null,!0)),t.push(new fn("contentEncoding",null,!0)),t.push(new fn("contentLanguage",null,!0)),t.push(new fn("contentType",null,!0)),t.push(new fn("metadata","customMetadata",!0)),cd=t,cd}function F8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new qn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function U8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return F8(r,t),r}function OI(t,e,n){const r=jI(e);return r===null?null:U8(t,r,n)}function $8(t,e,n,r){const s=jI(e);if(s===null||!rx(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),p=ix(m,n,r),y=CI({alt:"media",token:u});return p+y})[0]}function B8(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class LI{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t){if(!t)throw nx()}function z8(t,e){function n(r,s){const i=OI(t,s,e);return MI(i!==null),i}return n}function W8(t,e){function n(r,s){const i=OI(t,s,e);return MI(i!==null),$8(i,s,t.host,t._protocol)}return n}function VI(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=r8():s=n8():n.getStatus()===402?s=t8(t.bucket):n.getStatus()===403?s=s8(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function H8(t){const e=VI(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=e8(t.path)),i.serverResponse=s.serverResponse,i}return n}function q8(t,e,n){const r=e.fullServerUrl(),s=ix(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new LI(s,i,W8(t,n),o);return a.errorHandler=H8(e),a}function G8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function K8(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=G8(null,e)),r}function Q8(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let I=0;I<2;I++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=K8(e,r,s),d=B8(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Hs.getBlob(h,r,m);if(p===null)throw u8();const y={name:u.fullPath},g=ix(i,t.host,t._protocol),b="POST",v=t.maxUploadRetryTime,T=new LI(g,b,z8(t,n),v);return T.urlParams=y,T.headers=o,T.body=p.uploadData(),T.errorHandler=VI(e),T}class Y8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=io.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=io.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=io.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Al("cannot .send() more than once");if(Ni(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Al("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Al("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Al("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Al("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class X8 extends Y8{initXhr(){this.xhr_.responseType="text"}}function FI(){return new X8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this._service=e,n instanceof qn?this._location=n:this._location=qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xo(e,n)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RI(this._location.path)}get storage(){return this._service}get parent(){const e=O8(this._location.path);if(e===null)return null;const n=new qn(this._location.bucket,e);return new xo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw f8(e)}}function J8(t,e,n){t._throwIfRoot("uploadBytes");const r=Q8(t.storage,t._location,DI(),new Hs(e,!0),n);return t.storage.makeRequestWithTokens(r,FI).then(s=>({metadata:s,ref:t}))}function Z8(t){t._throwIfRoot("getDownloadURL");const e=q8(t.storage,t._location,DI());return t.storage.makeRequestWithTokens(e,FI).then(n=>{if(n===null)throw d8();return n})}function eB(t,e){const n=L8(t._location.path,e),r=new qn(t._location.bucket,n);return new xo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(t){return/^[A-Za-z]+:\/\//.test(t)}function nB(t,e){return new xo(t,e)}function UI(t,e){if(t instanceof ox){const n=t;if(n._bucket==null)throw c8();const r=new xo(n,n._bucket);return e!=null?UI(r,e):r}else return e!==void 0?eB(t,e):t}function rB(t,e){if(e&&tB(e)){if(t instanceof ox)return nB(t,e);throw yy("To use ref(service, url), the first argument must be a Storage instance.")}else return UI(t,e)}function Eb(t,e){const n=e==null?void 0:e[kI];return n==null?null:qn.makeFromBucketSpec(n,t)}function sB(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ni(e);s&&(l0(`https://${t.host}/b`),c0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:sA(i,t.app.options.projectId))}class ox{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=TI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=J9,this._maxUploadRetryTime=Z9,this._requests=new Set,s!=null?this._bucket=qn.makeFromBucketSpec(s,this._host):this._bucket=Eb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=Eb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_b("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_b("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xo(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new m8(AI());{const o=k8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const bb="@firebase/storage",Tb="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="storage";function iB(t,e,n){return t=at(t),J8(t,e,n)}function oB(t){return t=at(t),Z8(t)}function aB(t,e){return t=at(t),rB(t,e)}function BI(t=h0(),e){t=at(t);const r=Cf(t,$I).getImmediate({identifier:e}),s=tA("storage");return s&&lB(r,...s),r}function lB(t,e,n,r={}){sB(t,e,n,r)}function cB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ox(n,r,s,e,ko)}function uB(){mo(new gi($I,cB,"PUBLIC").setMultipleInstances(!0)),Br(bb,Tb,""),Br(bb,Tb,"esm2017")}uB();const dB={apiKey:"AIzaSyCEPwdLuizj53pImFd0DefpSHq-bYQzqdI",authDomain:"treinano.firebaseapp.com",projectId:"treinano",storageBucket:"treinano.firebasestorage.app",messagingSenderId:"805170449396",appId:"1:805170449396:web:ec5e6cca4456819be2c7a1"},ax=aA(dB),qo=VF(ax),kt=D9(ax);BI(ax);function zI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=zI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Js(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=zI(t))&&(r&&(r+=" "),r+=e);return r}const qc=t=>typeof t=="number"&&!isNaN(t),oo=t=>typeof t=="string",Gn=t=>typeof t=="function",Bd=t=>oo(t)||Gn(t)?t:null,vy=t=>V.isValidElement(t)||oo(t)||Gn(t)||qc(t);function hB(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function Yf(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:i=300}=t;return function(o){let{children:a,position:l,preventExitTransition:u,done:d,nodeRef:h,isIn:m,playToast:p}=o;const y=r?`${e}--${l}`:e,g=r?`${n}--${l}`:n,b=V.useRef(0);return V.useLayoutEffect(()=>{const v=h.current,T=y.split(" "),_=I=>{I.target===h.current&&(p(),v.removeEventListener("animationend",_),v.removeEventListener("animationcancel",_),b.current===0&&I.type!=="animationcancel"&&v.classList.remove(...T))};v.classList.add(...T),v.addEventListener("animationend",_),v.addEventListener("animationcancel",_)},[]),V.useEffect(()=>{const v=h.current,T=()=>{v.removeEventListener("animationend",T),s?hB(v,d,i):d()};m||(u?T():(b.current=1,v.className+=` ${g}`,v.addEventListener("animationend",T)))},[m]),me.createElement(me.Fragment,null,a)}}function kb(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const gn=new Map;let Gc=[];const xy=new Set,fB=t=>xy.forEach(e=>e(t)),WI=()=>gn.size>0;function HI(t,e){var n;if(e)return!((n=gn.get(e))==null||!n.isToastActive(t));let r=!1;return gn.forEach(s=>{s.isToastActive(t)&&(r=!0)}),r}function qI(t,e){vy(t)&&(WI()||Gc.push({content:t,options:e}),gn.forEach(n=>{n.buildToast(t,e)}))}function Sb(t,e){gn.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function mB(t){const{subscribe:e,getSnapshot:n,setProps:r}=V.useRef(function(i){const o=i.containerId||1;return{subscribe(a){const l=function(d,h,m){let p=1,y=0,g=[],b=[],v=[],T=h;const _=new Map,I=new Set,O=()=>{v=Array.from(_.values()),I.forEach(x=>x())},N=x=>{b=x==null?[]:b.filter(w=>w!==x),O()},C=x=>{const{toastId:w,onOpen:k,updateId:j,children:P}=x.props,S=j==null;x.staleId&&_.delete(x.staleId),_.set(w,x),b=[...b,x.props.toastId].filter(M=>M!==x.staleId),O(),m(kb(x,S?"added":"updated")),S&&Gn(k)&&k(V.isValidElement(P)&&P.props)};return{id:d,props:T,observe:x=>(I.add(x),()=>I.delete(x)),toggle:(x,w)=>{_.forEach(k=>{w!=null&&w!==k.props.toastId||Gn(k.toggle)&&k.toggle(x)})},removeToast:N,toasts:_,clearQueue:()=>{y-=g.length,g=[]},buildToast:(x,w)=>{if((G=>{let{containerId:Z,toastId:Q,updateId:H}=G;const se=Z?Z!==d:d!==1,he=_.has(Q)&&H==null;return se||he})(w))return;const{toastId:k,updateId:j,data:P,staleId:S,delay:M}=w,B=()=>{N(k)},D=j==null;D&&y++;const R={...T,style:T.toastStyle,key:p++,...Object.fromEntries(Object.entries(w).filter(G=>{let[Z,Q]=G;return Q!=null})),toastId:k,updateId:j,data:P,closeToast:B,isIn:!1,className:Bd(w.className||T.toastClassName),bodyClassName:Bd(w.bodyClassName||T.bodyClassName),progressClassName:Bd(w.progressClassName||T.progressClassName),autoClose:!w.isLoading&&($=w.autoClose,U=T.autoClose,$===!1||qc($)&&$>0?$:U),deleteToast(){const G=_.get(k),{onClose:Z,children:Q}=G.props;Gn(Z)&&Z(V.isValidElement(Q)&&Q.props),m(kb(G,"removed")),_.delete(k),y--,y<0&&(y=0),g.length>0?C(g.shift()):O()}};var $,U;R.closeButton=T.closeButton,w.closeButton===!1||vy(w.closeButton)?R.closeButton=w.closeButton:w.closeButton===!0&&(R.closeButton=!vy(T.closeButton)||T.closeButton);let z=x;V.isValidElement(x)&&!oo(x.type)?z=V.cloneElement(x,{closeToast:B,toastProps:R,data:P}):Gn(x)&&(z=x({closeToast:B,toastProps:R,data:P}));const J={content:z,props:R,staleId:S};T.limit&&T.limit>0&&y>T.limit&&D?g.push(J):qc(M)?setTimeout(()=>{C(J)},M):C(J)},setProps(x){T=x},setToggle:(x,w)=>{_.get(x).toggle=w},isToastActive:x=>b.some(w=>w===x),getSnapshot:()=>v}}(o,i,fB);gn.set(o,l);const u=l.observe(a);return Gc.forEach(d=>qI(d.content,d.options)),Gc=[],()=>{u(),gn.delete(o)}},setProps(a){var l;(l=gn.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=gn.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const s=V.useSyncExternalStore(e,n,n);return{getToastToRender:function(i){if(!s)return[];const o=new Map;return t.newestOnTop&&s.reverse(),s.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>i(a[0],a[1]))},isToastActive:HI,count:s==null?void 0:s.length}}function pB(t){const[e,n]=V.useState(!1),[r,s]=V.useState(!1),i=V.useRef(null),o=V.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:u,onClick:d,closeOnClick:h}=t;var m,p;function y(){n(!0)}function g(){n(!1)}function b(_){const I=i.current;o.canDrag&&I&&(o.didMove=!0,e&&g(),o.delta=t.draggableDirection==="x"?_.clientX-o.start:_.clientY-o.start,o.start!==_.clientX&&(o.canCloseOnClick=!1),I.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,I.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function v(){document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",v);const _=i.current;if(o.canDrag&&o.didMove&&_){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),t.closeToast(),void t.collapseAll();_.style.transition="transform 0.2s, opacity 0.2s",_.style.removeProperty("transform"),_.style.removeProperty("opacity")}}(p=gn.get((m={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||p.setToggle(m.id,m.fn),V.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||g(),window.addEventListener("focus",y),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",y),window.removeEventListener("blur",g)}},[t.pauseOnFocusLoss]);const T={onPointerDown:function(_){if(t.draggable===!0||t.draggable===_.pointerType){o.didMove=!1,document.addEventListener("pointermove",b),document.addEventListener("pointerup",v);const I=i.current;o.canCloseOnClick=!0,o.canDrag=!0,I.style.transition="none",t.draggableDirection==="x"?(o.start=_.clientX,o.removalDistance=I.offsetWidth*(t.draggablePercent/100)):(o.start=_.clientY,o.removalDistance=I.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(_){const{top:I,bottom:O,left:N,right:C}=i.current.getBoundingClientRect();_.nativeEvent.type!=="touchend"&&t.pauseOnHover&&_.clientX>=N&&_.clientX<=C&&_.clientY>=I&&_.clientY<=O?g():y()}};return a&&l&&(T.onMouseEnter=g,t.stacked||(T.onMouseLeave=y)),h&&(T.onClick=_=>{d&&d(_),o.canCloseOnClick&&u()}),{playToast:y,pauseToast:g,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:T}}function gB(t){let{delay:e,isRunning:n,closeToast:r,type:s="default",hide:i,className:o,style:a,controlledProgress:l,progress:u,rtl:d,isIn:h,theme:m}=t;const p=i||l&&u===0,y={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(y.transform=`scaleX(${u})`);const g=Js("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),b=Gn(o)?o({rtl:d,type:s,defaultClassName:g}):Js(g,o),v={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{h&&r()}};return me.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},me.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${m} Toastify__progress-bar--${s}`}),me.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:b,style:y,...v}))}let yB=1;const GI=()=>""+yB++;function vB(t){return t&&(oo(t.toastId)||qc(t.toastId))?t.toastId:GI()}function uc(t,e){return qI(t,e),e.toastId}function Wh(t,e){return{...e,type:e&&e.type||t,toastId:vB(e)}}function ud(t){return(e,n)=>uc(e,Wh(t,n))}function ee(t,e){return uc(t,Wh("default",e))}ee.loading=(t,e)=>uc(t,Wh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),ee.promise=function(t,e,n){let r,{pending:s,error:i,success:o}=e;s&&(r=oo(s)?ee.loading(s,n):ee.loading(s.render,{...n,...s}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,h,m)=>{if(h==null)return void ee.dismiss(r);const p={type:d,...a,...n,data:m},y=oo(h)?{render:h}:h;return r?ee.update(r,{...p,...y}):ee(y.render,{...p,...y}),m},u=Gn(t)?t():t;return u.then(d=>l("success",o,d)).catch(d=>l("error",i,d)),u},ee.success=ud("success"),ee.info=ud("info"),ee.error=ud("error"),ee.warning=ud("warning"),ee.warn=ee.warning,ee.dark=(t,e)=>uc(t,Wh("default",{theme:"dark",...e})),ee.dismiss=function(t){(function(e){var n;if(WI()){if(e==null||oo(n=e)||qc(n))gn.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=gn.get(e.containerId);r?r.removeToast(e.id):gn.forEach(s=>{s.removeToast(e.id)})}}else Gc=Gc.filter(r=>e!=null&&r.options.toastId!==e)})(t)},ee.clearWaitingQueue=function(t){t===void 0&&(t={}),gn.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},ee.isActive=HI,ee.update=function(t,e){e===void 0&&(e={});const n=((r,s)=>{var i;let{containerId:o}=s;return(i=gn.get(o||1))==null?void 0:i.toasts.get(r)})(t,e);if(n){const{props:r,content:s}=n,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:GI()};i.toastId!==t&&(i.staleId=t);const o=i.render||s;delete i.render,uc(o,i)}},ee.done=t=>{ee.update(t,{progress:1})},ee.onChange=function(t){return xy.add(t),()=>{xy.delete(t)}},ee.play=t=>Sb(!0,t),ee.pause=t=>Sb(!1,t);const xB=typeof window<"u"?V.useLayoutEffect:V.useEffect,dd=t=>{let{theme:e,type:n,isLoading:r,...s}=t;return me.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},Ep={info:function(t){return me.createElement(dd,{...t},me.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return me.createElement(dd,{...t},me.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return me.createElement(dd,{...t},me.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return me.createElement(dd,{...t},me.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return me.createElement("div",{className:"Toastify__spinner"})}},wB=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:i}=pB(t),{closeButton:o,children:a,autoClose:l,onClick:u,type:d,hideProgressBar:h,closeToast:m,transition:p,position:y,className:g,style:b,bodyClassName:v,bodyStyle:T,progressClassName:_,progressStyle:I,updateId:O,role:N,progress:C,rtl:x,toastId:w,deleteToast:k,isIn:j,isLoading:P,closeOnClick:S,theme:M}=t,B=Js("Toastify__toast",`Toastify__toast-theme--${M}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":x},{"Toastify__toast--close-on-click":S}),D=Gn(g)?g({rtl:x,position:y,type:d,defaultClassName:B}):Js(B,g),R=function(J){let{theme:G,type:Z,isLoading:Q,icon:H}=J,se=null;const he={theme:G,type:Z};return H===!1||(Gn(H)?se=H({...he,isLoading:Q}):V.isValidElement(H)?se=V.cloneElement(H,he):Q?se=Ep.spinner():(ye=>ye in Ep)(Z)&&(se=Ep[Z](he))),se}(t),$=!!C||!l,U={closeToast:m,type:d,theme:M};let z=null;return o===!1||(z=Gn(o)?o(U):V.isValidElement(o)?V.cloneElement(o,U):function(J){let{closeToast:G,theme:Z,ariaLabel:Q="close"}=J;return me.createElement("button",{className:`Toastify__close-button Toastify__close-button--${Z}`,type:"button",onClick:H=>{H.stopPropagation(),G(H)},"aria-label":Q},me.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},me.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(U)),me.createElement(p,{isIn:j,done:k,position:y,preventExitTransition:n,nodeRef:r,playToast:i},me.createElement("div",{id:w,onClick:u,"data-in":j,className:D,...s,style:b,ref:r},me.createElement("div",{...j&&{role:N},className:Gn(v)?v({type:d}):Js("Toastify__toast-body",v),style:T},R!=null&&me.createElement("div",{className:Js("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},R),me.createElement("div",null,a)),z,me.createElement(gB,{...O&&!$?{key:`pb-${O}`}:{},rtl:x,theme:M,delay:l,isRunning:e,isIn:j,closeToast:m,hide:h,type:d,style:I,className:_,controlledProgress:$,progress:C||0})))},Xf=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},_B=Yf(Xf("bounce",!0));Yf(Xf("slide",!0));Yf(Xf("zoom"));Yf(Xf("flip"));const EB={position:"top-right",transition:_B,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function bB(t){let e={...EB,...t};const n=t.stacked,[r,s]=V.useState(!0),i=V.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=mB(e),{className:u,style:d,rtl:h,containerId:m}=e;function p(g){const b=Js("Toastify__toast-container",`Toastify__toast-container--${g}`,{"Toastify__toast-container--rtl":h});return Gn(u)?u({position:g,rtl:h,defaultClassName:b}):Js(b,Bd(u))}function y(){n&&(s(!0),ee.play())}return xB(()=>{if(n){var g;const b=i.current.querySelectorAll('[data-in="true"]'),v=12,T=(g=e.position)==null?void 0:g.includes("top");let _=0,I=0;Array.from(b).reverse().forEach((O,N)=>{const C=O;C.classList.add("Toastify__toast--stacked"),N>0&&(C.dataset.collapsed=`${r}`),C.dataset.pos||(C.dataset.pos=T?"top":"bot");const x=_*(r?.2:1)+(r?0:v*N);C.style.setProperty("--y",`${T?x:-1*x}px`),C.style.setProperty("--g",`${v}`),C.style.setProperty("--s",""+(1-(r?I:0))),_+=C.offsetHeight,I+=.025})}},[r,l,n]),me.createElement("div",{ref:i,className:"Toastify",id:m,onMouseEnter:()=>{n&&(s(!1),ee.pause())},onMouseLeave:y},o((g,b)=>{const v=b.length?{...d}:{...d,pointerEvents:"none"};return me.createElement("div",{className:p(g),style:v,key:`container-${g}`},b.map(T=>{let{content:_,props:I}=T;return me.createElement(wB,{...I,stacked:n,collapseAll:y,isIn:a(I.toastId,I.containerId),style:I.style,key:`toast-${I.key}`},_)}))}))}const hr=Sf((t,e)=>({user:null,initialized:!1,loading:!1,error:null,initialize:async()=>{try{t({loading:!0});const n=S6(qo,async r=>{if(r)try{const s=mn(kt,"profiles",r.uid),i=await Xs(s),o=i.exists()?i.data():null;t({user:{...r,profile:o}})}catch(s){console.error("Error fetching profile:",s),t({user:r})}else t({user:null})});return t({initialized:!0,loading:!1}),n}catch(n){console.error("Error initializing auth:",n),t({error:n.message,loading:!1,initialized:!0})}},signIn:async(n,r)=>{try{t({loading:!0,error:null}),console.log("Attempting sign in with Firebase");const s=await E6(qo,n,r),i=s.user;try{const o=mn(kt,"profiles",i.uid),a=await Xs(o),l=a.exists()?a.data():null;t({user:{...i,profile:l},loading:!1})}catch(o){console.error("Error fetching profile:",o),t({user:i,loading:!1})}return s}catch(s){console.error("Error signing in:",s);let i=s.message;throw s.code==="auth/user-not-found"?i="Usurio no encontrado":s.code==="auth/wrong-password"?i="Senha incorreta":s.code==="auth/invalid-email"?i="Email invlido":s.code==="auth/too-many-requests"&&(i="Muitas tentativas. Tente novamente mais tarde"),t({error:i,loading:!1}),new Error(i)}},signUp:async(n,r,s)=>{try{t({loading:!0,error:null}),console.log("Attempting sign up with Firebase");const i=await _6(qo,n,r),o=i.user;await cE(o,{displayName:s.name});const a={id:o.uid,username:s.name,email:o.email,level:1,experience:0,total_workouts:0,total_exercises:0,total_weight_lifted:0,streak_days:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},l=mn(kt,"profiles",o.uid);return await xb(l,a),t({user:{...o,profile:a},loading:!1}),i}catch(i){console.error("Error signing up:",i);let o=i.message;throw i.code==="auth/email-already-in-use"?o="Este email j est em uso":i.code==="auth/weak-password"?o="A senha deve ter pelo menos 6 caracteres":i.code==="auth/invalid-email"&&(o="Email invlido"),t({error:o,loading:!1}),new Error(o)}},signOut:async()=>{try{t({loading:!0,error:null}),await A6(qo),t({user:null,loading:!1,initialized:!1}),localStorage.clear()}catch(n){throw console.error("Error signing out:",n),t({error:n.message,loading:!1}),n}},updateProfile:async n=>{try{t({loading:!0,error:null});const r=qo.currentUser;if(!r)throw new Error("Usurio no autenticado");console.log("Current user:",{uid:r.uid,email:r.email,displayName:r.displayName}),n.name&&(console.log(" Atualizando Firebase Auth displayName..."),await cE(r,{displayName:n.name}),console.log(" Firebase Auth displayName atualizado para:",n.name));const s=mn(kt,"profiles",r.uid);console.log(" Referncia do documento Firestore:",s.path),console.log(" Verificando se documento do perfil existe...");let i=await Xs(s);console.log(" Documento existe no Firestore:",i.exists()),i.exists()&&console.log(" Dados atuais do documento:",i.data());const o={...n.name&&{username:n.name},...n.avatar_url!==void 0&&{avatar_url:n.avatar_url},...n.height!==void 0&&{height:n.height},...n.weight!==void 0&&{weight:n.weight},...n.target_weight!==void 0&&{target_weight:n.target_weight},...n.age!==void 0&&{age:n.age},...n.goal!==void 0&&{goal:n.goal},...n.experience_level!==void 0&&{experience_level:n.experience_level},...n.training_time!==void 0&&{training_time:n.training_time},...n.preferred_time!==void 0&&{preferred_time:n.preferred_time},...n.favorite_exercises!==void 0&&{favorite_exercises:n.favorite_exercises},...n.motivation!==void 0&&{motivation:n.motivation},...n.weekly_goal!==void 0&&{weekly_goal:n.weekly_goal},...n.bio!==void 0&&{bio:n.bio},updated_at:new Date().toISOString()};Object.keys(o).forEach(u=>{o[u]===void 0&&delete o[u]}),console.log(" Dados finais para salvar no Firestore:",o),i.exists()?(console.log(" Atualizando documento existente no Firestore..."),await Ho(s,o),console.log(" Documento Firestore atualizado com sucesso")):(console.log(" Documento no existe, criando novo..."),await xb(s,{id:r.uid,email:r.email,username:n.name||r.displayName||"",avatar_url:n.avatar_url||"",height:n.height||null,weight:n.weight||null,target_weight:n.target_weight||null,age:n.age||null,goal:n.goal||null,experience_level:n.experience_level||null,training_time:n.training_time||null,preferred_time:n.preferred_time||null,favorite_exercises:n.favorite_exercises||[],motivation:n.motivation||null,weekly_goal:n.weekly_goal||3,bio:n.bio||null,level:1,experience:0,total_workouts:0,total_exercises:0,total_weight_lifted:0,streak_days:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log(" Novo documento Firestore criado com sucesso")),console.log(" Buscando perfil atualizado do Firestore..."),i=await Xs(s);const a=i.exists()?i.data():null;console.log(" Perfil atualizado do Firestore:",a);const l={...r,profile:a};return console.log(" Atualizando estado local..."),t({user:l,loading:!1}),console.log(" Estado local atualizado:",{uid:l.uid,displayName:l.displayName,profile:l.profile}),console.log(" Perfil salvo com sucesso!"),{user:l}}catch(r){throw console.error(" ERRO ao atualizar perfil:",r),console.error(" Tipo do erro:",r.constructor.name),console.error(" Mensagem do erro:",r.message),console.error(" Stack trace completo:",r.stack),t({error:r.message,loading:!1}),r}}})),KI="treinano-settings",Ps=t=>{try{const e=JSON.stringify(t);return localStorage.setItem(KI,e),console.log(" Configuraes salvas no localStorage:",t),!0}catch(e){return console.error(" Erro ao salvar no localStorage:",e),!1}},bp=()=>{try{const t=localStorage.getItem(KI);if(t){const e=JSON.parse(t);return console.log(" Configuraes carregadas do localStorage:",e),e}}catch(t){console.error(" Erro ao carregar do localStorage:",t)}return null},Cl={isDarkMode:!0,accentColor:"#FF4500",fontSize:"medium",soundEnabled:!0,vibrationEnabled:!0,keepScreenOn:!1},Jf=Sf((t,e)=>({...Cl,isInitialized:!1,initializeTheme:()=>{console.log(" === INICIALIZANDO TEMA ===");const n=bp();n?(console.log(" Aplicando configuraes salvas:",n),t({...n,isInitialized:!0}),e().applyThemeToDOM(n)):(console.log(" Usando configuraes padro"),t({isInitialized:!0}),e().applyThemeToDOM(Cl))},applyThemeToDOM:n=>{console.log(" Aplicando tema ao DOM:",n),n.isDarkMode?document.body.className="bg-dark text-light":document.body.className="bg-white text-gray-800",document.documentElement.style.setProperty("--dynamic-accent-color",n.accentColor),document.documentElement.setAttribute("data-font-size",n.fontSize);const r=document.createElement("style");r.innerHTML=`
      :root {
        --tw-color-primary: ${n.accentColor};
      }
      .bg-primary { background-color: ${n.accentColor} !important; }
      .text-primary { color: ${n.accentColor} !important; }
      .border-primary { border-color: ${n.accentColor} !important; }
      .ring-primary { --tw-ring-color: ${n.accentColor}; }
    `;const s=document.getElementById("dynamic-accent-style");s&&s.remove(),r.id="dynamic-accent-style",document.head.appendChild(r),console.log(" Tema aplicado ao DOM com sucesso")},saveSettings:async n=>{try{if(console.log(" === SALVANDO CONFIGURAES ==="),console.log(" Novas configuraes:",n),t(n),e().applyThemeToDOM(n),!Ps(n))throw new Error("Falha ao salvar no localStorage");const s=bp();if(!s||s.accentColor!==n.accentColor)throw new Error("Verificao de salvamento falhou");return console.log(" Configuraes salvas e verificadas com sucesso"),!0}catch(r){throw console.error(" Erro ao salvar configuraes:",r),r}},toggleTheme:()=>{const n=!e().isDarkMode,r={...e(),isDarkMode:n};t({isDarkMode:n}),e().applyThemeToDOM(r),Ps(r)},setAccentColor:n=>{const r={...e(),accentColor:n};t({accentColor:n}),e().applyThemeToDOM(r),Ps(r)},setFontSize:n=>{const r={...e(),fontSize:n};t({fontSize:n}),e().applyThemeToDOM(r),Ps(r)},setSoundEnabled:n=>{const r={...e(),soundEnabled:n};t({soundEnabled:n}),Ps(r)},setVibrationEnabled:n=>{const r={...e(),vibrationEnabled:n};t({vibrationEnabled:n}),Ps(r)},setKeepScreenOn:n=>{const r={...e(),keepScreenOn:n};t({keepScreenOn:n}),Ps(r)},resetToDefaults:()=>{console.log(" Resetando para configuraes padro"),t(Cl),e().applyThemeToDOM(Cl),Ps(Cl)},hasStoredSettings:()=>bp()!==null}));class TB{constructor(){this.registration=null,this.isSupported="serviceWorker"in navigator}async initialize(){if(!this.isSupported)return console.warn("Service Worker no suportado neste navegador"),!1;try{return navigator.serviceWorker.controller?(this.registration=await navigator.serviceWorker.ready,console.log(" Service Worker j ativo:",this.registration)):(this.registration=await navigator.serviceWorker.register("/sw.js"),console.log(" Service Worker registrado:",this.registration)),await this.requestNotificationPermission(),!0}catch(e){return console.error(" Erro ao inicializar Service Worker:",e),!1}}async requestNotificationPermission(){if(!("Notification"in window))return console.warn("Notificaes no suportadas neste navegador"),!1;if(Notification.permission==="granted")return console.log(" Permisso para notificaes j concedida"),!0;if(Notification.permission==="denied")return console.warn(" Permisso para notificaes negada"),!1;try{const e=await Notification.requestPermission();return console.log(" Permisso para notificaes:",e),e==="granted"}catch(e){return console.error(" Erro ao solicitar permisso:",e),!1}}async scheduleNotification(e,n,r){if(!this.registration)return console.warn("Service Worker no disponvel para notificaes"),!1;if(Notification.permission!=="granted")return console.warn("Permisso para notificaes no concedida"),!1;try{const s={title:e,body:n,icon:"/icon-192.png",badge:"/icon-192.png",tag:"workout-timer",requireInteraction:!0,actions:[{action:"view",title:"Ver App"}]},i=/iPad|iPhone|iPod/.test(navigator.userAgent);return setTimeout(i?()=>{document.hidden&&new Notification(e,{body:n,icon:"/icon-192.png",tag:"workout-timer"})}:()=>{this.registration.showNotification(e,s)},r*1e3),console.log(` Notificao agendada para ${r}s:`,e),!0}catch(s){return console.error(" Erro ao agendar notificao:",s),!1}}async showNotification(e,n){if(Notification.permission!=="granted")return!1;try{return this.registration?await this.registration.showNotification(e,{body:n,icon:"/icon-192.png",badge:"/icon-192.png",tag:"workout-timer",requireInteraction:!0}):new Notification(e,{body:n,icon:"/icon-192.png",tag:"workout-timer"}),!0}catch(r){return console.error(" Erro ao mostrar notificao:",r),!1}}}const QI=new TB;class wy{constructor(e,n){this.onTick=e,this.onComplete=n,this.startTime=null,this.duration=0,this.isRunning=!1,this.intervalId=null,this.storageKey=null,this.type="timer",this.tick=this.tick.bind(this),this.handleVisibilityChange=this.handleVisibilityChange.bind(this),this.handlePageShow=this.handlePageShow.bind(this),document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("pageshow",this.handlePageShow),window.addEventListener("focus",this.handlePageShow)}start(e,n="timer",r=null){console.log(` Iniciando ${n} timer:`,{duration:e,storageKey:r}),this.duration=e,this.type=n,this.storageKey=r||`treinano-${n}-${Date.now()}`,this.startTime=Date.now(),this.isRunning=!0,this.saveToStorage(),this.intervalId=setInterval(this.tick,1e3),this.tick()}tick(){if(!this.isRunning)return;const e=Math.floor((Date.now()-this.startTime)/1e3),n=Math.max(0,this.duration-e);this.saveToStorage(),this.onTick&&this.onTick(n,e),n===10&&this.type.includes("rest")&&this.scheduleEndNotification(n),n<=0&&this.complete()}scheduleEndNotification(e){!this.notificationScheduled&&e===10&&(this.notificationScheduled=!0,QI.scheduleNotification(" Descanso Terminando","Prepare-se para a prxima srie!",10))}complete(){console.log(` Timer ${this.type} completado`),this.stop(),this.onComplete&&this.onComplete()}stop(){console.log(` Parando timer ${this.type}`),this.isRunning=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.storageKey&&localStorage.removeItem(this.storageKey)}pause(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.saveToStorage()}resume(){this.isRunning&&!this.intervalId&&(this.intervalId=setInterval(this.tick,1e3))}saveToStorage(){if(!this.storageKey||!this.isRunning)return;const e={startTime:this.startTime,duration:this.duration,type:this.type,isRunning:this.isRunning,savedAt:Date.now()};try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(n){console.warn("Erro ao salvar timer no localStorage:",n)}}loadFromStorage(e){try{const n=localStorage.getItem(e);if(!n)return null;const r=JSON.parse(n),s=Date.now(),i=24*60*60*1e3;return s-r.savedAt>i?(localStorage.removeItem(e),null):r}catch(n){return console.warn("Erro ao carregar timer do localStorage:",n),null}}handleVisibilityChange(){document.hidden?(console.log(" App foi para background - pausando timer visual"),this.pause()):(console.log(" App voltou para foreground - resumindo timer"),this.checkAndResume())}handlePageShow(e){e.persisted&&(console.log(" Pgina restaurada do cache - verificando timers"),this.checkAndResume())}checkAndResume(){if(!this.isRunning||!this.storageKey)return;const e=Math.floor((Date.now()-this.startTime)/1e3),n=Math.max(0,this.duration-e);n>0?(console.log(` Resumindo timer ${this.type} - ${n}s restantes`),this.resume(),this.tick()):(console.log(` Timer ${this.type} expirou enquanto estava em background`),this.complete())}static recoverTimers(){const e=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith("treinano-"))try{const s=JSON.parse(localStorage.getItem(r));if(s&&s.isRunning){const i=Math.floor((Date.now()-s.startTime)/1e3),o=Math.max(0,s.duration-i);o>0?e.push({key:r,data:s,remaining:o,elapsed:i}):localStorage.removeItem(r)}}catch(s){console.warn("Erro ao recuperar timer:",r,s),localStorage.removeItem(r)}}return e}destroy(){this.stop(),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("pageshow",this.handlePageShow),window.removeEventListener("focus",this.handlePageShow)}}const kB=["Peito","Costas","Pernas","Ombros","Bceps","Trceps","Antebrao","Abdmen","Glteos","Panturrilha","Cardio","Outro"],Di=Sf((t,e)=>({exercises:[],categories:kB,userExercises:[],workoutHistory:[],currentWorkout:null,selectedGroups:[],timer:0,restTimer:null,restTimeBetweenSets:45,restTimeBetweenExercises:90,workoutTimer:null,restTimerInstance:null,loading:!1,error:null,isExerciseRest:!1,createCustomExercise:async(n,r)=>{try{if(console.log(" === INICIANDO CRIAO DE EXERCCIO ==="),console.log(" User ID:",n),console.log(" Dados do exerccio:",r),t({loading:!0}),!n)throw console.error(" User ID no fornecido"),new Error("User ID  obrigatrio");const s=await xp(Mo(kt,"exercises"),{name:r.name,description:r.description||"",category:r.category,imageUrl:r.imageUrl||"",videoUrl:r.videoUrl||"",isCustom:!0,createdBy:n,createdAt:new Date});console.log(" Exerccio criado:",s.id);const i=await xp(Mo(kt,"user_exercises"),{userId:n,exerciseId:s.id,current_weight:r.initialWeight||0,starting_weight:r.initialWeight||0,current_sets:3,current_reps:8,progress_level:0,completed_workouts:0,weight_unit:r.weightUnit||"lbs",createdAt:new Date,updatedAt:new Date});return console.log(" User exercise criado:",i.id),await e().fetchUserExercises(n),t({loading:!1}),console.log(" === EXERCCIO CRIADO COM SUCESSO ==="),s.id}catch(s){throw console.error(" === ERRO AO CRIAR EXERCCIO PERSONALIZADO ==="),console.error(" Erro completo:",s),t({error:s.message,loading:!1}),s}},initializeRestTimes:async n=>{try{const r=await Xs(mn(kt,"profiles",n));if(r.exists()){const s=r.data();t({restTimeBetweenSets:s.restTimeBetweenSets||45,restTimeBetweenExercises:s.restTimeBetweenExercises||90})}}catch(r){console.error("Error initializing rest times:",r),t({restTimeBetweenSets:45,restTimeBetweenExercises:90})}},updateRestTimes:async(n,{betweenSets:r,betweenExercises:s})=>{try{return t({loading:!0}),await Ho(mn(kt,"profiles",n),{restTimeBetweenSets:r,restTimeBetweenExercises:s,updatedAt:new Date}),t({restTimeBetweenSets:r,restTimeBetweenExercises:s,loading:!1}),!0}catch(i){throw console.error("Error updating rest times:",i),t({error:i.message,loading:!1}),i}},startRestTimer:(n=!1)=>{const{restTimerInstance:r,restTimeBetweenSets:s,restTimeBetweenExercises:i}=e(),{soundEnabled:o,vibrationEnabled:a,keepScreenOn:l}=Jf.getState();r&&r.destroy();const u=n?i:s;let d=null;l&&"wakeLock"in navigator&&navigator.wakeLock.request("screen").then(y=>{d=y,console.log("Wake Lock ativado durante timer de descanso")}).catch(y=>{console.warn("No foi possvel ativar Wake Lock:",y)});const h=(y="normal")=>{if(o)try{const g=new Audio("/alert.mp3");g.volume=y==="urgent"?1:.7,y==="urgent"?(g.play(),setTimeout(()=>g.play(),200),setTimeout(()=>g.play(),400)):y==="warning"?(g.play(),setTimeout(()=>g.play(),300)):g.play()}catch(g){console.warn("No foi possvel reproduzir o som de alerta:",g)}},m=(y=[200])=>{if(a&&"vibrate"in navigator)try{if(/iPad|iPhone|iPod/.test(navigator.userAgent)){const b=Array.isArray(y)?y[0]||200:y;navigator.vibrate(b)}else navigator.vibrate(y)}catch(g){console.warn("Vibrao no suportada:",g)}},p=new wy(y=>{t({restTimer:y}),y===10?(h("warning"),m([100,100,100]),ee.info(" 10 segundos restantes!",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,className:"bg-orange-500"})):y===5?(h("urgent"),m([200,100,200,100,200]),ee.warning(" 5 segundos! Prepare-se!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,className:"bg-red-500"})):y<=3&&y>0&&(h("urgent"),m([300]),ee.error(` ${y}!`,{position:"top-center",autoClose:800,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,className:"bg-red-600 text-white font-bold text-xl"}))},()=>{d&&d.release().then(()=>{console.log("Wake Lock liberado")}),h("urgent"),m([500,200,500,200,500]);const y=e();ee.success(y.isExerciseRest?" PRXIMO EXERCCIO! VAMOS L!":" PRXIMA SRIE! FORA!",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,className:"bg-green-500 text-white font-bold"}),t({restTimer:null,restTimerInstance:null,isExerciseRest:!1})});p.start(u,n?"exercise-rest":"set-rest",`treinano-rest-${Date.now()}`),t({restTimer:u,isExerciseRest:n,restTimerInstance:p})},stopRestTimer:()=>{const{restTimerInstance:n}=e();n&&n.destroy(),t({restTimer:null,restTimerInstance:null,isExerciseRest:!1})},formatTimer:(n=null)=>{const r=n!==null?n:e().timer,s=Math.floor(r/60),i=r%60;return`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},fetchUserExercises:async n=>{try{if(console.log(" === INICIANDO BUSCA DE EXERCCIOS (FIREBASE) ==="),console.log(" User ID recebido:",n),t({loading:!0}),!n)throw console.error(" User ID no fornecido"),t({loading:!1}),new Error("User ID  obrigatrio");const r=gp(Mo(kt,"user_exercises"),yp("userId","==",n)),s=await vp(r);console.log(" Documentos encontrados na query:",s.docs.length);const i=[];for(const o of s.docs){const a={id:o.id,...o.data()};console.log(" User Exercise encontrado:",{id:o.id,data:a});const l=await Xs(mn(kt,"exercises",a.exerciseId));if(l.exists()){const u={id:l.id,...l.data()};console.log(" Exercise data encontrado:",u),i.push({...a,exercise:u})}else console.warn(" Exerccio no encontrado:",a.exerciseId)}return i.sort((o,a)=>{var d,h,m,p;const l=((h=(d=o.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))||o.createdAt||new Date(0);return(((p=(m=a.createdAt)==null?void 0:m.toDate)==null?void 0:p.call(m))||a.createdAt||new Date(0))-l}),console.log(" Exerccios encontrados:",i.length),console.log(" Lista completa de exerccios:",i.map(o=>{var a;return{id:o.id,name:(a=o.exercise)==null?void 0:a.name,completedWorkouts:o.completedWorkouts,progressLevel:o.progressLevel}})),t({userExercises:i,loading:!1}),i}catch(r){console.error(" === ERRO AO CARREGAR EXERCCIOS ==="),console.error(" Erro completo:",r);let s=r.message;return r.code==="permission-denied"?s="Erro de permisso. Faa login novamente.":r.code==="unavailable"&&(s="Servio temporariamente indisponvel. Tente novamente."),t({error:s,loading:!1,userExercises:[]}),[]}},fetchWorkoutHistory:async n=>{try{if(console.log(" === INICIANDO BUSCA DE HISTRICO (FIREBASE) ==="),t({loading:!0}),!n)throw new Error("User ID  obrigatrio");const r=gp(Mo(kt,"workout_history"),yp("userId","==",n)),i=(await vp(r)).docs.map(o=>{var a,l;return{id:o.id,...o.data(),start_time:((l=(a=o.data().startTime)==null?void 0:a.toDate)==null?void 0:l.call(a))||o.data().startTime}});return i.sort((o,a)=>{var d,h,m,p;const l=((h=(d=o.startTime)==null?void 0:d.toDate)==null?void 0:h.call(d))||o.startTime||new Date(0);return(((p=(m=a.startTime)==null?void 0:m.toDate)==null?void 0:p.call(m))||a.startTime||new Date(0))-l}),console.log(" Histrico encontrado:",i.length),t({workoutHistory:i,loading:!1}),i}catch(r){console.error(" === ERRO AO CARREGAR HISTRICO ==="),console.error(" Erro completo:",r);let s=r.message;return r.code==="permission-denied"?s="Erro de permisso. Faa login novamente.":r.code==="unavailable"&&(s="Servio temporariamente indisponvel. Tente novamente."),t({error:s,loading:!1,workoutHistory:[]}),[]}},startWorkout:n=>{if(!n||n.length===0)return;console.log("Starting workout for groups:",n);const r={id:crypto.randomUUID(),startTime:new Date,exercises:[],completed:!1},s=new wy((i,o)=>{t({timer:o})},()=>{console.log("Timer de treino completado (muito longo!)")});return s.start(24*60*60,"workout",`treinano-workout-${r.id}`),t({currentWorkout:r,selectedGroups:n,timer:0,workoutTimer:s}),console.log("Workout started, selectedGroups set to:",n),r},addExerciseToWorkout:(n,r)=>{const{currentWorkout:s}=e();if(!s)return;const i={id:crypto.randomUUID(),userExerciseId:n,exerciseData:r,sets:Array(r.current_sets||r.currentSets||3).fill().map(()=>({reps:r.current_reps||r.currentReps||8,weight:r.current_weight||r.currentWeight||0,completed:!1}))};t(o=>({currentWorkout:{...o.currentWorkout,exercises:[...o.currentWorkout.exercises,i]}}))},completeSet:(n,r)=>{const{currentWorkout:s}=e();if(!s)return;const i=[...s.exercises];if(!i[n]||!i[n].sets[r])return;i[n].sets[r].completed=!0;const o=i[n].sets.every(a=>a.completed);t(a=>({currentWorkout:{...a.currentWorkout,exercises:i}})),e().startRestTimer(o)},finishWorkout:async n=>{var r,s;try{const i=e(),{currentWorkout:o,timer:a,timerInterval:l,selectedGroups:u}=i;if(console.log(" === INICIANDO FINALIZAO (FIREBASE) ==="),console.log(" Exerccios no treino atual:",(r=o==null?void 0:o.exercises)==null?void 0:r.map(_=>{var I,O,N,C;return{name:(O=(I=_.exerciseData)==null?void 0:I.exercise)==null?void 0:O.name,userExerciseId:_.userExerciseId,totalSets:(N=_.sets)==null?void 0:N.length,completedSets:(C=_.sets)==null?void 0:C.filter(x=>x.completed).length,sets:_.sets}})),!((s=o==null?void 0:o.exercises)!=null&&s.length))throw new Error("Nenhum exerccio no treino");if(!o.exercises.some(_=>{var I;return(I=_.sets)==null?void 0:I.some(O=>O.completed)}))throw new Error("Complete pelo menos uma srie");t({loading:!0});const{workoutTimer:h}=i;if(h&&h.destroy(),i.stopRestTimer(),!n)throw new Error("User ID  obrigatrio");const m={userId:n,startTime:o.startTime,endTime:new Date,duration:a,exercises:o.exercises,category:u.length===1?u[0]:u.join(", "),createdAt:new Date};console.log(" Salvando treino no Firebase...");const p=await xp(Mo(kt,"workout_history"),m);console.log(" Treino salvo com sucesso:",p.id);const y=o.exercises.filter(_=>{var C,x;const I=((C=_.sets)==null?void 0:C.length)||0,O=((x=_.sets)==null?void 0:x.filter(w=>w.completed).length)||0,N=I>0&&O===I;return console.log(` Exerccio ${_.exerciseData.exercise.name}: ${O}/${I} sries - ${N?"COMPLETO":"INCOMPLETO"}`),console.log(` UserExerciseId: ${_.userExerciseId}`),console.log(" Sets detalhados:",_.sets),N});console.log(` Atualizando progresso de ${y.length} exerccios...`);const g=[],b=y.map(async _=>{try{console.log(` Iniciando atualizao para exerccio: ${_.exerciseData.exercise.name} (ID: ${_.userExerciseId})`),console.log(" Dados do exerccio antes da atualizao:",_.exerciseData);const I=await e().updateExerciseProgress(_.userExerciseId,!0);return console.log(` Progresso atualizado para ${_.exerciseData.exercise.name}:`,I),I!=null&&I.shouldShowProgressionModal&&g.push({userExerciseId:_.userExerciseId,exercise:_.exerciseData.exercise,currentWeight:I.currentWeight,currentReps:I.currentReps,progressLevel:I.progressLevel,weightUnit:_.exerciseData.weightUnit||"lbs"}),{success:!0,exercise:_.exerciseData.exercise.name}}catch(I){return console.error(`Erro ao atualizar ${_.exerciseData.exercise.name}:`,I),{success:!1,exercise:_.exerciseData.exercise.name,error:I}}}),v=await Promise.allSettled(b),T=v.filter(_=>_.status==="fulfilled"&&_.value.success).length;return console.log(` Progresso atualizado: ${T}/${y.length}`),console.log(" Resultados detalhados:",v),console.log(" Exerccios que atingiram 10 treinos:",g),console.log(" Recarregando dados do usurio..."),await Promise.all([e().fetchWorkoutHistory(n),e().fetchUserExercises(n)]),console.log(" Dados recarregados com sucesso"),t({currentWorkout:null,selectedGroups:[],timer:0,workoutTimer:null,loading:!1}),console.log(" === TREINO FINALIZADO COM SUCESSO ==="),{success:!0,workoutId:p.id,progressionSuggestions:g}}catch(i){throw console.error(" === ERRO AO FINALIZAR TREINO ==="),console.error(" Erro:",i.message),t({loading:!1,error:i.message}),i}},cancelWorkout:()=>{const{workoutTimer:n}=e();n&&n.destroy(),e().stopRestTimer(),t({currentWorkout:null,selectedGroups:[],timer:0,workoutTimer:null})},updateExerciseProgress:async(n,r=!0)=>{try{if(console.log(" === INICIANDO ATUALIZAO DE PROGRESSO ==="),console.log(" User Exercise ID:",n),console.log(" Treino completado:",r),!n)return console.warn("No userExerciseId provided"),null;console.log(" Buscando documento no Firebase:",`user_exercises/${n}`);const s=await Xs(mn(kt,"user_exercises",n));if(!s.exists()){console.error(" Documento no encontrado no Firebase:",n),console.error(" Tentando buscar com collection/doc pattern...");const g=gp(Mo(kt,"user_exercises"),yp("userId","==",userId)),b=await vp(g);throw console.log(" Documentos encontrados na busca alternativa:",b.docs.length),b.docs.forEach(v=>{console.log(" Documento encontrado:",{id:v.id,data:v.data()})}),new Error("Exerccio no encontrado")}const i=s.data();console.log(" Dados atuais do exerccio:",i);let{progressLevel:o,completedWorkouts:a,currentWeight:l,currentReps:u,currentSets:d}=i;o=o??0,a=a??0,l=l??0,u=u??8,d=d??3,console.log(" Progresso antes da atualizao:",{progressLevel:o,completedWorkouts:a,currentWeight:l,currentReps:u,currentSets:d});let h=!1;r&&(a+=1,console.log(` Incrementando treinos completados: ${a-1}  ${a}`),a>=10&&(h=!0,console.log(" Atingiu 10 treinos! Evoluindo..."),o<2?(o+=1,o===1?(u=10,console.log(" Evoluiu para nvel 1: 3x10")):o===2&&(u=12,console.log(" Evoluiu para nvel 2: 3x12")),a=0):o===2&&(l+=2.5,o=0,u=8,a=0,console.log(` Evoluiu peso: ${l-2.5}  ${l}kg, voltou para 3x8`))));const m={progressLevel:o,completedWorkouts:a,currentWeight:l,currentReps:u,currentSets:d,updatedAt:new Date};console.log(" Salvando progresso no Firebase:",m),await Ho(mn(kt,"user_exercises",n),m),console.log(" Progresso salvo no Firebase");const p=await Xs(mn(kt,"user_exercises",n));if(p.exists()){const g=p.data();if(console.log(" Dados aps atualizao no Firebase:",{progressLevel:g.progressLevel,completedWorkouts:g.completedWorkouts,currentWeight:g.currentWeight,currentReps:g.currentReps}),g.completed_workouts!==m.completed_workouts)throw console.error(" ERRO: Dados no foram salvos corretamente!"),console.error(" Esperado:",m.completed_workouts),console.error(" Atual:",g.completed_workouts),new Error("Falha ao salvar progresso no Firebase");console.log(" Verificao: Dados salvos corretamente!")}console.log(" === PROGRESSO ATUALIZADO COM SUCESSO ===");const y={progressLevel:o,completedWorkouts:a,currentWeight:l,currentReps:u,currentSets:d,shouldShowProgressionModal:h,exerciseData:i};return console.log(" Resultado final:",y),y}catch(s){throw console.error(" === ERRO AO ATUALIZAR PROGRESSO ==="),console.error(" Erro completo:",s),console.error(" Stack trace:",s.stack),s}},applyProgression:async(n,r)=>{try{console.log(" === APLICANDO PROGRESSO SUGERIDA ==="),console.log(" User Exercise ID:",n),console.log(" Dados da progresso:",r),t({loading:!0});const s={currentWeight:r.newWeight,currentReps:r.newReps,progressLevel:r.newLevel,completedWorkouts:0,updatedAt:new Date};return console.log(" Aplicando progresso:",s),await Ho(mn(kt,"user_exercises",n),s),console.log(" Progresso aplicada com sucesso"),t({loading:!1}),s}catch(s){throw console.error(" Erro ao aplicar progresso:",s),t({error:s.message,loading:!1}),s}},deleteUserExercise:async(n,r)=>{try{t({loading:!0}),await K9(mn(kt,"user_exercises",r)),await e().fetchUserExercises(n),t({loading:!1})}catch(s){throw console.error("Error deleting exercise:",s),t({error:s.message,loading:!1}),s}},updateUserExercise:async(n,r,s)=>{try{t({loading:!0}),await Ho(mn(kt,"user_exercises",r),{...s,updatedAt:new Date}),await e().fetchUserExercises(n),t({loading:!1})}catch(i){throw console.error("Error updating exercise:",i),t({error:i.message,loading:!1}),i}},updateExerciseDetails:async(n,r)=>{try{return t({loading:!0}),await Ho(mn(kt,"exercises",n),{...r,updatedAt:new Date}),t({loading:!1}),!0}catch(s){throw console.error("Error updating exercise details:",s),t({error:s.message,loading:!1}),s}}})),SB="modulepreload",AB=function(t){return"/"+t},Ab={},wo=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=AB(l),l in Ab)return;Ab[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":SB,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function CB(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const u=async(h=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await wo(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;a.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),a.addEventListener("installed",h=>{h.isUpdate||r==null||r()}),a.register({immediate:e}).then(h=>{i?i("/sw.js",h):s==null||s(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}var YI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Cb=me.createContext&&me.createContext(YI),IB=["attr","size","title"];function NB(t,e){if(t==null)return{};var n=PB(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function PB(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hh(){return Hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hh.apply(this,arguments)}function Ib(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ib(Object(n),!0).forEach(function(r){jB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ib(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jB(t,e,n){return e=RB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RB(t){var e=DB(t,"string");return typeof e=="symbol"?e:e+""}function DB(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XI(t){return t&&t.map((e,n)=>me.createElement(e.tag,qh({key:n},e.attr),XI(e.child)))}function ge(t){return e=>me.createElement(OB,Hh({attr:qh({},t.attr)},e),XI(t.child))}function OB(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=NB(t,IB),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),me.createElement("svg",Hh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:qh(qh({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&me.createElement("title",null,i),t.children)};return Cb!==void 0?me.createElement(Cb.Consumer,null,n=>e(n)):e(YI)}function JI(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function LB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function MB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function Kn(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(t)}function Kc(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function VB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function _o(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function za(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function FB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function ZI(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function Wa(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function UB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"},child:[]}]})(t)}function zd(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function $B(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(t)}function eN(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function Tp(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(t)}function Qc(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function BB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"},child:[]},{tag:"polyline",attr:{points:"10 17 15 12 10 7"},child:[]},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"},child:[]}]})(t)}function _y(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function zB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function WB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function Nb(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function Gh(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(t)}function Yr(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function lx(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function HB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function qB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function tN(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function GB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(t)}function Pb(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(t)}function Kh(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}function Dn(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function nN(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function vn(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(t)}function KB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}function QB(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function Ta(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function rN(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(t)}function jb(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},child:[]},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"},child:[]}]})(t)}function Tr(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}function cx(t){return ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}function ft(t){return ge({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M77.492 18.457l-17.726 3.127L69.09 74.47a1630.67 1630.67 0 0 0-15.8 2.54l-6.503-36.89-17.726 3.124 6.49 36.795a1877.847 1877.847 0 0 0-17.196 3.112l3.292 17.696c5.728-1.066 11.397-2.09 17.028-3.084l7.056 40.02 17.727-3.124-7.04-39.93c5.304-.88 10.57-1.725 15.798-2.54l9.777 55.45 17.727-3.126-9.697-54.99c8.483-1.218 16.866-2.338 25.18-3.38 15.54 46.39 34.697 99.995 66.936 134.448C190.86 250.992 192 268 214.56 310 192 348 176 412 167.21 471l-48 6v15H192c16-48 64-144 64-144s48 96 64 144h72.79v-15l-48-6C336 412 320 348 294 310c26-42 24.175-59.585 35.83-89.377 32.25-34.452 51.42-88.075 66.967-134.478 8.314 1.04 16.697 2.16 25.18 3.38l-9.696 54.99 17.728 3.124 9.777-55.45c5.23.815 10.494 1.66 15.8 2.54l-7.042 39.93 17.727 3.125 7.056-40.02c5.63.993 11.3 2.017 17.028 3.083l3.292-17.696c-5.78-1.075-11.507-2.11-17.195-3.113l6.49-36.796-17.727-3.125-6.504 36.89c-5.303-.88-10.57-1.727-15.8-2.54l9.324-52.886-17.726-3.127-9.406 53.35C365.982 63.31 310.982 59.04 256 59.04c-54.98 0-109.983 4.27-169.102 12.767l-9.406-53.35zM256 76.98c35.53 0 71.07 1.83 107.822 5.463-14.082 34.858-38.454 73.504-63.203 101.967C290.293 199.27 274.35 209 256 209c-18.35 0-34.294-9.73-44.62-24.59-24.748-28.463-49.12-67.11-63.202-101.967 36.75-3.633 72.29-5.463 107.822-5.463zM256 97c-20.835 0-39 20.24-39 47s18.165 47 39 47 39-20.24 39-47-18.165-47-39-47z"},child:[]}]})(t)}const YB=()=>{const t=Ci(),{signIn:e,loading:n}=hr(),[r,s]=V.useState(""),[i,o]=V.useState(""),a=async l=>{if(l.preventDefault(),!r||!i){ee.error("Por favor, preencha todos os campos");return}try{await e(r,i),t("/dashboard")}catch(u){ee.error(u.message)}};return c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-b from-dark to-dark-lighter",children:c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx(F.div,{initial:{scale:0},animate:{scale:1,rotate:360},transition:{type:"spring",stiffness:260,damping:20,delay:.2},className:"inline-block",children:c.jsx(ft,{size:60,className:"text-primary mx-auto"})}),c.jsx(F.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-3xl font-bold mt-4 neon-text",children:"TREINANO"}),c.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-light-darker mt-2",children:"Acompanhe seus treinos e evolua"})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"bg-dark-lighter rounded-xl shadow-3d p-6",children:[c.jsx("h2",{className:"text-xl font-bold mb-6 text-center",children:"Entrar na sua conta"}),c.jsxs("form",{onSubmit:a,children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-light-darker mb-1",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(Ta,{className:"text-light-darker"})}),c.jsx("input",{id:"email",type:"email",value:r,onChange:l=>s(l.target.value),className:"input-field pl-10",placeholder:"seu@email.com",required:!0,autoComplete:"email"})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-light-darker mb-1",children:"Senha"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(Qc,{className:"text-light-darker"})}),c.jsx("input",{id:"password",type:"password",value:i,onChange:l=>o(l.target.value),className:"input-field pl-10",placeholder:"",required:!0,autoComplete:"current-password"})]})]}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},type:"submit",disabled:n,className:"btn-primary w-full flex items-center justify-center",children:n?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),c.jsx("span",{children:"Entrando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(BB,{className:"mr-2"}),c.jsx("span",{children:"Entrar"})]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-light-darker",children:["No tem uma conta?"," ",c.jsx(Dt,{to:"/register",className:"text-primary hover:underline",children:"Criar conta"})]})})]})]})})},XB=()=>{const t=Ci(),{signUp:e,loading:n}=hr(),[r,s]=V.useState(""),[i,o]=V.useState(""),[a,l]=V.useState(""),[u,d]=V.useState(""),h=async m=>{if(m.preventDefault(),!r||!i||!a||!u){ee.error("Por favor, preencha todos os campos");return}if(a!==u){ee.error("As senhas no coincidem");return}if(a.length<6){ee.error("A senha deve ter pelo menos 6 caracteres");return}try{await e(i,a,{name:r}),ee.success("Conta criada com sucesso!"),t("/dashboard")}catch(p){ee.error(p.message)}};return c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-b from-dark to-dark-lighter",children:c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx(F.div,{initial:{scale:0},animate:{scale:1,rotate:360},transition:{type:"spring",stiffness:260,damping:20,delay:.2},className:"inline-block",children:c.jsx(ft,{size:60,className:"text-primary mx-auto"})}),c.jsx(F.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-3xl font-bold mt-4 neon-text",children:"TREINANO"}),c.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-light-darker mt-2",children:"Crie sua conta e comece a evoluir"})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"bg-dark-lighter rounded-xl shadow-3d p-6",children:[c.jsx("h2",{className:"text-xl font-bold mb-6 text-center",children:"Criar nova conta"}),c.jsxs("form",{onSubmit:h,children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-light-darker mb-1",children:"Nome"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(Ta,{className:"text-light-darker"})}),c.jsx("input",{id:"name",type:"text",value:r,onChange:m=>s(m.target.value),className:"input-field pl-10",placeholder:"Seu nome",required:!0})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-light-darker mb-1",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(zB,{className:"text-light-darker"})}),c.jsx("input",{id:"email",type:"email",value:i,onChange:m=>o(m.target.value),className:"input-field pl-10",placeholder:"seu@email.com",required:!0})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-light-darker mb-1",children:"Senha"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(Qc,{className:"text-light-darker"})}),c.jsx("input",{id:"password",type:"password",value:a,onChange:m=>l(m.target.value),className:"input-field pl-10",placeholder:"",required:!0})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-light-darker mb-1",children:"Confirmar Senha"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(Qc,{className:"text-light-darker"})}),c.jsx("input",{id:"confirmPassword",type:"password",value:u,onChange:m=>d(m.target.value),className:"input-field pl-10",placeholder:"",required:!0})]})]}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},type:"submit",disabled:n,className:"btn-primary w-full flex items-center justify-center",children:n?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),c.jsx("span",{children:"Criando conta..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(QB,{className:"mr-2"}),c.jsx("span",{children:"Criar Conta"})]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-light-darker",children:["J tem uma conta?"," ",c.jsx(Dt,{to:"/login",className:"text-primary hover:underline",children:"Entrar"})]})})]})]})})},ls=({value:t,max:e,showLabel:n=!0,height:r="h-2",className:s=""})=>{const i=Math.min(Math.max(t/e*100,0),100);return c.jsxs("div",{className:`w-full ${s}`,children:[n&&c.jsxs("div",{className:"flex justify-between text-xs text-light-darker mb-1",children:[c.jsxs("span",{children:[t," de ",e]}),c.jsxs("span",{children:[i.toFixed(0),"%"]})]}),c.jsx("div",{className:`progress-bar ${r}`,children:c.jsx(F.div,{className:"progress-value",initial:{width:0},animate:{width:`${i}%`},transition:{duration:.5,ease:"easeOut"}})})]})},sN=({exercise:t,showProgress:e=!0,onMediaClick:n})=>{if(!t)return null;const r=t.exercise||t,s=t.exercise?t:null;if(!r)return null;const i=()=>{if(!s)return{progressText:"",progressPercentage:0};const{progressLevel:d=0,completedWorkouts:h=0,current_sets:m,current_reps:p,currentSets:y,currentReps:g}=s,T=`${m||y||3}x${p||g||8}`;let _=0;return _=h/10*100,{progressText:T,progressPercentage:_}},{progressText:o,progressPercentage:a}=i(),l=t.id||r.id,u=d=>{r.video_url&&n&&(d.preventDefault(),n(r))};return c.jsx(F.div,{whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"card overflow-hidden",children:c.jsx(Dt,{to:`/exercises/${l}`,className:"block",onClick:u,children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"relative",children:[r.image_url?c.jsx("img",{src:r.image_url,alt:r.name,className:"w-16 h-16 object-cover rounded-lg mr-4"}):c.jsx("div",{className:"w-16 h-16 bg-dark-medium rounded-lg mr-4 flex items-center justify-center",children:c.jsx(Kc,{className:"text-primary",size:24})}),r.video_url&&c.jsx("div",{className:"absolute top-1 right-5 bg-primary rounded-full p-1",children:c.jsx(rN,{className:"text-white",size:12})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-lg",children:r.name}),c.jsx("p",{className:"text-light-darker text-sm truncate",children:r.description||"Sem descrio"}),e&&s&&c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsx("span",{className:"text-secondary font-medium",children:o}),c.jsxs("span",{className:"text-light-darker",children:[s.completedWorkouts||0,"/10 treinos"]})]}),c.jsx(ls,{value:s.completedWorkouts||0,max:10,showLabel:!1}),c.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[c.jsxs("span",{className:"text-light-darker",children:[s.currentWeight||s.current_weight||0," ",s.weightUnit||s.weight_unit||"lbs"]}),c.jsxs("span",{className:"text-light-darker",children:[Math.round((s.completedWorkouts||0)/10*100),"% completo"]})]}),s.updatedAt&&c.jsxs("p",{className:"text-xs text-light-darker mt-1",children:["ltima atualizao: ",(()=>{var y,g;const d=((g=(y=s.updatedAt)==null?void 0:y.toDate)==null?void 0:g.call(y))||new Date(s.updatedAt),m=Math.abs(new Date-d),p=Math.ceil(m/(1e3*60*60*24));return p===1?"Hoje":p===2?"Ontem":p<=7?`${p-1} dias atrs`:d.toLocaleDateString("pt-BR")})()]})]})]}),c.jsx(ZI,{size:20,className:"text-light-darker ml-2"})]})})})},JB=({userExercises:t=[],workoutHistory:e=[]})=>{const[n,r]=V.useState([]);V.useEffect(()=>{s()},[t,e]);const s=()=>{const a=[];t.forEach(p=>{const{progress_level:y,completed_workouts:g,current_weight:b,exercise:v}=p;y===2&&g>=8&&a.push({id:`weight-increase-${p.id}`,type:"weight-increase",title:"Hora de Aumentar o Peso!",description:`${v.name}: Voc est dominando 3x12. Que tal aumentar para ${b+2.5}kg e voltar para 3x8?`,priority:"high",icon:vn,color:"#28A745",action:"Aumentar Peso",exerciseId:p.id}),g>=7&&g<10&&a.push({id:`progression-${p.id}`,type:"progression",title:"Quase Evoluindo!",description:`${v.name}: Faltam apenas ${10-g} treinos para o prximo nvel!`,priority:"medium",icon:Dn,color:"#FD7E14",action:"Continuar Treinando"})});const l=e.slice(0,10);if(l.length>=5){const p=l.reduce((g,b)=>g+(b.duration||0),0)/l.length;l.slice(0,3).reduce((g,b)=>g+(b.duration||0),0)/3<p*.8&&a.push({id:"plateau-warning",type:"plateau",title:"Possvel Plat Detectado",description:"Seus treinos esto mais curtos. Considere variar exerccios ou aumentar a intensidade.",priority:"high",icon:LB,color:"#DC3545",action:"Ver Sugestes"})}const u=e[0];if(u){const p=Math.floor((new Date-new Date(u.start_time))/864e5);p>=3&&a.push({id:"rest-reminder",type:"rest",title:"Hora de Voltar aos Treinos!",description:`Voc no treina h ${p} dias. Que tal retomar hoje?`,priority:"medium",icon:cx,color:"#FF4500",action:"Iniciar Treino"})}const d=e.slice(0,5).map(p=>p.category).filter(Boolean),h=new Set(d);if(d.length>=3&&h.size===1&&a.push({id:"variety-suggestion",type:"variety",title:"Varie Seus Treinos",description:`Voc tem treinado muito ${Array.from(h)[0]}. Que tal treinar outros grupos musculares?`,priority:"low",icon:ft,color:"#6F42C1",action:"Ver Exerccios"}),e.length>=10){const p=e.slice(0,5),y=e.slice(5,10),g=p.reduce((v,T)=>v+(T.duration||0),0)/5,b=y.reduce((v,T)=>v+(T.duration||0),0)/5;g>b*1.2&&a.push({id:"performance-improvement",type:"performance",title:"Performance Melhorando!",description:"Seus treinos esto mais longos e intensos. Continue assim!",priority:"low",icon:vn,color:"#28A745",action:"Ver Progresso"})}const m={high:3,medium:2,low:1};a.sort((p,y)=>m[y.priority]-m[p.priority]),r(a.slice(0,5))},i=a=>{switch(a){case"high":return"border-red-500";case"medium":return"border-yellow-500";case"low":return"border-green-500";default:return"border-dark-medium"}},o=a=>{switch(a.type){}};return n.length===0?c.jsxs("div",{className:"card text-center py-8",children:[c.jsx(Dn,{className:"text-light-darker mx-auto mb-4",size:48}),c.jsx("p",{className:"text-light-darker",children:"Nenhuma sugesto no momento"}),c.jsx("p",{className:"text-sm text-light-darker mt-2",children:"Continue treinando para receber sugestes personalizadas"})]}):c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx(Dn,{className:"text-primary mr-2",size:24}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:"Sugestes Inteligentes"}),c.jsx("p",{className:"text-sm text-light-darker",children:"Baseadas no seu progresso e histrico"})]})]}),c.jsx("div",{className:"space-y-4",children:n.map((a,l)=>{const u=a.icon;return c.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.1},className:`card border-l-4 ${i(a.priority)}`,children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-4 flex-shrink-0",style:{backgroundColor:`${a.color}20`,color:a.color},children:c.jsx(u,{size:20})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold",children:a.title}),c.jsx("p",{className:"text-light-darker text-sm mt-1",children:a.description}),c.jsx("div",{className:"flex items-center mt-2",children:c.jsxs("span",{className:`
                          text-xs px-2 py-1 rounded-full
                          ${a.priority==="high"?"bg-red-500 bg-opacity-20 text-red-400":""}
                          ${a.priority==="medium"?"bg-yellow-500 bg-opacity-20 text-yellow-400":""}
                          ${a.priority==="low"?"bg-green-500 bg-opacity-20 text-green-400":""}
                        `,children:[a.priority==="high"?"Alta Prioridade":"",a.priority==="medium"?"Mdia Prioridade":"",a.priority==="low"?"Baixa Prioridade":""]})})]})]}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(a),className:"px-4 py-2 bg-dark-medium hover:bg-dark-light rounded-lg text-sm font-medium transition-colors",style:{color:a.color},children:a.action})]})},a.id)})})]})},ZB=({userExercises:t=[],workoutHistory:e=[],userId:n})=>{const[r,s]=V.useState([]),[i,o]=V.useState({});V.useEffect(()=>{a()},[t,e]);const a=()=>{const p=new Date,y=new Date(p);y.setDate(p.getDate()-p.getDay()),y.setHours(0,0,0,0);const g=new Date(y);g.setDate(y.getDate()+6),g.setHours(23,59,59,999);const b=e.filter(T=>{const _=new Date(T.start_time);return _>=y&&_<=g}),v=[{id:"weekly-frequency",title:"Frequncia Semanal",description:"Treine 4 vezes esta semana",type:"frequency",target:4,current:b.length,timeframe:"semanal",reward:100,icon:Dn,color:"#FF4500",endDate:g},{id:"weekly-time",title:"Tempo de Treino",description:"Acumule 3 horas de treino esta semana",type:"time",target:180,current:Math.floor(b.reduce((T,_)=>T+(_.duration||0),0)/60),timeframe:"semanal",reward:150,icon:Wa,color:"#4A90E2",endDate:g},{id:"muscle-variety",title:"Variedade Muscular",description:"Treine 5 grupos musculares diferentes",type:"variety",target:5,current:new Set(b.map(T=>T.category).filter(Boolean)).size,timeframe:"semanal",reward:120,icon:ft,color:"#28A745",endDate:g},{id:"consistency",title:"Consistncia",description:"Treine 3 dias consecutivos",type:"streak",target:3,current:l(),timeframe:"contnuo",reward:200,icon:vn,color:"#6F42C1",endDate:null},{id:"monthly-exercises",title:"Explorador Mensal",description:"Use 15 exerccios diferentes este ms",type:"exercises",target:15,current:u(),timeframe:"mensal",reward:300,icon:Kn,color:"#FD7E14",endDate:d()}];s(v)},l=()=>{if(e.length===0)return 0;const p=[...e].sort((v,T)=>new Date(T.start_time)-new Date(v.start_time));let y=0,g=new Date;if(g.setHours(0,0,0,0),p.filter(v=>{const T=new Date(v.start_time);return T.setHours(0,0,0,0),T.getTime()===g.getTime()}).length>0)y=1;else{if(g.setDate(g.getDate()-1),p.filter(T=>{const _=new Date(T.start_time);return _.setHours(0,0,0,0),_.getTime()===g.getTime()}).length===0)return 0;y=1}for(let v=1;v<30&&(g.setDate(g.getDate()-1),p.filter(_=>{const I=new Date(_.start_time);return I.setHours(0,0,0,0),I.getTime()===g.getTime()}).length>0);v++)y++;return y},u=()=>{const p=new Date,y=new Date(p.getFullYear(),p.getMonth(),1),g=e.filter(v=>new Date(v.start_time)>=y),b=new Set;return g.forEach(v=>{var T;(T=v.exercises)==null||T.forEach(_=>{var O,N;const I=(N=(O=_.exerciseData)==null?void 0:O.exercise)==null?void 0:N.name;I&&b.add(I)})}),b.size},d=()=>{const p=new Date;return new Date(p.getFullYear(),p.getMonth()+1,0,23,59,59,999)},h=p=>{if(!p)return"Contnuo";const g=p-new Date;if(g<=0)return"Expirado";const b=Math.floor(g/(1e3*60*60*24)),v=Math.floor(g%(1e3*60*60*24)/(1e3*60*60));return b>0?`${b}d ${v}h`:`${v}h`},m=p=>{const y=r.find(g=>g.id===p);y&&y.current>=y.target&&(ee.success(` Desafio completado! +${y.reward} XP`,{position:"top-center",autoClose:5e3}),s(g=>g.map(b=>b.id===p?{...b,completed:!0}:b)))};return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Dn,{className:"text-primary mr-2",size:24}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:"Desafios"}),c.jsx("p",{className:"text-sm text-light-darker",children:"Complete desafios e ganhe XP"})]})]}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"p-2 rounded-full bg-dark-medium hover:bg-dark-light transition-colors",children:c.jsx(lx,{size:20})})]}),c.jsx("div",{className:"space-y-4",children:r.map((p,y)=>{Math.min(p.current/p.target*100,100);const g=p.current>=p.target,b=p.icon;return c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},className:`
                card relative overflow-hidden
                ${g?"border border-primary bg-gradient-to-r from-primary/10 to-secondary/10":""}
              `,children:[g&&c.jsx("div",{className:"absolute inset-0 opacity-5",children:c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-secondary"})}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-4",style:{backgroundColor:`${p.color}20`,color:p.color},children:c.jsx(b,{size:24})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-lg",children:p.title}),c.jsx("p",{className:"text-light-darker text-sm",children:p.description}),c.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[c.jsx("span",{className:"text-xs text-light-darker",children:p.timeframe}),p.endDate&&c.jsxs("span",{className:"text-xs text-secondary",children:[h(p.endDate)," restantes"]})]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Recompensa"}),c.jsxs("div",{className:"font-bold text-primary",children:["+",p.reward," XP"]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[c.jsx("span",{children:"Progresso"}),c.jsxs("span",{className:"font-medium",style:{color:p.color},children:[p.current," / ",p.target]})]}),c.jsx(ls,{value:p.current,max:p.target,showLabel:!1})]}),g&&!p.completed&&c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>m(p.id),className:"w-full btn-primary flex items-center justify-center",children:[c.jsx(Kn,{className:"mr-2"}),"Resgatar Recompensa"]}),p.completed&&c.jsx("div",{className:"w-full bg-dark-medium text-light-darker py-2 px-4 rounded-lg text-center",children:" Desafio Completado"}),!g&&c.jsxs("div",{className:"text-center text-light-darker text-sm",children:[p.target-p.current," restantes para completar"]})]})]},p.id)})}),r.length===0&&c.jsxs("div",{className:"card text-center py-8",children:[c.jsx(Dn,{className:"text-light-darker mx-auto mb-4",size:48}),c.jsx("p",{className:"text-light-darker",children:"Nenhum desafio disponvel"}),c.jsx("p",{className:"text-sm text-light-darker mt-2",children:"Complete alguns treinos para desbloquear desafios"})]})]})},e7=({user:t,workoutHistory:e=[],userExercises:n=[]})=>{const[r,s]=V.useState(null);V.useEffect(()=>{t&&i()},[t,e,n]);const i=()=>{var b;const u=t.profile||{},d=u.username||t.displayName||((b=t.user_metadata)==null?void 0:b.name)||"Atleta",h=new Date,p=Math.floor((h-new Date(h.getFullYear(),0,0))/(1e3*60*60*24))%100,y=o(u,e,n),g=a(d,y,p);s(g)},o=(u,d,h)=>{const m=new Date,p=m.getHours(),y=new Date;y.setHours(0,0,0,0);let g="dia";p>=5&&p<12?g="manha":p>=12&&p<18?g="tarde":p>=18&&p<22?g="noite":g="madrugada";const b=d[0];let v=0,T=!1;if(b){const N=new Date(b.start_time);N.setHours(0,0,0,0),v=Math.floor((m-N)/(1e3*60*60*24)),T=N.getTime()===y.getTime()}const _=d.length,I=h.filter(N=>(N.completed_workouts||N.completedWorkouts||0)>=8).length;let O=0;if(d.length>0){const N=[...d].sort((x,w)=>new Date(w.start_time)-new Date(x.start_time));let C=new Date(y);C.setHours(0,0,0,0);for(const x of N){const w=new Date(x.start_time);if(w.setHours(0,0,0,0),w.getTime()===C.getTime())O++,C.setDate(C.getDate()-1);else if(w.getTime()===C.getTime())O++,C.setDate(C.getDate()-1);else break}}return{timeOfDay:g,daysSinceLastWorkout:v,trainedToday:T,totalWorkouts:_,exercisesNearProgression:I,currentStreak:O,goal:u.goal,motivation:u.motivation,experienceLevel:u.experience_level,preferredTime:u.preferred_time,favoriteExercises:u.favorite_exercises||[],weeklyGoal:u.weekly_goal||3,isWeekend:m.getDay()===0||m.getDay()===6}},a=(u,d,h)=>{const{timeOfDay:m,daysSinceLastWorkout:p,trainedToday:y,totalWorkouts:g,exercisesNearProgression:b,currentStreak:v,goal:T,motivation:_,experienceLevel:I,preferredTime:O,favoriteExercises:N,weeklyGoal:C,isWeekend:x}=d,w={manha:["Bom dia","Ol","E a","Oi"],tarde:["Boa tarde","Ol","E a","Oi"],noite:["Boa noite","Ol","E a","Oi"],madrugada:["Ol","E a","Oi","Salve"]},k=w[m][h%w[m].length];let j="",P=Pb,S="#FF4500";if(p>=7){const M=[`${k}, ${u}!  Sentimos sua falta! Que tal voltarmos aos treinos hoje?`,`${k}, ${u}!  J faz ${p} dias... Seu corpo est esperando por voc!`,`${k}, ${u}!  Hora de quebrar essa pausa e voltar mais forte!`,`${k}, ${u}!  Seus msculos esto com saudade do treino!`];j=M[h%M.length],P=cx,S="#DC3545"}else if(b>0){const M=[`${k}, ${u}!  Voc tem ${b} exerccios quase evoluindo! Vamos l!`,`${k}, ${u}!  Est quase na hora de aumentar o peso em alguns exerccios!`,`${k}, ${u}!  Seus msculos esto prontos para o prximo nvel!`,`${k}, ${u}!  A evoluo est batendo na porta!`];j=M[h%M.length],P=vn,S="#28A745"}else if(v>=7){const M=[`${k}, ${u}!  ${v} dias consecutivos! Voc  imparvel!`,`${k}, ${u}!  Que sequncia incrvel! Continue assim!`,`${k}, ${u}!  Sua dedicao  inspiradora!`,`${k}, ${u}!  Voc est brilhando com essa consistncia!`];j=M[h%M.length],P=Kn,S="#FD7E14"}else if(T){const M={perder_peso:[`${k}, ${u}!  Cada treino te aproxima do seu peso ideal!`,`${k}, ${u}!  Queimando calorias e construindo fora!`,`${k}, ${u}!  Seu corpo est se transformando a cada dia!`],ganhar_massa:[`${k}, ${u}!  Hora de construir msculos! Vamos crescer!`,`${k}, ${u}!  Cada rep  um tijolo na construo do seu fsico!`,`${k}, ${u}!  Seus msculos esto pedindo mais desafio!`],definir:[`${k}, ${u}!  Esculpindo o corpo dos seus sonhos!`,`${k}, ${u}!  Cada treino define mais sua silhueta!`,`${k}, ${u}!  Lapidando seu fsico como uma obra de arte!`],forca:[`${k}, ${u}!  Hora de mostrar sua fora!`,`${k}, ${u}!  Voc est ficando mais forte a cada dia!`,`${k}, ${u}!  Quebre seus prprios recordes hoje!`],resistencia:[`${k}, ${u}!  Sua resistncia est melhorando!`,`${k}, ${u}!  Cada treino aumenta sua energia!`,`${k}, ${u}!  Voc est carregando suas baterias!`],saude:[`${k}, ${u}!  Investindo na sua sade  o melhor presente!`,`${k}, ${u}!  Seu corpo agradece cada movimento!`,`${k}, ${u}!  Sade em primeiro lugar!`]},B=M[T]||M.saude;j=B[h%B.length],P=Dn,S="#4A90E2"}else if(_){const M={saude:[`${k}, ${u}!  Cuidando da sua sade com cada treino!`,`${k}, ${u}!  Seu bem-estar  prioridade!`],estetica:[`${k}, ${u}!  Voc est ficando mais bonito(a) a cada dia!`,`${k}, ${u}!  Esculpindo o corpo dos seus sonhos!`],forca:[`${k}, ${u}!  Sentindo-se mais forte hoje?`,`${k}, ${u}!  Sua fora interior reflete no exterior!`],energia:[`${k}, ${u}!  Carregando as energias para o dia!`,`${k}, ${u}!  Mais energia, mais vida!`],autoestima:[`${k}, ${u}!  Voc  incrvel e merece se sentir assim!`,`${k}, ${u}!  Sua confiana cresce a cada treino!`],desafio:[`${k}, ${u}!  Pronto para superar seus limites?`,`${k}, ${u}!  Cada desafio te torna mais forte!`]},B=M[_]||M.saude;j=B[h%B.length],P=$B,S="#E91E63"}else if(O&&O===m.replace("_cedo","")){const M=[`${k}, ${u}!  Seu horrio favorito chegou! Hora de treinar!`,`${k}, ${u}!  O momento perfeito para o seu treino!`,`${k}, ${u}!  Energia mxima no seu horrio preferido!`];j=M[h%M.length],P=Kh,S="#FFC107"}else if(N.length>0){const M=N[h%N.length],B=[`${k}, ${u}!  Que tal um ${M} hoje?`,`${k}, ${u}!  Hora de arrasar no ${M}!`,`${k}, ${u}!  ${M} te espera!`];j=B[h%B.length],P=ft,S="#FF4500"}else{const M=[`${k}, ${u}!  Hoje  um timo dia para treinar!`,`${k}, ${u}!  Sua jornada fitness continua!`,`${k}, ${u}!  Vamos fazer acontecer!`,`${k}, ${u}!  Cada treino te aproxima dos seus objetivos!`,`${k}, ${u}!  Voc  mais forte do que imagina!`,`${k}, ${u}!  Hora de superar seus limites!`,`${k}, ${u}!  Transforme suor em conquistas!`,`${k}, ${u}!  Champions train, others complain!`,`${k}, ${u}!  Sua energia positiva contagia!`,`${k}, ${u}!  Foco, fora e f!`];j=M[h%M.length],P=Pb,S="#4A90E2"}if(d.isWeekend&&p===0){const M=[`${k}, ${u}!  Fim de semana produtivo! Que tal um treino?`,`${k}, ${u}!  Fins de semana so perfeitos para focar em voc!`,`${k}, ${u}!  Weekend warrior mode ON!`];j=M[h%M.length],P=Kh,S="#FFC107"}return{text:j,icon:P,color:S,context:{timeOfDay:m,daysSinceLastWorkout:p,totalWorkouts:g,currentStreak:d.currentStreak}}};if(!r)return null;const l=r.icon;return c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"card mb-6 relative overflow-hidden",style:{background:`linear-gradient(135deg, ${r.color}15 0%, ${r.color}05 100%)`,borderLeft:`4px solid ${r.color}`},children:[c.jsx("div",{className:"absolute top-0 right-0 opacity-5",children:c.jsx(l,{size:120,style:{color:r.color}})}),c.jsx("div",{className:"relative z-10",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-4 flex-shrink-0",style:{backgroundColor:`${r.color}20`},children:c.jsx(l,{size:24,style:{color:r.color}})}),c.jsxs("div",{className:"flex-1",children:[c.jsx(F.p,{className:"text-lg font-medium leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:r.text}),c.jsxs("div",{className:"flex items-center mt-3 space-x-4 text-xs text-light-darker",children:[r.context.currentStreak>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(vn,{className:"mr-1",size:12}),c.jsxs("span",{children:[r.context.currentStreak," dias consecutivos"]})]}),r.context.totalWorkouts>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(JI,{className:"mr-1",size:12}),c.jsxs("span",{children:[r.context.totalWorkouts," treinos totais"]})]}),r.context.trainedToday&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(Kn,{className:"mr-1",size:12}),c.jsx("span",{children:"Treinou hoje!"})]})]})]})]})})]})},t7=["Peito","Costas","Pernas","Ombros","Bceps","Trceps","Antebrao","Abdmen","Glteos","Panturrilha","Cardio","Outro"],n7=()=>{var O,N,C,x,w,k,j;const t=Ci(),{user:e}=hr(),{fetchUserExercises:n,fetchWorkoutHistory:r,userExercises:s,workoutHistory:i,startWorkout:o,loading:a}=Di(),[l,u]=V.useState({totalWorkouts:0,totalExercises:0,totalTime:0,streakDays:0}),[d,h]=V.useState(!1),[m,p]=V.useState([]),y=P=>{p(S=>S.includes(P)?S.filter(M=>M!==P):[...S,P])};V.useEffect(()=>{e&&(console.log(" Dashboard: Carregando dados do usurio..."),n(e.uid),r(e.uid))},[e]),V.useEffect(()=>{if(i.length>0){const P=i.length,S=s.length,M=i.reduce((U,z)=>U+(z.duration||0),0);let B=0;const D=new Date;D.setHours(0,0,0,0);const R=i.map(U=>{const z=new Date(U.start_time);return z.setHours(0,0,0,0),z.getTime()}).sort((U,z)=>z-U),$=D.getTime();if(R[0]===$){B=1;for(let U=1;U<R.length;U++){const z=new Date(D);if(z.setDate(D.getDate()-U),z.setHours(0,0,0,0),R.includes(z.getTime()))B++;else break}}u({totalWorkouts:P,totalExercises:S,totalTime:M,streakDays:B})}},[i,s]);const g=()=>{h(!0)},b=()=>{if(m.length===0){ee.error("Selecione pelo menos um grupo muscular");return}o(m),h(!1);const P=m.length===1?m[0]:`${m.length} grupos`;ee.success(`Treino de ${P} iniciado!`),p([]),t("/workout")},v=()=>{const P=Math.floor(l.totalTime/3600),S=Math.floor(l.totalTime%3600/60);return P>0?`${P}h ${S}m`:`${S}m`},T=i.slice(0,3),_=[...s].sort((P,S)=>{const M=new Date(P.updated_at||P.created_at||0),B=new Date(S.updated_at||S.created_at||0);return B-M!==0?B-M:P.progress_level!==S.progress_level?S.progress_level-P.progress_level:S.completed_workouts-P.completed_workouts}).slice(0,3),I=[...s].sort((P,S)=>P.progress_level!==S.progress_level?S.progress_level-P.progress_level:S.completed_workouts-P.completed_workouts).slice(0,3);return c.jsxs("div",{className:"space-y-6",children:[c.jsx(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden mr-4 border-2 border-primary",children:(O=e==null?void 0:e.profile)!=null&&O.avatar_url?c.jsx("img",{src:e.profile.avatar_url,alt:"Foto do perfil",className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full bg-primary bg-opacity-20 flex items-center justify-center",children:c.jsx("span",{className:"text-primary font-bold text-xl",children:(((N=e==null?void 0:e.profile)==null?void 0:N.username)||(e==null?void 0:e.displayName)||((C=e==null?void 0:e.user_metadata)==null?void 0:C.name)||((x=e==null?void 0:e.email)==null?void 0:x.split("@")[0])||"A").charAt(0).toUpperCase()})})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold",children:((w=e==null?void 0:e.profile)==null?void 0:w.username)||(e==null?void 0:e.displayName)||((k=e==null?void 0:e.user_metadata)==null?void 0:k.name)||"Dashboard"}),c.jsx("p",{className:"text-light-darker",children:"Acompanhe seu progresso e estatsticas"})]})]})}),c.jsx(e7,{user:e,workoutHistory:i,userExercises:s}),c.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},className:"bg-primary rounded-xl p-8 text-center shadow-3d",children:[c.jsx(F.div,{animate:{y:[0,-10,0],transition:{duration:2,repeat:1/0}},className:"mb-4",children:c.jsx(ft,{className:"text-white mx-auto",size:64})}),c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Pronto para treinar?"}),c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:g,className:"bg-white text-primary font-bold py-4 px-8 rounded-lg shadow-md text-lg flex items-center justify-center mx-auto",children:[c.jsx(ft,{className:"mr-2",size:24}),"Iniciar Treino"]})]}),c.jsx(Mt,{children:d&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>h(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md",onClick:P=>P.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Selecione os Grupos Musculares"}),c.jsx("p",{className:"text-sm text-light-darker mb-4",children:"Voc pode selecionar mltiplos grupos para um treino mais completo"}),c.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:t7.map(P=>c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>y(P),className:`p-3 rounded-lg text-center transition-all ${m.includes(P)?"bg-primary text-white":"bg-dark-light text-light-darker hover:bg-dark-medium"}`,children:[P,m.includes(P)&&c.jsx("div",{className:"mt-1 text-xs",children:" Selecionado"})]},P))}),m.length>0&&c.jsxs("div",{className:"mb-4 p-3 bg-dark-light rounded-lg",children:[c.jsx("p",{className:"text-sm text-light-darker mb-2",children:"Grupos selecionados:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(P=>c.jsx("span",{className:"px-2 py-1 bg-primary text-white text-xs rounded-full",children:P},P))})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:b,className:"flex-1 btn-primary",disabled:m.length===0,children:"Iniciar Treino"})]})]})})}),c.jsxs(F.div,{className:"grid grid-cols-2 gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[T.length>0&&c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.25},className:"card mb-6 border border-primary bg-gradient-to-r from-primary/10 to-secondary/10 col-span-2",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-4",children:c.jsx(ft,{className:"text-primary",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:"ltimo Treino"}),c.jsx("p",{className:"text-light-darker text-sm",children:(()=>{const P=T[0],S=new Date(P.start_time),B=Math.abs(new Date-S),D=Math.ceil(B/(1e3*60*60*24));let R="";return D===1?R="Hoje":D===2?R="Ontem":D<=7?R=`${D-1} dias atrs`:R=S.toLocaleDateString("pt-BR"),R})()})]})]}),c.jsxs("div",{className:"bg-dark-light p-3 rounded-lg",children:[c.jsx("div",{className:"text-center mb-2",children:c.jsx("div",{className:"text-xl font-bold text-primary",children:T[0].category||"Treino"})}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Durao"}),c.jsx("div",{className:"font-bold text-secondary",children:(()=>{const P=Math.floor((T[0].duration||0)/60),S=(T[0].duration||0)%60;return`${P}:${S.toString().padStart(2,"0")}`})()})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Exerccios"}),c.jsx("div",{className:"font-bold text-secondary",children:((j=T[0].exercises)==null?void 0:j.length)||0})]})]})]})]})}),c.jsx(F.div,{className:"card",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(JI,{className:"text-primary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"Treinos"}),c.jsx("p",{className:"text-xl font-bold",children:l.totalWorkouts})]})]})}),c.jsx(F.div,{className:"card",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(ft,{className:"text-secondary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"Exerccios"}),c.jsx("p",{className:"text-xl font-bold",children:l.totalExercises})]})]})}),c.jsx(F.div,{className:"card",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(Wa,{className:"text-primary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"Tempo Total"}),c.jsx("p",{className:"text-xl font-bold",children:v()})]})]})}),c.jsx(F.div,{className:"card",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(vn,{className:"text-secondary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"Sequncia"}),c.jsxs("p",{className:"text-xl font-bold",children:[l.streakDays," dias"]})]})]})})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Treinos Recentes"}),i.length>3&&c.jsx(Dt,{to:"/profile",className:"text-primary text-sm",children:"Ver todos"})]}),T.length>0?c.jsx("div",{className:"space-y-3",children:T.map(P=>{var z;const S=new Date(P.start_time),M=S.toLocaleDateString("pt-BR"),B=S.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),D=Math.floor(P.duration/60),R=P.duration%60,$=`${D}:${R.toString().padStart(2,"0")}`,U=((z=P.exercises)==null?void 0:z.length)||0;return c.jsx(F.div,{className:"card",whileHover:{scale:1.02},transition:{duration:.2},children:c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-medium flex items-center justify-center mr-3",children:c.jsx(_o,{className:"text-primary",size:18})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-medium",children:["Treino em ",M]}),c.jsxs("p",{className:"text-sm text-light-darker",children:[B,"  ",$,"  ",U," exerccios"]})]})]})})},P.id)})}):c.jsxs("div",{className:"card text-center py-6",children:[c.jsx("p",{className:"text-light-darker",children:"Nenhum treino registrado ainda"}),c.jsx(Dt,{to:"/workout",className:"text-primary block mt-2",children:"Comece seu primeiro treino"})]})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Exerccios Recentes"}),c.jsx(Dt,{to:"/exercises",className:"text-primary text-sm",children:"Ver todos"})]}),_.length>0?c.jsx("div",{className:"space-y-3",children:_.map((P,S)=>c.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*S},children:c.jsx(sN,{exercise:P,showProgress:!0})},P.id))}):c.jsxs("div",{className:"card text-center py-6",children:[c.jsx("p",{className:"text-light-darker",children:"Nenhum exerccio adicionado"}),c.jsx(Dt,{to:"/exercises",className:"text-primary block mt-2",children:"Adicionar exerccios"})]}),c.jsx(Dt,{to:"/exercises",children:c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},className:"btn-secondary w-full mt-4 flex items-center justify-center",children:[c.jsx(Yr,{className:"mr-2"}),"Adicionar Exerccio"]})})]}),I.length>0&&c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Maior Progresso"}),c.jsx(Dt,{to:"/exercises",className:"text-primary text-sm",children:"Ver todos"})]}),c.jsx("div",{className:"space-y-3",children:I.map((P,S)=>{const{progressLevel:M,completedWorkouts:B}=P;let D="",R="";return M===0?(D="3x8",R="3x10"):M===1?(D="3x10",R="3x12"):M===2&&(D="3x12",R="Aumento de peso"),c.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*S},className:"card",children:c.jsx(Dt,{to:`/exercises/${P.id}`,className:"block",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"relative",children:[P.exercise.image_url?c.jsx("img",{src:P.exercise.image_url,alt:P.exercise.name,className:"w-16 h-16 object-cover rounded-lg mr-4"}):c.jsx("div",{className:"w-16 h-16 bg-dark-medium rounded-lg mr-4 flex items-center justify-center",children:c.jsx(ft,{className:"text-primary",size:24})}),c.jsx("div",{className:"absolute -top-2 -right-2 bg-primary text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold",children:M+1})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-lg",children:P.exercise.name}),c.jsxs("p",{className:"text-light-darker text-sm",children:[P.exercise.category,"  ",P.currentWeight," ",P.weightUnit||"lbs"]}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsxs("span",{className:"text-secondary font-medium",children:["Nvel ",M+1,": ",D]}),c.jsxs("span",{className:"text-light-darker",children:[B,"/10 treinos"]})]}),c.jsx(ls,{value:B,max:10,showLabel:!1}),B>=8&&c.jsxs("p",{className:"text-xs text-primary mt-1 font-medium",children:[" Prximo: ",R]})]})]}),c.jsx(vn,{size:20,className:"text-secondary ml-2"})]})})},P.id)})})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.6},className:"grid grid-cols-2 gap-4",children:[c.jsx(Dt,{to:"/exercises",children:c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},className:"btn-secondary w-full flex items-center justify-center py-4",children:[c.jsx(Yr,{className:"mr-2"}),"Adicionar Exerccio"]})}),c.jsx(Dt,{to:"/analytics",children:c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},className:"bg-dark-light text-light hover:bg-dark-medium w-full flex items-center justify-center py-4 rounded-lg font-medium transition-colors",children:[c.jsx(vn,{className:"mr-2"}),"Analytics"]})})]}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.7},children:c.jsx(JB,{userExercises:s,workoutHistory:i})}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.8},children:c.jsx(ZB,{userExercises:s,workoutHistory:i,userId:e==null?void 0:e.uid})})]})};function r7(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function iN(t,e){return new Promise(function(n,r){let s;return s7(t).then(function(i){try{return s=i,n(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const s7=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:s}})=>{const i=new DataView(s);let o=0;if(i.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=i.getUint16(o);if(a===65498)break;const l=i.getUint16(o+2);if(a===65505&&i.getUint32(o+4)===1165519206){const u=o+10;let d;switch(i.getUint16(u)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(i.getUint16(u+2,d)!==42)return n("TIFF header contains invalid version");const h=i.getUint32(u+4,d),m=u+h+2+12*i.getUint16(u+h,d);for(let p=u+h+2;p<m;p+=12)if(i.getUint16(p,d)==274){if(i.getUint16(p+2,d)!==3)return n("Orientation data type is invalid");if(i.getUint32(p+4,d)!==1)return n("Orientation data count is invalid");i.setUint16(p+8,1,d);break}return e(s.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var Qh={},i7={get exports(){return Qh},set exports(t){Qh=t}};(function(t){var e,n,r={};i7.exports=r,r.parse=function(s,i){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,u={},d=new Uint8Array(s),h=d.length-4;a(d,h)!=101010256;)h--;l=h,l+=4;var m=o(d,l+=4);o(d,l+=2);var p=a(d,l+=2),y=a(d,l+=4);l+=4,l=y;for(var g=0;g<m;g++){a(d,l),l+=4,l+=4,l+=4,a(d,l+=4),p=a(d,l+=4);var b=a(d,l+=4),v=o(d,l+=4),T=o(d,l+2),_=o(d,l+4);l+=6;var I=a(d,l+=8);l+=4,l+=v+T+_,r._readLocal(d,I,u,p,b,i)}return u},r._readLocal=function(s,i,o,a,l,u){var d=r.bin.readUshort,h=r.bin.readUint;h(s,i),d(s,i+=4),d(s,i+=2);var m=d(s,i+=2);h(s,i+=2),h(s,i+=4),i+=4;var p=d(s,i+=8),y=d(s,i+=2);i+=2;var g=r.bin.readUTF8(s,i,p);if(i+=p,i+=y,u)o[g]={size:l,csize:a};else{var b=new Uint8Array(s.buffer,i);if(m==0)o[g]=new Uint8Array(b.buffer.slice(i,i+a));else{if(m!=8)throw"unknown compression method: "+m;var v=new Uint8Array(l);r.inflateRaw(b,v),o[g]=v}}},r.inflateRaw=function(s,i){return r.F.inflate(s,i)},r.inflate=function(s,i){return s[0],s[1],r.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),i)},r.deflate=function(s,i){i==null&&(i={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*s.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(s,a,o,i.level);var l=r.adler(s,0,s.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(s,i){i==null&&(i={level:6});var o=new Uint8Array(50+Math.floor(1.1*s.length)),a=r.F.deflateRaw(s,o,a,i.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(s,i){i==null&&(i=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,u={};for(var d in s){var h=!r._noNeed(d)&&!i,m=s[d],p=r.crc.crc(m,0,m.length);u[d]={cpr:h,usize:m.length,crc:p,file:h?r.deflateRaw(m):m}}for(var d in u)o+=u[d].file.length+30+46+2*r.bin.sizeUTF8(d);o+=22;var y=new Uint8Array(o),g=0,b=[];for(var d in u){var v=u[d];b.push(g),g=r._writeHeader(y,g,d,v,0)}var T=0,_=g;for(var d in u)v=u[d],b.push(g),g=r._writeHeader(y,g,d,v,1,b[T++]);var I=g-_;return a(y,g,101010256),g+=4,l(y,g+=4,T),l(y,g+=2,T),a(y,g+=2,I),a(y,g+=4,_),g+=4,g+=2,y.buffer},r._noNeed=function(s){var i=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},r._writeHeader=function(s,i,o,a,l,u){var d=r.bin.writeUint,h=r.bin.writeUshort,m=a.file;return d(s,i,l==0?67324752:33639248),i+=4,l==1&&(i+=2),h(s,i,20),h(s,i+=2,0),h(s,i+=2,a.cpr?8:0),d(s,i+=2,0),d(s,i+=4,a.crc),d(s,i+=4,m.length),d(s,i+=4,a.usize),h(s,i+=4,r.bin.sizeUTF8(o)),h(s,i+=2,0),i+=2,l==1&&(i+=2,i+=2,d(s,i+=6,u),i+=4),i+=r.bin.writeUTF8(s,i,o),l==0&&(s.set(m,i),i+=m.length),i},r.crc={table:function(){for(var s=new Uint32Array(256),i=0;i<256;i++){for(var o=i,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;s[i]=o}return s}(),update:function(s,i,o,a){for(var l=0;l<a;l++)s=r.crc.table[255&(s^i[o+l])]^s>>>8;return s},crc:function(s,i,o){return 4294967295^r.crc.update(4294967295,s,i,o)}},r.adler=function(s,i,o){for(var a=1,l=0,u=i,d=i+o;u<d;){for(var h=Math.min(u+5552,d);u<h;)l+=a+=s[u++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(s,i){return s[i]|s[i+1]<<8},writeUshort:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255},readUint:function(s,i){return 16777216*s[i+3]+(s[i+2]<<16|s[i+1]<<8|s[i])},writeUint:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255,s[i+2]=o>>16&255,s[i+3]=o>>24&255},readASCII:function(s,i,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(s[i+l]);return a},writeASCII:function(s,i,o){for(var a=0;a<o.length;a++)s[i+a]=o.charCodeAt(a)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,i,o){for(var a,l="",u=0;u<o;u++)l+="%"+r.bin.pad(s[i+u].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(s,i,o)}return a},writeUTF8:function(s,i,o){for(var a=o.length,l=0,u=0;u<a;u++){var d=o.charCodeAt(u);if(!(4294967168&d))s[i+l]=d,l++;else if(!(4294965248&d))s[i+l]=192|d>>6,s[i+l+1]=128|d>>0&63,l+=2;else if(!(4294901760&d))s[i+l]=224|d>>12,s[i+l+1]=128|d>>6&63,s[i+l+2]=128|d>>0&63,l+=3;else{if(4292870144&d)throw"e";s[i+l]=240|d>>18,s[i+l+1]=128|d>>12&63,s[i+l+2]=128|d>>6&63,s[i+l+3]=128|d>>0&63,l+=4}}return l},sizeUTF8:function(s){for(var i=s.length,o=0,a=0;a<i;a++){var l=s.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(s,i,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],u=r.F.U,d=r.F._goodIndex;r.F._hash;var h=r.F._putsE,m=0,p=o<<3,y=0,g=s.length;if(a==0){for(;m<g;)h(i,p,m+(j=Math.min(65535,g-m))==g?1:0),p=r.F._copyExact(s,m,j,i,p+8),m+=j;return p>>>3}var b=u.lits,v=u.strt,T=u.prev,_=0,I=0,O=0,N=0,C=0,x=0;for(g>2&&(v[x=r.F._hash(s,0)]=0),m=0;m<g;m++){if(C=x,m+1<g-2){x=r.F._hash(s,m+1);var w=m+1&32767;T[w]=v[x],v[x]=w}if(y<=m){(_>14e3||I>26697)&&g-m>100&&(y<m&&(b[_]=m-y,_+=2,y=m),p=r.F._writeBlock(m==g-1||y==g?1:0,b,_,N,s,O,m-O,i,p),_=I=N=0,O=m);var k=0;m<g-2&&(k=r.F._bestMatch(s,m,T,C,Math.min(l[2],g-m),l[3]));var j=k>>>16,P=65535&k;if(k!=0){P=65535&k;var S=d(j=k>>>16,u.of0);u.lhst[257+S]++;var M=d(P,u.df0);u.dhst[M]++,N+=u.exb[S]+u.dxb[M],b[_]=j<<23|m-y,b[_+1]=P<<16|S<<8|M,_+=2,y=m+j}else u.lhst[s[m]]++;I++}}for(O==m&&s.length!=0||(y<m&&(b[_]=m-y,_+=2,y=m),p=r.F._writeBlock(1,b,_,N,s,O,m-O,i,p),_=0,I=0,_=I=N=0,O=m);7&p;)p++;return p>>>3},r.F._bestMatch=function(s,i,o,a,l,u){var d=32767&i,h=o[d],m=d-h+32768&32767;if(h==d||a!=r.F._hash(s,i-m))return 0;for(var p=0,y=0,g=Math.min(32767,i);m<=g&&--u!=0&&h!=d;){if(p==0||s[i+p]==s[i+p-m]){var b=r.F._howLong(s,i,m);if(b>p){if(y=m,(p=b)>=l)break;m+2<b&&(b=m+2);for(var v=0,T=0;T<b-2;T++){var _=i-m+T+32768&32767,I=_-o[_]+32768&32767;I>v&&(v=I,h=_)}}}m+=(d=h)-(h=o[d])+32768&32767}return p<<16|y},r.F._howLong=function(s,i,o){if(s[i]!=s[i-o]||s[i+1]!=s[i+1-o]||s[i+2]!=s[i+2-o])return 0;var a=i,l=Math.min(s.length,i+258);for(i+=3;i<l&&s[i]==s[i-o];)i++;return i-a},r.F._hash=function(s,i){return(s[i]<<8|s[i+1])+(s[i+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(s,i,o,a,l,u,d,h,m){var p,y,g,b,v,T,_,I,O,N=r.F.U,C=r.F._putsF,x=r.F._putsE;N.lhst[256]++,y=(p=r.F.getTrees())[0],g=p[1],b=p[2],v=p[3],T=p[4],_=p[5],I=p[6],O=p[7];var w=32+(m+3&7?8-(m+3&7):0)+(d<<3),k=a+r.F.contSize(N.fltree,N.lhst)+r.F.contSize(N.fdtree,N.dhst),j=a+r.F.contSize(N.ltree,N.lhst)+r.F.contSize(N.dtree,N.dhst);j+=14+3*_+r.F.contSize(N.itree,N.ihst)+(2*N.ihst[16]+3*N.ihst[17]+7*N.ihst[18]);for(var P=0;P<286;P++)N.lhst[P]=0;for(P=0;P<30;P++)N.dhst[P]=0;for(P=0;P<19;P++)N.ihst[P]=0;var S=w<k&&w<j?0:k<j?1:2;if(C(h,m,s),C(h,m+1,S),m+=3,S==0){for(;7&m;)m++;m=r.F._copyExact(l,u,d,h,m)}else{var M,B;if(S==1&&(M=N.fltree,B=N.fdtree),S==2){r.F.makeCodes(N.ltree,y),r.F.revCodes(N.ltree,y),r.F.makeCodes(N.dtree,g),r.F.revCodes(N.dtree,g),r.F.makeCodes(N.itree,b),r.F.revCodes(N.itree,b),M=N.ltree,B=N.dtree,x(h,m,v-257),x(h,m+=5,T-1),x(h,m+=5,_-4),m+=4;for(var D=0;D<_;D++)x(h,m+3*D,N.itree[1+(N.ordr[D]<<1)]);m+=3*_,m=r.F._codeTiny(I,N.itree,h,m),m=r.F._codeTiny(O,N.itree,h,m)}for(var R=u,$=0;$<o;$+=2){for(var U=i[$],z=U>>>23,J=R+(8388607&U);R<J;)m=r.F._writeLit(l[R++],M,h,m);if(z!=0){var G=i[$+1],Z=G>>16,Q=G>>8&255,H=255&G;x(h,m=r.F._writeLit(257+Q,M,h,m),z-N.of0[Q]),m+=N.exb[Q],C(h,m=r.F._writeLit(H,B,h,m),Z-N.df0[H]),m+=N.dxb[H],R+=z}}m=r.F._writeLit(256,M,h,m)}return m},r.F._copyExact=function(s,i,o,a,l){var u=l>>>3;return a[u]=o,a[u+1]=o>>>8,a[u+2]=255-a[u],a[u+3]=255-a[u+1],u+=4,a.set(new Uint8Array(s.buffer,i,o),u),l+(o+4<<3)},r.F.getTrees=function(){for(var s=r.F.U,i=r.F._hufTree(s.lhst,s.ltree,15),o=r.F._hufTree(s.dhst,s.dtree,15),a=[],l=r.F._lenCodes(s.ltree,a),u=[],d=r.F._lenCodes(s.dtree,u),h=0;h<a.length;h+=2)s.ihst[a[h]]++;for(h=0;h<u.length;h+=2)s.ihst[u[h]]++;for(var m=r.F._hufTree(s.ihst,s.itree,7),p=19;p>4&&s.itree[1+(s.ordr[p-1]<<1)]==0;)p--;return[i,o,m,l,d,p,a,u]},r.F.getSecond=function(s){for(var i=[],o=0;o<s.length;o+=2)i.push(s[o+1]);return i},r.F.nonZero=function(s){for(var i="",o=0;o<s.length;o+=2)s[o+1]!=0&&(i+=(o>>1)+",");return i},r.F.contSize=function(s,i){for(var o=0,a=0;a<i.length;a++)o+=i[a]*s[1+(a<<1)];return o},r.F._codeTiny=function(s,i,o,a){for(var l=0;l<s.length;l+=2){var u=s[l],d=s[l+1];a=r.F._writeLit(u,i,o,a);var h=u==16?2:u==17?3:7;u>15&&(r.F._putsE(o,a,d,h),a+=h)}return a},r.F._lenCodes=function(s,i){for(var o=s.length;o!=2&&s[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=s[a+1],u=a+3<o?s[a+3]:-1,d=a+5<o?s[a+5]:-1,h=a==0?-1:s[a-1];if(l==0&&u==l&&d==l){for(var m=a+5;m+2<o&&s[m+2]==l;)m+=2;(p=Math.min(m+1-a>>>1,138))<11?i.push(17,p-3):i.push(18,p-11),a+=2*p-2}else if(l==h&&u==l&&d==l){for(m=a+5;m+2<o&&s[m+2]==l;)m+=2;var p=Math.min(m+1-a>>>1,6);i.push(16,p-3),a+=2*p-2}else i.push(l,0)}return o>>>1},r.F._hufTree=function(s,i,o){var a=[],l=s.length,u=i.length,d=0;for(d=0;d<u;d+=2)i[d]=0,i[d+1]=0;for(d=0;d<l;d++)s[d]!=0&&a.push({lit:d,f:s[d]});var h=a.length,m=a.slice(0);if(h==0)return 0;if(h==1){var p=a[0].lit;return m=p==0?1:0,i[1+(p<<1)]=1,i[1+(m<<1)]=1,1}a.sort(function(I,O){return I.f-O.f});var y=a[0],g=a[1],b=0,v=1,T=2;for(a[0]={lit:-1,f:y.f+g.f,l:y,r:g,d:0};v!=h-1;)y=b!=v&&(T==h||a[b].f<a[T].f)?a[b++]:a[T++],g=b!=v&&(T==h||a[b].f<a[T].f)?a[b++]:a[T++],a[v++]={lit:-1,f:y.f+g.f,l:y,r:g};var _=r.F.setDepth(a[v-1],0);for(_>o&&(r.F.restrictDepth(m,o,_),_=o),d=0;d<h;d++)i[1+(m[d].lit<<1)]=m[d].d;return _},r.F.setDepth=function(s,i){return s.lit!=-1?(s.d=i,i):Math.max(r.F.setDepth(s.l,i+1),r.F.setDepth(s.r,i+1))},r.F.restrictDepth=function(s,i,o){var a=0,l=1<<o-i,u=0;for(s.sort(function(h,m){return m.d==h.d?h.f-m.f:m.d-h.d}),a=0;a<s.length&&s[a].d>i;a++){var d=s[a].d;s[a].d=i,u+=l-(1<<o-d)}for(u>>>=o-i;u>0;)(d=s[a].d)<i?(s[a].d++,u-=1<<i-d-1):a++;for(;a>=0;a--)s[a].d==i&&u<0&&(s[a].d--,u++);u!=0&&console.log("debt left")},r.F._goodIndex=function(s,i){var o=0;return i[16|o]<=s&&(o|=16),i[8|o]<=s&&(o|=8),i[4|o]<=s&&(o|=4),i[2|o]<=s&&(o|=2),i[1|o]<=s&&(o|=1),o},r.F._writeLit=function(s,i,o,a){return r.F._putsF(o,a,i[s<<1]),a+i[1+(s<<1)]},r.F.inflate=function(s,i){var o=Uint8Array;if(s[0]==3&&s[1]==0)return i||new o(0);var a=r.F,l=a._bitsF,u=a._bitsE,d=a._decodeTiny,h=a.makeCodes,m=a.codes2map,p=a._get17,y=a.U,g=i==null;g&&(i=new o(s.length>>>2<<3));for(var b,v,T=0,_=0,I=0,O=0,N=0,C=0,x=0,w=0,k=0;T==0;)if(T=l(s,k,1),_=l(s,k+1,2),k+=3,_!=0){if(g&&(i=r.F._check(i,w+(1<<17))),_==1&&(b=y.flmap,v=y.fdmap,C=511,x=31),_==2){I=u(s,k,5)+257,O=u(s,k+5,5)+1,N=u(s,k+10,4)+4,k+=14;for(var j=0;j<38;j+=2)y.itree[j]=0,y.itree[j+1]=0;var P=1;for(j=0;j<N;j++){var S=u(s,k+3*j,3);y.itree[1+(y.ordr[j]<<1)]=S,S>P&&(P=S)}k+=3*N,h(y.itree,P),m(y.itree,P,y.imap),b=y.lmap,v=y.dmap,k=d(y.imap,(1<<P)-1,I+O,s,k,y.ttree);var M=a._copyOut(y.ttree,0,I,y.ltree);C=(1<<M)-1;var B=a._copyOut(y.ttree,I,O,y.dtree);x=(1<<B)-1,h(y.ltree,M),m(y.ltree,M,b),h(y.dtree,B),m(y.dtree,B,v)}for(;;){var D=b[p(s,k)&C];k+=15&D;var R=D>>>4;if(!(R>>>8))i[w++]=R;else{if(R==256)break;var $=w+R-254;if(R>264){var U=y.ldef[R-257];$=w+(U>>>3)+u(s,k,7&U),k+=7&U}var z=v[p(s,k)&x];k+=15&z;var J=z>>>4,G=y.ddef[J],Z=(G>>>4)+l(s,k,15&G);for(k+=15&G,g&&(i=r.F._check(i,w+(1<<17)));w<$;)i[w]=i[w++-Z],i[w]=i[w++-Z],i[w]=i[w++-Z],i[w]=i[w++-Z];w=$}}}else{7&k&&(k+=8-(7&k));var Q=4+(k>>>3),H=s[Q-4]|s[Q-3]<<8;g&&(i=r.F._check(i,w+H)),i.set(new o(s.buffer,s.byteOffset+Q,H),w),k=Q+H<<3,w+=H}return i.length==w?i:i.slice(0,w)},r.F._check=function(s,i){var o=s.length;if(i<=o)return s;var a=new Uint8Array(Math.max(o<<1,i));return a.set(s,0),a},r.F._decodeTiny=function(s,i,o,a,l,u){for(var d=r.F._bitsE,h=r.F._get17,m=0;m<o;){var p=s[h(a,l)&i];l+=15&p;var y=p>>>4;if(y<=15)u[m]=y,m++;else{var g=0,b=0;y==16?(b=3+d(a,l,2),l+=2,g=u[m-1]):y==17?(b=3+d(a,l,3),l+=3):y==18&&(b=11+d(a,l,7),l+=7);for(var v=m+b;m<v;)u[m]=g,m++}}return l},r.F._copyOut=function(s,i,o,a){for(var l=0,u=0,d=a.length>>>1;u<o;){var h=s[u+i];a[u<<1]=0,a[1+(u<<1)]=h,h>l&&(l=h),u++}for(;u<d;)a[u<<1]=0,a[1+(u<<1)]=0,u++;return l},r.F.makeCodes=function(s,i){for(var o,a,l,u,d=r.F.U,h=s.length,m=d.bl_count,p=0;p<=i;p++)m[p]=0;for(p=1;p<h;p+=2)m[s[p]]++;var y=d.next_code;for(o=0,m[0]=0,a=1;a<=i;a++)o=o+m[a-1]<<1,y[a]=o;for(l=0;l<h;l+=2)(u=s[l+1])!=0&&(s[l]=y[u],y[u]++)},r.F.codes2map=function(s,i,o){for(var a=s.length,l=r.F.U.rev15,u=0;u<a;u+=2)if(s[u+1]!=0)for(var d=u>>1,h=s[u+1],m=d<<4|h,p=i-h,y=s[u]<<p,g=y+(1<<p);y!=g;)o[l[y]>>>15-i]=m,y++},r.F.revCodes=function(s,i){for(var o=r.F.U.rev15,a=15-i,l=0;l<s.length;l+=2){var u=s[l]<<i-s[l+1];s[l]=o[u]>>>a}},r.F._putsE=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8},r.F._putsF=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8,s[a+2]|=o>>>16},r.F._bitsE=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8)>>>(7&i)&(1<<o)-1},r.F._bitsF=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)&(1<<o)-1},r.F._get17=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)},r.F._get25=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16|s[3+(i>>>3)]<<24)>>>(7&i)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var s=r.F.U,i=0;i<32768;i++){var o=i;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,s.rev15[i]=(o>>>16|o<<16)>>>17}function a(l,u,d){for(;u--!=0;)l.push(0,d)}for(i=0;i<32;i++)s.ldef[i]=s.of0[i]<<3|s.exb[i],s.ddef[i]=s.df0[i]<<4|s.dxb[i];a(s.fltree,144,8),a(s.fltree,112,9),a(s.fltree,24,7),a(s.fltree,8,8),r.F.makeCodes(s.fltree,9),r.F.codes2map(s.fltree,9,s.flmap),r.F.revCodes(s.fltree,9),a(s.fdtree,32,5),r.F.makeCodes(s.fdtree,5),r.F.codes2map(s.fdtree,5,s.fdmap),r.F.revCodes(s.fdtree,5),a(s.itree,19,0),a(s.ltree,286,0),a(s.dtree,30,0),a(s.ttree,320,0)}()})();var o7=r7({__proto__:null,default:Qh},[Qh]);const pr=function(){var t={nextZero(d,h){for(;d[h]!=0;)h++;return h},readUshort:(d,h)=>d[h]<<8|d[h+1],writeUshort(d,h,m){d[h]=m>>8&255,d[h+1]=255&m},readUint:(d,h)=>16777216*d[h]+(d[h+1]<<16|d[h+2]<<8|d[h+3]),writeUint(d,h,m){d[h]=m>>24&255,d[h+1]=m>>16&255,d[h+2]=m>>8&255,d[h+3]=255&m},readASCII(d,h,m){let p="";for(let y=0;y<m;y++)p+=String.fromCharCode(d[h+y]);return p},writeASCII(d,h,m){for(let p=0;p<m.length;p++)d[h+p]=m.charCodeAt(p)},readBytes(d,h,m){const p=[];for(let y=0;y<m;y++)p.push(d[h+y]);return p},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,h,m){let p,y="";for(let g=0;g<m;g++)y+=`%${t.pad(d[h+g].toString(16))}`;try{p=decodeURIComponent(y)}catch{return t.readASCII(d,h,m)}return p}};function e(d,h,m,p){const y=h*m,g=i(p),b=Math.ceil(h*g/8),v=new Uint8Array(4*y),T=new Uint32Array(v.buffer),{ctype:_}=p,{depth:I}=p,O=t.readUshort;if(_==6){const U=y<<2;if(I==8)for(var N=0;N<U;N+=4)v[N]=d[N],v[N+1]=d[N+1],v[N+2]=d[N+2],v[N+3]=d[N+3];if(I==16)for(N=0;N<U;N++)v[N]=d[N<<1]}else if(_==2){const U=p.tabs.tRNS;if(U==null){if(I==8)for(N=0;N<y;N++){var C=3*N;T[N]=255<<24|d[C+2]<<16|d[C+1]<<8|d[C]}if(I==16)for(N=0;N<y;N++)C=6*N,T[N]=255<<24|d[C+4]<<16|d[C+2]<<8|d[C]}else{var x=U[0];const z=U[1],J=U[2];if(I==8)for(N=0;N<y;N++){var w=N<<2;C=3*N,T[N]=255<<24|d[C+2]<<16|d[C+1]<<8|d[C],d[C]==x&&d[C+1]==z&&d[C+2]==J&&(v[w+3]=0)}if(I==16)for(N=0;N<y;N++)w=N<<2,C=6*N,T[N]=255<<24|d[C+4]<<16|d[C+2]<<8|d[C],O(d,C)==x&&O(d,C+2)==z&&O(d,C+4)==J&&(v[w+3]=0)}}else if(_==3){const U=p.tabs.PLTE,z=p.tabs.tRNS,J=z?z.length:0;if(I==1)for(var k=0;k<m;k++){var j=k*b,P=k*h;for(N=0;N<h;N++){w=P+N<<2;var S=3*(M=d[j+(N>>3)]>>7-((7&N)<<0)&1);v[w]=U[S],v[w+1]=U[S+1],v[w+2]=U[S+2],v[w+3]=M<J?z[M]:255}}if(I==2)for(k=0;k<m;k++)for(j=k*b,P=k*h,N=0;N<h;N++)w=P+N<<2,S=3*(M=d[j+(N>>2)]>>6-((3&N)<<1)&3),v[w]=U[S],v[w+1]=U[S+1],v[w+2]=U[S+2],v[w+3]=M<J?z[M]:255;if(I==4)for(k=0;k<m;k++)for(j=k*b,P=k*h,N=0;N<h;N++)w=P+N<<2,S=3*(M=d[j+(N>>1)]>>4-((1&N)<<2)&15),v[w]=U[S],v[w+1]=U[S+1],v[w+2]=U[S+2],v[w+3]=M<J?z[M]:255;if(I==8)for(N=0;N<y;N++){var M;w=N<<2,S=3*(M=d[N]),v[w]=U[S],v[w+1]=U[S+1],v[w+2]=U[S+2],v[w+3]=M<J?z[M]:255}}else if(_==4){if(I==8)for(N=0;N<y;N++){w=N<<2;var B=d[D=N<<1];v[w]=B,v[w+1]=B,v[w+2]=B,v[w+3]=d[D+1]}if(I==16)for(N=0;N<y;N++){var D;w=N<<2,B=d[D=N<<2],v[w]=B,v[w+1]=B,v[w+2]=B,v[w+3]=d[D+2]}}else if(_==0)for(x=p.tabs.tRNS?p.tabs.tRNS:-1,k=0;k<m;k++){const U=k*b,z=k*h;if(I==1)for(var R=0;R<h;R++){var $=(B=255*(d[U+(R>>>3)]>>>7-(7&R)&1))==255*x?0:255;T[z+R]=$<<24|B<<16|B<<8|B}else if(I==2)for(R=0;R<h;R++)$=(B=85*(d[U+(R>>>2)]>>>6-((3&R)<<1)&3))==85*x?0:255,T[z+R]=$<<24|B<<16|B<<8|B;else if(I==4)for(R=0;R<h;R++)$=(B=17*(d[U+(R>>>1)]>>>4-((1&R)<<2)&15))==17*x?0:255,T[z+R]=$<<24|B<<16|B<<8|B;else if(I==8)for(R=0;R<h;R++)$=(B=d[U+R])==x?0:255,T[z+R]=$<<24|B<<16|B<<8|B;else if(I==16)for(R=0;R<h;R++)B=d[U+(R<<1)],$=O(d,U+(R<<1))==x?0:255,T[z+R]=$<<24|B<<16|B<<8|B}return v}function n(d,h,m,p){const y=i(d),g=Math.ceil(m*y/8),b=new Uint8Array((g+1+d.interlace)*p);return h=d.tabs.CgBI?s(h,b):r(h,b),d.interlace==0?h=o(h,d,0,m,p):d.interlace==1&&(h=function(T,_){const I=_.width,O=_.height,N=i(_),C=N>>3,x=Math.ceil(I*N/8),w=new Uint8Array(O*x);let k=0;const j=[0,0,4,0,2,0,1],P=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],M=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const R=S[B],$=M[B];let U=0,z=0,J=j[B];for(;J<O;)J+=R,z++;let G=P[B];for(;G<I;)G+=$,U++;const Z=Math.ceil(U*N/8);o(T,_,k,U,z);let Q=0,H=j[B];for(;H<O;){let se=P[B],he=k+Q*Z<<3;for(;se<I;){var D;if(N==1&&(D=(D=T[he>>3])>>7-(7&he)&1,w[H*x+(se>>3)]|=D<<7-((7&se)<<0)),N==2&&(D=(D=T[he>>3])>>6-(7&he)&3,w[H*x+(se>>2)]|=D<<6-((3&se)<<1)),N==4&&(D=(D=T[he>>3])>>4-(7&he)&15,w[H*x+(se>>1)]|=D<<4-((1&se)<<2)),N>=8){const ye=H*x+se*C;for(let fe=0;fe<C;fe++)w[ye+fe]=T[(he>>3)+fe]}he+=N,se+=$}Q++,H+=R}U*z!=0&&(k+=z*(1+Z)),B+=1}return w}(h,d)),h}function r(d,h){return s(new Uint8Array(d.buffer,2,d.length-6),h)}var s=function(){const d={H:{}};return d.H.N=function(h,m){const p=Uint8Array;let y,g,b=0,v=0,T=0,_=0,I=0,O=0,N=0,C=0,x=0;if(h[0]==3&&h[1]==0)return m||new p(0);const w=d.H,k=w.b,j=w.e,P=w.R,S=w.n,M=w.A,B=w.Z,D=w.m,R=m==null;for(R&&(m=new p(h.length>>>2<<5));b==0;)if(b=k(h,x,1),v=k(h,x+1,2),x+=3,v!=0){if(R&&(m=d.H.W(m,C+(1<<17))),v==1&&(y=D.J,g=D.h,O=511,N=31),v==2){T=j(h,x,5)+257,_=j(h,x+5,5)+1,I=j(h,x+10,4)+4,x+=14;let U=1;for(var $=0;$<38;$+=2)D.Q[$]=0,D.Q[$+1]=0;for($=0;$<I;$++){const G=j(h,x+3*$,3);D.Q[1+(D.X[$]<<1)]=G,G>U&&(U=G)}x+=3*I,S(D.Q,U),M(D.Q,U,D.u),y=D.w,g=D.d,x=P(D.u,(1<<U)-1,T+_,h,x,D.v);const z=w.V(D.v,0,T,D.C);O=(1<<z)-1;const J=w.V(D.v,T,_,D.D);N=(1<<J)-1,S(D.C,z),M(D.C,z,y),S(D.D,J),M(D.D,J,g)}for(;;){const U=y[B(h,x)&O];x+=15&U;const z=U>>>4;if(!(z>>>8))m[C++]=z;else{if(z==256)break;{let J=C+z-254;if(z>264){const se=D.q[z-257];J=C+(se>>>3)+j(h,x,7&se),x+=7&se}const G=g[B(h,x)&N];x+=15&G;const Z=G>>>4,Q=D.c[Z],H=(Q>>>4)+k(h,x,15&Q);for(x+=15&Q;C<J;)m[C]=m[C++-H],m[C]=m[C++-H],m[C]=m[C++-H],m[C]=m[C++-H];C=J}}}}else{7&x&&(x+=8-(7&x));const U=4+(x>>>3),z=h[U-4]|h[U-3]<<8;R&&(m=d.H.W(m,C+z)),m.set(new p(h.buffer,h.byteOffset+U,z),C),x=U+z<<3,C+=z}return m.length==C?m:m.slice(0,C)},d.H.W=function(h,m){const p=h.length;if(m<=p)return h;const y=new Uint8Array(p<<1);return y.set(h,0),y},d.H.R=function(h,m,p,y,g,b){const v=d.H.e,T=d.H.Z;let _=0;for(;_<p;){const I=h[T(y,g)&m];g+=15&I;const O=I>>>4;if(O<=15)b[_]=O,_++;else{let N=0,C=0;O==16?(C=3+v(y,g,2),g+=2,N=b[_-1]):O==17?(C=3+v(y,g,3),g+=3):O==18&&(C=11+v(y,g,7),g+=7);const x=_+C;for(;_<x;)b[_]=N,_++}}return g},d.H.V=function(h,m,p,y){let g=0,b=0;const v=y.length>>>1;for(;b<p;){const T=h[b+m];y[b<<1]=0,y[1+(b<<1)]=T,T>g&&(g=T),b++}for(;b<v;)y[b<<1]=0,y[1+(b<<1)]=0,b++;return g},d.H.n=function(h,m){const p=d.H.m,y=h.length;let g,b,v,T;const _=p.j;for(var I=0;I<=m;I++)_[I]=0;for(I=1;I<y;I+=2)_[h[I]]++;const O=p.K;for(g=0,_[0]=0,b=1;b<=m;b++)g=g+_[b-1]<<1,O[b]=g;for(v=0;v<y;v+=2)T=h[v+1],T!=0&&(h[v]=O[T],O[T]++)},d.H.A=function(h,m,p){const y=h.length,g=d.H.m.r;for(let b=0;b<y;b+=2)if(h[b+1]!=0){const v=b>>1,T=h[b+1],_=v<<4|T,I=m-T;let O=h[b]<<I;const N=O+(1<<I);for(;O!=N;)p[g[O]>>>15-m]=_,O++}},d.H.l=function(h,m){const p=d.H.m.r,y=15-m;for(let g=0;g<h.length;g+=2){const b=h[g]<<m-h[g+1];h[g]=p[b]>>>y}},d.H.M=function(h,m,p){p<<=7&m;const y=m>>>3;h[y]|=p,h[y+1]|=p>>>8},d.H.I=function(h,m,p){p<<=7&m;const y=m>>>3;h[y]|=p,h[y+1]|=p>>>8,h[y+2]|=p>>>16},d.H.e=function(h,m,p){return(h[m>>>3]|h[1+(m>>>3)]<<8)>>>(7&m)&(1<<p)-1},d.H.b=function(h,m,p){return(h[m>>>3]|h[1+(m>>>3)]<<8|h[2+(m>>>3)]<<16)>>>(7&m)&(1<<p)-1},d.H.Z=function(h,m){return(h[m>>>3]|h[1+(m>>>3)]<<8|h[2+(m>>>3)]<<16)>>>(7&m)},d.H.i=function(h,m){return(h[m>>>3]|h[1+(m>>>3)]<<8|h[2+(m>>>3)]<<16|h[3+(m>>>3)]<<24)>>>(7&m)},d.H.m=function(){const h=Uint16Array,m=Uint32Array;return{K:new h(16),j:new h(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new h(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new m(32),J:new h(512),_:[],h:new h(32),$:[],w:new h(32768),C:[],v:[],d:new h(32768),D:[],u:new h(512),Q:[],r:new h(32768),s:new m(286),Y:new m(30),a:new m(19),t:new m(15e3),k:new h(65536),g:new h(32768)}}(),function(){const h=d.H.m;for(var m=0;m<32768;m++){let y=m;y=(2863311530&y)>>>1|(1431655765&y)<<1,y=(3435973836&y)>>>2|(858993459&y)<<2,y=(4042322160&y)>>>4|(252645135&y)<<4,y=(4278255360&y)>>>8|(16711935&y)<<8,h.r[m]=(y>>>16|y<<16)>>>17}function p(y,g,b){for(;g--!=0;)y.push(0,b)}for(m=0;m<32;m++)h.q[m]=h.S[m]<<3|h.T[m],h.c[m]=h.p[m]<<4|h.z[m];p(h._,144,8),p(h._,112,9),p(h._,24,7),p(h._,8,8),d.H.n(h._,9),d.H.A(h._,9,h.J),d.H.l(h._,9),p(h.$,32,5),d.H.n(h.$,5),d.H.A(h.$,5,h.h),d.H.l(h.$,5),p(h.Q,19,0),p(h.C,286,0),p(h.D,30,0),p(h.v,320,0)}(),d.H.N}();function i(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function o(d,h,m,p,y){let g=i(h);const b=Math.ceil(p*g/8);let v,T;g=Math.ceil(g/8);let _=d[m],I=0;if(_>1&&(d[m]=[0,0,1][_-2]),_==3)for(I=g;I<b;I++)d[I+1]=d[I+1]+(d[I+1-g]>>>1)&255;for(let O=0;O<y;O++)if(v=m+O*b,T=v+O+1,_=d[T-1],I=0,_==0)for(;I<b;I++)d[v+I]=d[T+I];else if(_==1){for(;I<g;I++)d[v+I]=d[T+I];for(;I<b;I++)d[v+I]=d[T+I]+d[v+I-g]}else if(_==2)for(;I<b;I++)d[v+I]=d[T+I]+d[v+I-b];else if(_==3){for(;I<g;I++)d[v+I]=d[T+I]+(d[v+I-b]>>>1);for(;I<b;I++)d[v+I]=d[T+I]+(d[v+I-b]+d[v+I-g]>>>1)}else{for(;I<g;I++)d[v+I]=d[T+I]+a(0,d[v+I-b],0);for(;I<b;I++)d[v+I]=d[T+I]+a(d[v+I-g],d[v+I-b],d[v+I-g-b])}return d}function a(d,h,m){const p=d+h-m,y=p-d,g=p-h,b=p-m;return y*y<=g*g&&y*y<=b*b?d:g*g<=b*b?h:m}function l(d,h,m){m.width=t.readUint(d,h),h+=4,m.height=t.readUint(d,h),h+=4,m.depth=d[h],h++,m.ctype=d[h],h++,m.compress=d[h],h++,m.filter=d[h],h++,m.interlace=d[h],h++}function u(d,h,m,p,y,g,b,v,T){const _=Math.min(h,y),I=Math.min(m,g);let O=0,N=0;for(let B=0;B<I;B++)for(let D=0;D<_;D++)if(b>=0&&v>=0?(O=B*h+D<<2,N=(v+B)*y+b+D<<2):(O=(-v+B)*h-b+D<<2,N=B*y+D<<2),T==0)p[N]=d[O],p[N+1]=d[O+1],p[N+2]=d[O+2],p[N+3]=d[O+3];else if(T==1){var C=d[O+3]*.00392156862745098,x=d[O]*C,w=d[O+1]*C,k=d[O+2]*C,j=p[N+3]*(1/255),P=p[N]*j,S=p[N+1]*j,M=p[N+2]*j;const R=1-C,$=C+j*R,U=$==0?0:1/$;p[N+3]=255*$,p[N+0]=(x+P*R)*U,p[N+1]=(w+S*R)*U,p[N+2]=(k+M*R)*U}else if(T==2)C=d[O+3],x=d[O],w=d[O+1],k=d[O+2],j=p[N+3],P=p[N],S=p[N+1],M=p[N+2],C==j&&x==P&&w==S&&k==M?(p[N]=0,p[N+1]=0,p[N+2]=0,p[N+3]=0):(p[N]=x,p[N+1]=w,p[N+2]=k,p[N+3]=C);else if(T==3){if(C=d[O+3],x=d[O],w=d[O+1],k=d[O+2],j=p[N+3],P=p[N],S=p[N+1],M=p[N+2],C==j&&x==P&&w==S&&k==M)continue;if(C<220&&j>20)return!1}return!0}return{decode:function(h){const m=new Uint8Array(h);let p=8;const y=t,g=y.readUshort,b=y.readUint,v={tabs:{},frames:[]},T=new Uint8Array(m.length);let _,I=0,O=0;const N=[137,80,78,71,13,10,26,10];for(var C=0;C<8;C++)if(m[C]!=N[C])throw"The input is not a PNG file!";for(;p<m.length;){const B=y.readUint(m,p);p+=4;const D=y.readASCII(m,p,4);if(p+=4,D=="IHDR")l(m,p,v);else if(D=="iCCP"){for(var x=p;m[x]!=0;)x++;y.readASCII(m,p,x-p),m[x+1];const R=m.slice(x+2,p+B);let $=null;try{$=r(R)}catch{$=s(R)}v.tabs[D]=$}else if(D=="CgBI")v.tabs[D]=m.slice(p,p+4);else if(D=="IDAT"){for(C=0;C<B;C++)T[I+C]=m[p+C];I+=B}else if(D=="acTL")v.tabs[D]={num_frames:b(m,p),num_plays:b(m,p+4)},_=new Uint8Array(m.length);else if(D=="fcTL"){O!=0&&((M=v.frames[v.frames.length-1]).data=n(v,_.slice(0,O),M.rect.width,M.rect.height),O=0);const R={x:b(m,p+12),y:b(m,p+16),width:b(m,p+4),height:b(m,p+8)};let $=g(m,p+22);$=g(m,p+20)/($==0?100:$);const U={rect:R,delay:Math.round(1e3*$),dispose:m[p+24],blend:m[p+25]};v.frames.push(U)}else if(D=="fdAT"){for(C=0;C<B-4;C++)_[O+C]=m[p+C+4];O+=B-4}else if(D=="pHYs")v.tabs[D]=[y.readUint(m,p),y.readUint(m,p+4),m[p+8]];else if(D=="cHRM")for(v.tabs[D]=[],C=0;C<8;C++)v.tabs[D].push(y.readUint(m,p+4*C));else if(D=="tEXt"||D=="zTXt"){v.tabs[D]==null&&(v.tabs[D]={});var w=y.nextZero(m,p),k=y.readASCII(m,p,w-p),j=p+B-w-1;if(D=="tEXt")S=y.readASCII(m,w+1,j);else{var P=r(m.slice(w+2,w+2+j));S=y.readUTF8(P,0,P.length)}v.tabs[D][k]=S}else if(D=="iTXt"){v.tabs[D]==null&&(v.tabs[D]={}),w=0,x=p,w=y.nextZero(m,x),k=y.readASCII(m,x,w-x);const R=m[x=w+1];var S;m[x+1],x+=2,w=y.nextZero(m,x),y.readASCII(m,x,w-x),x=w+1,w=y.nextZero(m,x),y.readUTF8(m,x,w-x),j=B-((x=w+1)-p),R==0?S=y.readUTF8(m,x,j):(P=r(m.slice(x,x+j)),S=y.readUTF8(P,0,P.length)),v.tabs[D][k]=S}else if(D=="PLTE")v.tabs[D]=y.readBytes(m,p,B);else if(D=="hIST"){const R=v.tabs.PLTE.length/3;for(v.tabs[D]=[],C=0;C<R;C++)v.tabs[D].push(g(m,p+2*C))}else if(D=="tRNS")v.ctype==3?v.tabs[D]=y.readBytes(m,p,B):v.ctype==0?v.tabs[D]=g(m,p):v.ctype==2&&(v.tabs[D]=[g(m,p),g(m,p+2),g(m,p+4)]);else if(D=="gAMA")v.tabs[D]=y.readUint(m,p)/1e5;else if(D=="sRGB")v.tabs[D]=m[p];else if(D=="bKGD")v.ctype==0||v.ctype==4?v.tabs[D]=[g(m,p)]:v.ctype==2||v.ctype==6?v.tabs[D]=[g(m,p),g(m,p+2),g(m,p+4)]:v.ctype==3&&(v.tabs[D]=m[p]);else if(D=="IEND")break;p+=B,y.readUint(m,p),p+=4}var M;return O!=0&&((M=v.frames[v.frames.length-1]).data=n(v,_.slice(0,O),M.rect.width,M.rect.height)),v.data=n(v,T,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(h){const m=h.width,p=h.height;if(h.tabs.acTL==null)return[e(h.data,m,p,h).buffer];const y=[];h.frames[0].data==null&&(h.frames[0].data=h.data);const g=m*p*4,b=new Uint8Array(g),v=new Uint8Array(g),T=new Uint8Array(g);for(let I=0;I<h.frames.length;I++){const O=h.frames[I],N=O.rect.x,C=O.rect.y,x=O.rect.width,w=O.rect.height,k=e(O.data,x,w,h);if(I!=0)for(var _=0;_<g;_++)T[_]=b[_];if(O.blend==0?u(k,x,w,b,m,p,N,C,0):O.blend==1&&u(k,x,w,b,m,p,N,C,1),y.push(b.buffer.slice(0)),O.dispose!=0){if(O.dispose==1)u(v,x,w,b,m,p,N,C,0);else if(O.dispose==2)for(_=0;_<g;_++)b[_]=T[_]}}return y},_paeth:a,_copyTile:u,_bin:t}}();(function(){const{_copyTile:t}=pr,{_bin:e}=pr,n=pr._paeth;var r={table:function(){const x=new Uint32Array(256);for(let w=0;w<256;w++){let k=w;for(let j=0;j<8;j++)1&k?k=3988292384^k>>>1:k>>>=1;x[w]=k}return x}(),update(x,w,k,j){for(let P=0;P<j;P++)x=r.table[255&(x^w[k+P])]^x>>>8;return x},crc:(x,w,k)=>4294967295^r.update(4294967295,x,w,k)};function s(x,w,k,j){w[k]+=x[0]*j>>4,w[k+1]+=x[1]*j>>4,w[k+2]+=x[2]*j>>4,w[k+3]+=x[3]*j>>4}function i(x){return Math.max(0,Math.min(255,x))}function o(x,w){const k=x[0]-w[0],j=x[1]-w[1],P=x[2]-w[2],S=x[3]-w[3];return k*k+j*j+P*P+S*S}function a(x,w,k,j,P,S,M){M==null&&(M=1);const B=j.length,D=[];for(var R=0;R<B;R++){const H=j[R];D.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(R=0;R<B;R++){let H=4294967295;for(var $=0,U=0;U<B;U++){var z=o(D[R],D[U]);U!=R&&z<H&&(H=z,$=U)}}const J=new Uint32Array(P.buffer),G=new Int16Array(w*k*4),Z=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(R=0;R<Z.length;R++)Z[R]=255*((Z[R]+.5)/16-.5);for(let H=0;H<k;H++)for(let se=0;se<w;se++){var Q;R=4*(H*w+se),M!=2?Q=[i(x[R]+G[R]),i(x[R+1]+G[R+1]),i(x[R+2]+G[R+2]),i(x[R+3]+G[R+3])]:(z=Z[4*(3&H)+(3&se)],Q=[i(x[R]+z),i(x[R+1]+z),i(x[R+2]+z),i(x[R+3]+z)]),$=0;let he=16777215;for(U=0;U<B;U++){const ke=o(Q,D[U]);ke<he&&(he=ke,$=U)}const ye=D[$],fe=[Q[0]-ye[0],Q[1]-ye[1],Q[2]-ye[2],Q[3]-ye[3]];M==1&&(se!=w-1&&s(fe,G,R+4,7),H!=k-1&&(se!=0&&s(fe,G,R+4*w-4,3),s(fe,G,R+4*w,5),se!=w-1&&s(fe,G,R+4*w+4,1))),S[R>>2]=$,J[R>>2]=j[$]}}function l(x,w,k,j,P){P==null&&(P={});const{crc:S}=r,M=e.writeUint,B=e.writeUshort,D=e.writeASCII;let R=8;const $=x.frames.length>1;let U,z=!1,J=33+($?20:0);if(P.sRGB!=null&&(J+=13),P.pHYs!=null&&(J+=21),P.iCCP!=null&&(U=pako.deflate(P.iCCP),J+=21+U.length+4),x.ctype==3){for(var G=x.plte.length,Z=0;Z<G;Z++)x.plte[Z]>>>24!=255&&(z=!0);J+=8+3*G+4+(z?8+1*G+4:0)}for(var Q=0;Q<x.frames.length;Q++)$&&(J+=38),J+=(ye=x.frames[Q]).cimg.length+12,Q!=0&&(J+=4);J+=12;const H=new Uint8Array(J),se=[137,80,78,71,13,10,26,10];for(Z=0;Z<8;Z++)H[Z]=se[Z];if(M(H,R,13),R+=4,D(H,R,"IHDR"),R+=4,M(H,R,w),R+=4,M(H,R,k),R+=4,H[R]=x.depth,R++,H[R]=x.ctype,R++,H[R]=0,R++,H[R]=0,R++,H[R]=0,R++,M(H,R,S(H,R-17,17)),R+=4,P.sRGB!=null&&(M(H,R,1),R+=4,D(H,R,"sRGB"),R+=4,H[R]=P.sRGB,R++,M(H,R,S(H,R-5,5)),R+=4),P.iCCP!=null){const fe=13+U.length;M(H,R,fe),R+=4,D(H,R,"iCCP"),R+=4,D(H,R,"ICC profile"),R+=11,R+=2,H.set(U,R),R+=U.length,M(H,R,S(H,R-(fe+4),fe+4)),R+=4}if(P.pHYs!=null&&(M(H,R,9),R+=4,D(H,R,"pHYs"),R+=4,M(H,R,P.pHYs[0]),R+=4,M(H,R,P.pHYs[1]),R+=4,H[R]=P.pHYs[2],R++,M(H,R,S(H,R-13,13)),R+=4),$&&(M(H,R,8),R+=4,D(H,R,"acTL"),R+=4,M(H,R,x.frames.length),R+=4,M(H,R,P.loop!=null?P.loop:0),R+=4,M(H,R,S(H,R-12,12)),R+=4),x.ctype==3){for(M(H,R,3*(G=x.plte.length)),R+=4,D(H,R,"PLTE"),R+=4,Z=0;Z<G;Z++){const fe=3*Z,ke=x.plte[Z],Se=255&ke,Ue=ke>>>8&255,un=ke>>>16&255;H[R+fe+0]=Se,H[R+fe+1]=Ue,H[R+fe+2]=un}if(R+=3*G,M(H,R,S(H,R-3*G-4,3*G+4)),R+=4,z){for(M(H,R,G),R+=4,D(H,R,"tRNS"),R+=4,Z=0;Z<G;Z++)H[R+Z]=x.plte[Z]>>>24&255;R+=G,M(H,R,S(H,R-G-4,G+4)),R+=4}}let he=0;for(Q=0;Q<x.frames.length;Q++){var ye=x.frames[Q];$&&(M(H,R,26),R+=4,D(H,R,"fcTL"),R+=4,M(H,R,he++),R+=4,M(H,R,ye.rect.width),R+=4,M(H,R,ye.rect.height),R+=4,M(H,R,ye.rect.x),R+=4,M(H,R,ye.rect.y),R+=4,B(H,R,j[Q]),R+=2,B(H,R,1e3),R+=2,H[R]=ye.dispose,R++,H[R]=ye.blend,R++,M(H,R,S(H,R-30,30)),R+=4);const fe=ye.cimg;M(H,R,(G=fe.length)+(Q==0?0:4)),R+=4;const ke=R;D(H,R,Q==0?"IDAT":"fdAT"),R+=4,Q!=0&&(M(H,R,he++),R+=4),H.set(fe,R),R+=G,M(H,R,S(H,ke,R-ke)),R+=4}return M(H,R,0),R+=4,D(H,R,"IEND"),R+=4,M(H,R,S(H,R-4,4)),R+=4,H.buffer}function u(x,w,k){for(let j=0;j<x.frames.length;j++){const P=x.frames[j];P.rect.width;const S=P.rect.height,M=new Uint8Array(S*P.bpl+S);P.cimg=p(P.img,S,P.bpp,P.bpl,M,w,k)}}function d(x,w,k,j,P){const S=P[0],M=P[1],B=P[2],D=P[3],R=P[4],$=P[5];let U=6,z=8,J=255;for(var G=0;G<x.length;G++){const tt=new Uint8Array(x[G]);for(var Z=tt.length,Q=0;Q<Z;Q+=4)J&=tt[Q+3]}const H=J!=255,se=function(Ae,Ie,ct,pt,Ge,Ut){const Be=[];for(var je=0;je<Ae.length;je++){const Ne=new Uint8Array(Ae[je]),Ke=new Uint32Array(Ne.buffer);var ze;let Fe=0,gt=0,Oe=Ie,yt=ct,Oi=pt?1:0;if(je!=0){const On=Ut||pt||je==1||Be[je-2].dispose!=0?1:2;let Qt=0,Ln=1e9;for(let Mn=0;Mn<On;Mn++){var Ve=new Uint8Array(Ae[je-1-Mn]);const Ir=new Uint32Array(Ae[je-1-Mn]);let dn=Ie,_n=ct,En=-1,ks=-1;for(let Nr=0;Nr<ct;Nr++)for(let Vn=0;Vn<Ie;Vn++)Ke[K=Nr*Ie+Vn]!=Ir[K]&&(Vn<dn&&(dn=Vn),Vn>En&&(En=Vn),Nr<_n&&(_n=Nr),Nr>ks&&(ks=Nr));En==-1&&(dn=_n=En=ks=0),Ge&&((1&dn)==1&&dn--,(1&_n)==1&&_n--);const Li=(En-dn+1)*(ks-_n+1);Li<Ln&&(Ln=Li,Qt=Mn,Fe=dn,gt=_n,Oe=En-dn+1,yt=ks-_n+1)}Ve=new Uint8Array(Ae[je-1-Qt]),Qt==1&&(Be[je-1].dispose=2),ze=new Uint8Array(Oe*yt*4),t(Ve,Ie,ct,ze,Oe,yt,-Fe,-gt,0),Oi=t(Ne,Ie,ct,ze,Oe,yt,-Fe,-gt,3)?1:0,Oi==1?m(Ne,Ie,ct,ze,{x:Fe,y:gt,width:Oe,height:yt}):t(Ne,Ie,ct,ze,Oe,yt,-Fe,-gt,0)}else ze=Ne.slice(0);Be.push({rect:{x:Fe,y:gt,width:Oe,height:yt},img:ze,blend:Oi,dispose:0})}if(pt)for(je=0;je<Be.length;je++){if((_e=Be[je]).blend==1)continue;const Ne=_e.rect,Ke=Be[je-1].rect,Fe=Math.min(Ne.x,Ke.x),gt=Math.min(Ne.y,Ke.y),Oe={x:Fe,y:gt,width:Math.max(Ne.x+Ne.width,Ke.x+Ke.width)-Fe,height:Math.max(Ne.y+Ne.height,Ke.y+Ke.height)-gt};Be[je-1].dispose=1,je-1!=0&&h(Ae,Ie,ct,Be,je-1,Oe,Ge),h(Ae,Ie,ct,Be,je,Oe,Ge)}let nt=0;if(Ae.length!=1)for(var K=0;K<Be.length;K++){var _e;nt+=(_e=Be[K]).rect.width*_e.rect.height}return Be}(x,w,k,S,M,B),he={},ye=[],fe=[];if(j!=0){const tt=[];for(Q=0;Q<se.length;Q++)tt.push(se[Q].img.buffer);const Ae=function(Ge){let Ut=0;for(var Be=0;Be<Ge.length;Be++)Ut+=Ge[Be].byteLength;const je=new Uint8Array(Ut);let ze=0;for(Be=0;Be<Ge.length;Be++){const Ve=new Uint8Array(Ge[Be]),nt=Ve.length;for(let K=0;K<nt;K+=4){let _e=Ve[K],Ne=Ve[K+1],Ke=Ve[K+2];const Fe=Ve[K+3];Fe==0&&(_e=Ne=Ke=0),je[ze+K]=_e,je[ze+K+1]=Ne,je[ze+K+2]=Ke,je[ze+K+3]=Fe}ze+=nt}return je.buffer}(tt),Ie=g(Ae,j);for(Q=0;Q<Ie.plte.length;Q++)ye.push(Ie.plte[Q].est.rgba);let ct=0;for(Q=0;Q<se.length;Q++){const pt=(Se=se[Q]).img.length;var ke=new Uint8Array(Ie.inds.buffer,ct>>2,pt>>2);fe.push(ke);const Ge=new Uint8Array(Ie.abuf,ct,pt);$&&a(Se.img,Se.rect.width,Se.rect.height,ye,Ge,ke),Se.img.set(Ge),ct+=pt}}else for(G=0;G<se.length;G++){var Se=se[G];const tt=new Uint32Array(Se.img.buffer);var Ue=Se.rect.width;for(Z=tt.length,ke=new Uint8Array(Z),fe.push(ke),Q=0;Q<Z;Q++){const Ae=tt[Q];if(Q!=0&&Ae==tt[Q-1])ke[Q]=ke[Q-1];else if(Q>Ue&&Ae==tt[Q-Ue])ke[Q]=ke[Q-Ue];else{let Ie=he[Ae];if(Ie==null&&(he[Ae]=Ie=ye.length,ye.push(Ae),ye.length>=300))break;ke[Q]=Ie}}}const un=ye.length;for(un<=256&&R==0&&(z=un<=2?1:un<=4?2:un<=16?4:8,z=Math.max(z,D)),G=0;G<se.length;G++){(Se=se[G]).rect.x,Se.rect.y,Ue=Se.rect.width;const tt=Se.rect.height;let Ae=Se.img;new Uint32Array(Ae.buffer);let Ie=4*Ue,ct=4;if(un<=256&&R==0){Ie=Math.ceil(z*Ue/8);var Ft=new Uint8Array(Ie*tt);const pt=fe[G];for(let Ge=0;Ge<tt;Ge++){Q=Ge*Ie;const Ut=Ge*Ue;if(z==8)for(var De=0;De<Ue;De++)Ft[Q+De]=pt[Ut+De];else if(z==4)for(De=0;De<Ue;De++)Ft[Q+(De>>1)]|=pt[Ut+De]<<4-4*(1&De);else if(z==2)for(De=0;De<Ue;De++)Ft[Q+(De>>2)]|=pt[Ut+De]<<6-2*(3&De);else if(z==1)for(De=0;De<Ue;De++)Ft[Q+(De>>3)]|=pt[Ut+De]<<7-1*(7&De)}Ae=Ft,U=3,ct=1}else if(H==0&&se.length==1){Ft=new Uint8Array(Ue*tt*3);const pt=Ue*tt;for(Q=0;Q<pt;Q++){const Ge=3*Q,Ut=4*Q;Ft[Ge]=Ae[Ut],Ft[Ge+1]=Ae[Ut+1],Ft[Ge+2]=Ae[Ut+2]}Ae=Ft,U=2,ct=3,Ie=3*Ue}Se.img=Ae,Se.bpl=Ie,Se.bpp=ct}return{ctype:U,depth:z,plte:ye,frames:se}}function h(x,w,k,j,P,S,M){const B=Uint8Array,D=Uint32Array,R=new B(x[P-1]),$=new D(x[P-1]),U=P+1<x.length?new B(x[P+1]):null,z=new B(x[P]),J=new D(z.buffer);let G=w,Z=k,Q=-1,H=-1;for(let he=0;he<S.height;he++)for(let ye=0;ye<S.width;ye++){const fe=S.x+ye,ke=S.y+he,Se=ke*w+fe,Ue=J[Se];Ue==0||j[P-1].dispose==0&&$[Se]==Ue&&(U==null||U[4*Se+3]!=0)||(fe<G&&(G=fe),fe>Q&&(Q=fe),ke<Z&&(Z=ke),ke>H&&(H=ke))}Q==-1&&(G=Z=Q=H=0),M&&((1&G)==1&&G--,(1&Z)==1&&Z--),S={x:G,y:Z,width:Q-G+1,height:H-Z+1};const se=j[P];se.rect=S,se.blend=1,se.img=new Uint8Array(S.width*S.height*4),j[P-1].dispose==0?(t(R,w,k,se.img,S.width,S.height,-S.x,-S.y,0),m(z,w,k,se.img,S)):t(z,w,k,se.img,S.width,S.height,-S.x,-S.y,0)}function m(x,w,k,j,P){t(x,w,k,j,P.width,P.height,-P.x,-P.y,2)}function p(x,w,k,j,P,S,M){const B=[];let D,R=[0,1,2,3,4];S!=-1?R=[S]:(w*j>5e5||k==1)&&(R=[0]),M&&(D={level:0});const $=o7;for(var U=0;U<R.length;U++){for(let G=0;G<w;G++)y(P,x,G,j,k,R[U]);B.push($.deflate(P,D))}let z,J=1e9;for(U=0;U<B.length;U++)B[U].length<J&&(z=U,J=B[U].length);return B[z]}function y(x,w,k,j,P,S){const M=k*j;let B=M+k;if(x[B]=S,B++,S==0)if(j<500)for(var D=0;D<j;D++)x[B+D]=w[M+D];else x.set(new Uint8Array(w.buffer,M,j),B);else if(S==1){for(D=0;D<P;D++)x[B+D]=w[M+D];for(D=P;D<j;D++)x[B+D]=w[M+D]-w[M+D-P]+256&255}else if(k==0){for(D=0;D<P;D++)x[B+D]=w[M+D];if(S==2)for(D=P;D<j;D++)x[B+D]=w[M+D];if(S==3)for(D=P;D<j;D++)x[B+D]=w[M+D]-(w[M+D-P]>>1)+256&255;if(S==4)for(D=P;D<j;D++)x[B+D]=w[M+D]-n(w[M+D-P],0,0)+256&255}else{if(S==2)for(D=0;D<j;D++)x[B+D]=w[M+D]+256-w[M+D-j]&255;if(S==3){for(D=0;D<P;D++)x[B+D]=w[M+D]+256-(w[M+D-j]>>1)&255;for(D=P;D<j;D++)x[B+D]=w[M+D]+256-(w[M+D-j]+w[M+D-P]>>1)&255}if(S==4){for(D=0;D<P;D++)x[B+D]=w[M+D]+256-n(0,w[M+D-j],0)&255;for(D=P;D<j;D++)x[B+D]=w[M+D]+256-n(w[M+D-P],w[M+D-j],w[M+D-P-j])&255}}}function g(x,w){const k=new Uint8Array(x),j=k.slice(0),P=new Uint32Array(j.buffer),S=b(j,w),M=S[0],B=S[1],D=k.length,R=new Uint8Array(D>>2);let $;if(k.length<2e7)for(var U=0;U<D;U+=4)$=v(M,z=k[U]*(1/255),J=k[U+1]*(1/255),G=k[U+2]*(1/255),Z=k[U+3]*(1/255)),R[U>>2]=$.ind,P[U>>2]=$.est.rgba;else for(U=0;U<D;U+=4){var z=k[U]*.00392156862745098,J=k[U+1]*(1/255),G=k[U+2]*(1/255),Z=k[U+3]*(1/255);for($=M;$.left;)$=T($.est,z,J,G,Z)<=0?$.left:$.right;R[U>>2]=$.ind,P[U>>2]=$.est.rgba}return{abuf:j.buffer,inds:R,plte:B}}function b(x,w,k){k==null&&(k=1e-4);const j=new Uint32Array(x.buffer),P={i0:0,i1:x.length,bst:null,est:null,tdst:0,left:null,right:null};P.bst=O(x,P.i0,P.i1),P.est=N(P.bst);const S=[P];for(;S.length<w;){let B=0,D=0;for(var M=0;M<S.length;M++)S[M].est.L>B&&(B=S[M].est.L,D=M);if(B<k)break;const R=S[D],$=_(x,j,R.i0,R.i1,R.est.e,R.est.eMq255);if(R.i0>=$||R.i1<=$){R.est.L=0;continue}const U={i0:R.i0,i1:$,bst:null,est:null,tdst:0,left:null,right:null};U.bst=O(x,U.i0,U.i1),U.est=N(U.bst);const z={i0:$,i1:R.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:R.bst.N-U.bst.N},M=0;M<16;M++)z.bst.R[M]=R.bst.R[M]-U.bst.R[M];for(M=0;M<4;M++)z.bst.m[M]=R.bst.m[M]-U.bst.m[M];z.est=N(z.bst),R.left=U,R.right=z,S[D]=U,S.push(z)}for(S.sort((B,D)=>D.bst.N-B.bst.N),M=0;M<S.length;M++)S[M].ind=M;return[P,S]}function v(x,w,k,j,P){if(x.left==null)return x.tdst=function(U,z,J,G,Z){const Q=z-U[0],H=J-U[1],se=G-U[2],he=Z-U[3];return Q*Q+H*H+se*se+he*he}(x.est.q,w,k,j,P),x;const S=T(x.est,w,k,j,P);let M=x.left,B=x.right;S>0&&(M=x.right,B=x.left);const D=v(M,w,k,j,P);if(D.tdst<=S*S)return D;const R=v(B,w,k,j,P);return R.tdst<D.tdst?R:D}function T(x,w,k,j,P){const{e:S}=x;return S[0]*w+S[1]*k+S[2]*j+S[3]*P-x.eMq}function _(x,w,k,j,P,S){for(j-=4;k<j;){for(;I(x,k,P)<=S;)k+=4;for(;I(x,j,P)>S;)j-=4;if(k>=j)break;const M=w[k>>2];w[k>>2]=w[j>>2],w[j>>2]=M,k+=4,j-=4}for(;I(x,k,P)>S;)k-=4;return k+4}function I(x,w,k){return x[w]*k[0]+x[w+1]*k[1]+x[w+2]*k[2]+x[w+3]*k[3]}function O(x,w,k){const j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=[0,0,0,0],S=k-w>>2;for(let M=w;M<k;M+=4){const B=x[M]*.00392156862745098,D=x[M+1]*(1/255),R=x[M+2]*(1/255),$=x[M+3]*(1/255);P[0]+=B,P[1]+=D,P[2]+=R,P[3]+=$,j[0]+=B*B,j[1]+=B*D,j[2]+=B*R,j[3]+=B*$,j[5]+=D*D,j[6]+=D*R,j[7]+=D*$,j[10]+=R*R,j[11]+=R*$,j[15]+=$*$}return j[4]=j[1],j[8]=j[2],j[9]=j[6],j[12]=j[3],j[13]=j[7],j[14]=j[11],{R:j,m:P,N:S}}function N(x){const{R:w}=x,{m:k}=x,{N:j}=x,P=k[0],S=k[1],M=k[2],B=k[3],D=j==0?0:1/j,R=[w[0]-P*P*D,w[1]-P*S*D,w[2]-P*M*D,w[3]-P*B*D,w[4]-S*P*D,w[5]-S*S*D,w[6]-S*M*D,w[7]-S*B*D,w[8]-M*P*D,w[9]-M*S*D,w[10]-M*M*D,w[11]-M*B*D,w[12]-B*P*D,w[13]-B*S*D,w[14]-B*M*D,w[15]-B*B*D],$=R,U=C;let z=[Math.random(),Math.random(),Math.random(),Math.random()],J=0,G=0;if(j!=0)for(let Q=0;Q<16&&(z=U.multVec($,z),G=Math.sqrt(U.dot(z,z)),z=U.sml(1/G,z),!(Q!=0&&Math.abs(G-J)<1e-9));Q++)J=G;const Z=[P*D,S*D,M*D,B*D];return{Cov:R,q:Z,e:z,L:J,eMq255:U.dot(U.sml(255,Z),z),eMq:U.dot(z,Z),rgba:(Math.round(255*Z[3])<<24|Math.round(255*Z[2])<<16|Math.round(255*Z[1])<<8|Math.round(255*Z[0])<<0)>>>0}}var C={multVec:(x,w)=>[x[0]*w[0]+x[1]*w[1]+x[2]*w[2]+x[3]*w[3],x[4]*w[0]+x[5]*w[1]+x[6]*w[2]+x[7]*w[3],x[8]*w[0]+x[9]*w[1]+x[10]*w[2]+x[11]*w[3],x[12]*w[0]+x[13]*w[1]+x[14]*w[2]+x[15]*w[3]],dot:(x,w)=>x[0]*w[0]+x[1]*w[1]+x[2]*w[2]+x[3]*w[3],sml:(x,w)=>[x*w[0],x*w[1],x*w[2],x*w[3]]};pr.encode=function(w,k,j,P,S,M,B){P==null&&(P=0),B==null&&(B=!1);const D=d(w,k,j,P,[!1,!1,!1,0,B,!1]);return u(D,-1),l(D,k,j,S,M)},pr.encodeLL=function(w,k,j,P,S,M,B,D){const R={ctype:0+(P==1?0:2)+(S==0?0:4),depth:M,frames:[]},$=(P+S)*M,U=$*k;for(let z=0;z<w.length;z++)R.frames.push({rect:{x:0,y:0,width:k,height:j},img:new Uint8Array(w[z]),blend:0,dispose:1,bpp:Math.ceil($/8),bpl:Math.ceil(U/8)});return u(R,0,!0),l(R,k,j,B,D)},pr.encode.compress=d,pr.encode.dither=a,pr.quantize=g,pr.quantize.getKDtree=b,pr.quantize.getNearest=v})();const oN={toArrayBuffer(t,e){const n=t.width,r=t.height,s=n<<2,i=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(i.data.buffer),a=(32*n+31)/32<<2,l=a*r,u=122+l,d=new ArrayBuffer(u),h=new DataView(d),m=1<<20;let p,y,g,b,v=m,T=0,_=0,I=0;function O(x){h.setUint16(_,x,!0),_+=2}function N(x){h.setUint32(_,x,!0),_+=4}function C(x){_+=x}O(19778),N(u),C(4),N(122),N(108),N(n),N(-r>>>0),O(1),O(32),N(3),N(l),N(2835),N(2835),C(8),N(16711680),N(65280),N(255),N(4278190080),N(1466527264),function x(){for(;T<r&&v>0;){for(b=122+T*a,p=0;p<s;)v--,y=o[I++],g=y>>>24,h.setUint32(b+p,y<<8|g),p+=4;T++}I<o.length?(v=m,setTimeout(x,oN._dly)):e(d)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var An={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},a7={[An.CHROME]:16384,[An.FIREFOX]:11180,[An.DESKTOP_SAFARI]:16384,[An.IE]:8192,[An.IOS]:4096,[An.ETC]:8192};const ux=typeof window<"u",aN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Yh=ux&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),l7=(ux||aN)&&(Yh&&Yh.getOriginalSymbol(window,"File")||typeof File<"u"&&File),lN=(ux||aN)&&(Yh&&Yh.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function dx(t,e,n=Date.now()){return new Promise(r=>{const s=t.split(","),i=s[0].match(/:(.*?);/)[1],o=globalThis.atob(s[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const u=new Blob([l],{type:i});u.name=e,u.lastModified=n,r(u)})}function cN(t){return new Promise((e,n)=>{const r=new lN;r.onload=()=>e(r.result),r.onerror=s=>n(s),r.readAsDataURL(t)})}function uN(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=s=>n(s),r.src=t})}function eo(){if(eo.cachedResult!==void 0)return eo.cachedResult;let t=An.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=An.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=An.IOS:/Safari/i.test(e)?t=An.DESKTOP_SAFARI:/Firefox/i.test(e)?t=An.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=An.IE),eo.cachedResult=t,eo.cachedResult}function dN(t,e){const n=eo(),r=a7[n];let s=t,i=e,o=s*i;const a=s>i?i/s:s/i;for(;o>r*r;){const l=(r+s)/2,u=(r+i)/2;l<u?(i=u,s=u*a):(i=l*a,s=l),o=s*i}return{width:s,height:i}}function Zf(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function hN(t,e){const{width:n,height:r}=dN(t.width,t.height),[s,i]=Zf(n,r);return e&&/jpe?g/.test(e)&&(i.fillStyle="white",i.fillRect(0,0,s.width,s.height)),i.drawImage(t,0,0,s.width,s.height),s}function Wd(){return Wd.cachedResult!==void 0||(Wd.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Wd.cachedResult}function Xh(t,e={}){return new Promise(function(n,r){let s,i;var o=function(){try{return i=hN(s,e.fileType||t.type),n([s,i])}catch(l){return r(l)}},a=function(l){try{var u=function(d){try{throw d}catch(h){return r(h)}};try{let d;return cN(t).then(function(h){try{return d=h,uN(d).then(function(m){try{return s=m,function(){try{return o()}catch(p){return r(p)}}()}catch(p){return u(p)}},u)}catch(m){return u(m)}},u)}catch(d){u(d)}}catch(d){return r(d)}};try{if(Wd()||[An.DESKTOP_SAFARI,An.MOBILE_SAFARI].includes(eo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return s=l,o()}catch{return a()}},a)}catch{a()}})}function Jh(t,e,n,r,s=1){return new Promise(function(i,o){let a;if(e==="image/png"){let u,d,h;return u=t.getContext("2d"),{data:d}=u.getImageData(0,0,t.width,t.height),h=pr.encode([d.buffer],t.width,t.height,4096*s),a=new Blob([h],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let u=function(){return l.call(this)};if(e==="image/bmp")return new Promise(d=>oN.toBlob(t,d)).then((function(d){try{return a=d,a.name=n,a.lastModified=r,u.call(this)}catch(h){return o(h)}}).bind(this),o);{let d=function(){return u.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:s}).then((function(h){try{return a=h,a.name=n,a.lastModified=r,d.call(this)}catch(m){return o(m)}}).bind(this),o);{let h;return h=t.toDataURL(e,s),dx(h,n,r).then((function(m){try{return a=m,d.call(this)}catch(p){return o(p)}}).bind(this),o)}}}function l(){return i(a)}})}function Or(t){t.width=0,t.height=0}function ha(){return new Promise(function(t,e){let n,r,s,i;return ha.cachedResult!==void 0?t(ha.cachedResult):dx("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Xh(n).then(function(a){try{return r=a[1],Jh(r,n.type,n.name,n.lastModified).then(function(l){try{return s=l,Or(r),Xh(s).then(function(u){try{return i=u[0],ha.cachedResult=i.width===1&&i.height===2,t(ha.cachedResult)}catch(d){return e(d)}},e)}catch(u){return e(u)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function fN(t){return new Promise((e,n)=>{const r=new lN;r.onload=s=>{const i=new DataView(s.target.result);if(i.getUint16(0,!1)!=65496)return e(-2);const o=i.byteLength;let a=2;for(;a<o;){if(i.getUint16(a+2,!1)<=8)return e(-1);const l=i.getUint16(a,!1);if(a+=2,l==65505){if(i.getUint32(a+=2,!1)!=1165519206)return e(-1);const u=i.getUint16(a+=6,!1)==18761;a+=i.getUint32(a+4,u);const d=i.getUint16(a,u);a+=2;for(let h=0;h<d;h++)if(i.getUint16(a+12*h,u)==274)return e(i.getUint16(a+12*h+8,u))}else{if((65280&l)!=65280)break;a+=i.getUint16(a,!1)}}return e(-1)},r.onerror=s=>n(s),r.readAsArrayBuffer(t)})}function mN(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:s}=e;let i,o=t;return isFinite(s)&&(n>s||r>s)&&([o,i]=Zf(n,r),n>r?(o.width=s,o.height=r/n*s):(o.width=n/r*s,o.height=s),i.drawImage(t,0,0,o.width,o.height),Or(t)),o}function pN(t,e){const{width:n}=t,{height:r}=t,[s,i]=Zf(n,r);switch(e>4&&e<9?(s.width=r,s.height=n):(s.width=n,s.height=r),e){case 2:i.transform(-1,0,0,1,n,0);break;case 3:i.transform(-1,0,0,-1,n,r);break;case 4:i.transform(1,0,0,-1,0,r);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,r,0);break;case 7:i.transform(0,-1,-1,0,r,n);break;case 8:i.transform(0,-1,1,0,0,n)}return i.drawImage(t,0,0,n,r),Or(t),s}function Rb(t,e,n=0){return new Promise(function(r,s){let i,o,a,l,u,d,h,m,p,y,g,b,v,T,_,I,O,N,C,x;function w(j=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;i+=j,e.onProgress(Math.min(i,100))}function k(j){if(e.signal&&e.signal.aborted)throw e.signal.reason;i=Math.min(Math.max(j,i),100),e.onProgress(i)}return i=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,w(),Xh(t,e).then((function(j){try{return[,l]=j,w(),u=mN(l,e),w(),new Promise(function(P,S){var M;if(!(M=e.exifOrientation))return fN(t).then((function(D){try{return M=D,B.call(this)}catch(R){return S(R)}}).bind(this),S);function B(){return P(M)}return B.call(this)}).then((function(P){try{return d=P,w(),ha().then((function(S){try{return h=S?u:pN(u,d),w(),m=e.initialQuality||1,p=e.fileType||t.type,Jh(h,p,t.name,t.lastModified,m).then((function(M){try{{let D=function(){if(o--&&(_>a||_>v)){let $,U;return $=x?.95*C.width:C.width,U=x?.95*C.height:C.height,[O,N]=Zf($,U),N.drawImage(C,0,0,$,U),m*=p==="image/png"?.85:.95,Jh(O,p,t.name,t.lastModified,m).then(function(z){try{return I=z,Or(C),C=O,_=I.size,k(Math.min(99,Math.floor((T-_)/(T-a)*100))),D}catch(J){return s(J)}},s)}return[1]},R=function(){return Or(C),Or(O),Or(u),Or(h),Or(l),k(100),r(I)};if(y=M,w(),g=y.size>a,b=y.size>t.size,!g&&!b)return k(100),r(y);var B;return v=t.size,T=y.size,_=T,C=h,x=!e.alwaysKeepResolution&&g,(B=(function($){for(;$;){if($.then)return void $.then(B,s);try{if($.pop){if($.length)return $.pop()?R.call(this):$;$=D}else $=$.call(this)}catch(U){return s(U)}}}).bind(this))(D)}}catch(D){return s(D)}}).bind(this),s)}catch(M){return s(M)}}).bind(this),s)}catch(S){return s(S)}}).bind(this),s)}catch(P){return s(P)}}).bind(this),s)})}const c7=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let kp;function u7(t,e){return new Promise((n,r)=>{kp||(kp=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(c7));const s=new Worker(kp);s.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)s.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void s.terminate();n(o.data.file),s.terminate()}else e.onProgress(o.data.progress)}),s.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),s.terminate()}),s.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function tn(t,e){return new Promise(function(n,r){let s,i,o,a,l,u;if(s={...e},o=0,{onProgress:a}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=p=>{o=p,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof l7))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||u)return Rb(t,s).then((function(p){try{return i=p,m.call(this)}catch(y){return r(y)}}).bind(this),r);var d=(function(){try{return m.call(this)}catch(p){return r(p)}}).bind(this),h=function(p){try{return Rb(t,s).then(function(y){try{return i=y,d()}catch(g){return r(g)}},r)}catch(y){return r(y)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",u7(t,s).then(function(p){try{return i=p,d()}catch{return h()}},h)}catch{h()}function m(){try{i.name=t.name,i.lastModified=t.lastModified}catch{}try{s.preserveExif&&t.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===t.type)&&(i=iN(t,i))}catch{}return n(i)}})}tn.getDataUrlFromFile=cN,tn.getFilefromDataUrl=dx,tn.loadImage=uN,tn.drawImageInCanvas=hN,tn.drawFileInCanvas=Xh,tn.canvasToFile=Jh,tn.getExifOrientation=fN,tn.handleMaxWidthOrHeight=mN,tn.followExifOrientation=pN,tn.cleanupCanvasMemory=Or,tn.isAutoOrientationInBrowser=ha,tn.approximateBelowMaximumCanvasSizeOfBrowser=dN,tn.copyExifWithoutOrientation=iN,tn.getBrowserName=eo,tn.version="2.0.2";const gN=({onImageSelect:t,currentImage:e,maxSizeMB:n=1,onVideoSelect:r})=>{const s=V.useRef(null),[i,o]=V.useState(e||""),[a,l]=V.useState(!1),u=async p=>{const y=p.target.files[0];if(y)try{if(l(!0),!["image/jpeg","image/png","image/webp"].includes(y.type))throw new Error("Tipo de arquivo no suportado. Use JPEG, PNG ou WebP.");const g={maxSizeMB:n,maxWidthOrHeight:1200,useWebWorker:!0,fileType:y.type},b=await tn(y,g),v=new FileReader;v.onloadend=()=>{o(v.result)},v.readAsDataURL(b);const T=y.name.split(".").pop(),_=qo.currentUser;if(!_)throw new Error("Usurio no autenticado");const I=BI(),O=`images/${_.uid}/${crypto.randomUUID()}.${T}`,N=aB(I,O);await iB(N,b,{contentType:y.type});const C=await oB(N);t(C),ee.success("Imagem enviada com sucesso!")}catch(g){console.error("Error processing image:",g),ee.error(g.message||"Erro ao processar imagem"),o(""),s.current&&(s.current.value="")}finally{l(!1)}},d=()=>{o(""),t(null),s.current&&(s.current.value="")},h=p=>{try{const y=[/(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([^&]+)/,/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([^?]+)/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([^?]+)/];for(const g of y){const b=p.match(g);if(b&&b[1])return`https://www.youtube.com/embed/${b[1]}`}return p}catch(y){return console.error("Erro ao converter URL do YouTube:",y),p}},m=p=>{const y=p.target.value;if(y){const g=h(y);r&&r(g)}};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{ref:s,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:u,className:"hidden"}),i?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:i,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:d,className:"absolute top-2 right-2 p-2 bg-dark-lighter rounded-full shadow-md",children:c.jsx(Tr,{className:"text-primary",size:16})})]}):c.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var p;return(p=s.current)==null?void 0:p.click()},className:"w-full h-48 border-2 border-dashed border-dark-medium rounded-lg flex flex-col items-center justify-center bg-dark-light hover:bg-dark-medium transition-colors",disabled:a,children:a?c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}):c.jsxs(c.Fragment,{children:[c.jsx(KB,{size:32,className:"text-primary mb-2"}),c.jsx("p",{className:"text-light-darker",children:"Clique para fazer upload"}),c.jsx("p",{className:"text-sm text-light-darker",children:"ou arraste uma imagem"})]})})]}),r&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"URL do Vdeo (YouTube)"}),c.jsx("input",{type:"url",onChange:m,className:"input-field",placeholder:"Cole o link do YouTube aqui"}),c.jsx("p",{className:"text-xs text-light-darker mt-1",children:"Aceita links no formato: youtube.com/watch?v=ID, youtu.be/ID ou youtube.com/embed/ID"})]})]})},Db=["Peito","Costas","Pernas","Ombros","Bceps","Trceps","Antebrao","Abdmen","Glteos","Panturrilha","Cardio","Outro"],d7=()=>{const{user:t}=hr(),{fetchUserExercises:e,createCustomExercise:n,userExercises:r,loading:s}=Di(),[i,o]=V.useState(""),[a,l]=V.useState("Todos"),[u,d]=V.useState(!1),[h,m]=V.useState({name:"",description:"",category:"",imageUrl:"",videoUrl:"",initialWeight:"",weightUnit:"lbs"});V.useEffect(()=>{t&&(console.log(" Exercises page: Carregando exerccios do usurio..."),e(t.uid))},[t]);const p=r.filter(g=>{const b=g.exercise.name.toLowerCase().includes(i.toLowerCase()),v=a==="Todos"?!0:g.exercise.category===a;return b&&v}),y=async()=>{if(console.log(" === CRIANDO EXERCCIO PERSONALIZADO ==="),console.log(" Dados do exerccio:",h),console.log(" Usurio:",t==null?void 0:t.uid),!h.name||!h.category||!h.initialWeight){console.error(" Campos obrigatrios no preenchidos"),ee.error("Por favor, preencha os campos obrigatrios");return}try{const g={name:h.name,description:h.description,category:h.category,imageUrl:h.imageUrl,videoUrl:h.videoUrl,initialWeight:parseFloat(h.initialWeight),weightUnit:h.weightUnit};console.log(" Enviando dados para createCustomExercise:",g);const b=await n(t.uid,g);console.log(" Exerccio criado com sucesso:",b),d(!1),m({name:"",description:"",category:"",imageUrl:"",videoUrl:"",initialWeight:"",weightUnit:"lbs"}),ee.success("Exerccio personalizado criado com sucesso")}catch(g){console.error(" === ERRO AO CRIAR EXERCCIO ==="),console.error(" Erro completo:",g),ee.error("Erro ao criar exerccio personalizado")}};return c.jsxs("div",{children:[c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Exerccios"}),c.jsx("p",{className:"text-light-darker",children:"Gerencie seus exerccios de treino"})]}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"mb-6",children:c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>d(!0),className:"btn-primary w-full flex items-center justify-center py-4",children:[c.jsx(Yr,{className:"mr-2",size:24}),"Criar Novo Exerccio"]})}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"mb-6",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(qB,{className:"text-light-darker"})}),c.jsx("input",{type:"text",placeholder:"Buscar exerccios...",value:i,onChange:g=>o(g.target.value),className:"input-field pl-10"})]}),c.jsxs("div",{className:"flex overflow-x-auto pb-2 -mx-4 px-4 space-x-2",children:[c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l("Todos"),className:`px-4 py-2 rounded-full whitespace-nowrap ${a==="Todos"?"bg-primary text-white":"bg-dark-light text-light-darker"}`,children:"Todos"}),Db.map(g=>c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(g),className:`px-4 py-2 rounded-full whitespace-nowrap ${a===g?"bg-primary text-white":"bg-dark-light text-light-darker"}`,children:g},g))]})]}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:s?c.jsx("div",{className:"flex justify-center py-8",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):p.length>0?c.jsx("div",{className:"space-y-3",children:p.map(g=>c.jsx(sN,{exercise:g,showProgress:!0},g.id))}):c.jsxs("div",{className:"card text-center py-8",children:[c.jsx("p",{className:"text-light-darker mb-4",children:i||a!=="Todos"?"Nenhum exerccio encontrado com os filtros atuais":"Voc ainda no tem exerccios"}),c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>d(!0),className:"btn-primary",children:[c.jsx(Yr,{className:"mr-2 inline"}),"Criar Primeiro Exerccio"]})]})}),c.jsx(Mt,{children:u&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>d(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Criar Novo Exerccio"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-light-darker mb-1",children:"Nome do Exerccio *"}),c.jsx("input",{id:"name",type:"text",value:h.name,onChange:g=>m({...h,name:g.target.value}),className:"input-field",placeholder:"Ex: Supino Reto",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-light-darker mb-1",children:"Descrio"}),c.jsx("textarea",{id:"description",value:h.description,onChange:g=>m({...h,description:g.target.value}),className:"input-field min-h-[80px]",placeholder:"Descreva como realizar o exerccio..."})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-light-darker mb-1",children:"Categoria *"}),c.jsxs("select",{id:"category",value:h.category,onChange:g=>m({...h,category:g.target.value}),className:"input-field",required:!0,children:[c.jsx("option",{value:"",children:"Selecione uma categoria"}),Db.map(g=>c.jsx("option",{value:g,children:g},g))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Imagem e Vdeo"}),c.jsx(gN,{onImageSelect:async g=>{if(!g){m(b=>({...b,imageUrl:""}));return}m(b=>({...b,imageUrl:g}))},onVideoSelect:g=>{m(b=>({...b,videoUrl:g}))},currentImage:h.imageUrl,bucket:"exercises"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"initialWeight",className:"block text-sm font-medium text-light-darker mb-1",children:"Peso Inicial *"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{id:"initialWeight",type:"number",value:h.initialWeight,onChange:g=>m({...h,initialWeight:g.target.value}),className:"input-field flex-1",placeholder:h.weightUnit==="kg"?"Ex: 10":"Ex: 22",step:"0.5",min:"0",required:!0}),c.jsxs("select",{value:h.weightUnit,onChange:g=>{const b=g.target.value;let v=h.initialWeight;v&&!isNaN(v)&&(b==="kg"&&h.weightUnit==="lbs"?v=(parseFloat(v)*.453592).toFixed(1):b==="lbs"&&h.weightUnit==="kg"&&(v=(parseFloat(v)*2.20462).toFixed(1))),m({...h,weightUnit:b,initialWeight:v})},className:"input-field w-20",children:[c.jsx("option",{value:"lbs",children:"lbs"}),c.jsx("option",{value:"kg",children:"kg"})]})]}),c.jsx("p",{className:"text-xs text-light-darker mt-1",children:h.weightUnit==="lbs"?"Peso em libras (padro americano)":"Peso em quilogramas (padro mtrico)"})]})]}),c.jsxs("div",{className:"flex space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:y,className:"flex-1 btn-primary",children:"Criar Exerccio"})]})]})})})]})},h7=()=>{const{id:t}=y4(),e=Ci(),{user:n}=hr(),{fetchUserExercises:r,userExercises:s,loading:i,updateExerciseProgress:o,deleteUserExercise:a,updateUserExercise:l}=Di(),[u,d]=V.useState(null),[h,m]=V.useState(!1),[p,y]=V.useState(!1),[g,b]=V.useState(!1),[v,T]=V.useState("training"),[_,I]=V.useState({weight:"",sets:"",reps:"",weightUnit:"lbs",name:"",description:"",category:"",imageUrl:"",videoUrl:""});V.useEffect(()=>{n&&r(n.uid)},[n]),V.useEffect(()=>{if(s.length>0){const S=s.find(M=>M.id===t);S?(d(S),I({weight:S.current_weight,sets:S.current_sets,reps:S.current_reps,weightUnit:S.weight_unit||"lbs",name:S.exercise.name,description:S.exercise.description||"",category:S.exercise.category,imageUrl:S.exercise.image_url||"",videoUrl:S.exercise.video_url||""})):(e("/exercises"),ee.error("Exerccio no encontrado"))}},[s,t]);const O=()=>{if(!u)return{progressText:"",nextProgressText:""};const{progress_level:S,completed_workouts:M,current_sets:B,current_reps:D}=u,R=B||u.currentSets||3,$=D||u.currentReps||8,U=`${R}x${$}`;let z="";if(S===0)z=`${R}x${$+2}`;else if(S===1)z=`${R}x${$+2}`;else if(S===2){const J=u.current_weight||u.currentWeight||0,G=u.weight_unit||u.weightUnit||"lbs";z=`3x8 (${J+(G==="kg"?2.5:5)}${G})`}return{progressText:U,nextProgressText:z}},N=S=>{const M=new Date(S);return isNaN(M.getTime())?"Data invlida":M.toLocaleDateString("pt-BR")},C=async()=>{try{await a(n.uid,u.id),ee.success("Exerccio removido com sucesso"),e("/exercises")}catch{ee.error("Erro ao remover exerccio")}},x=async()=>{try{if(v==="training"){if(!_.weight||!_.sets||!_.reps){ee.error("Por favor, preencha todos os campos de treino");return}const S={current_weight:parseFloat(_.weight),current_sets:parseInt(_.sets),current_reps:parseInt(_.reps),weight_unit:_.weightUnit};await l(n.uid,u.id,S),ee.success("Dados de treino atualizados com sucesso")}else{if(!_.name||!_.category){ee.error("Nome e categoria so obrigatrios");return}await w(u.exercise.id,{name:_.name,description:_.description,category:_.category,image_url:_.imageUrl,video_url:_.videoUrl}),ee.success("Detalhes do exerccio atualizados com sucesso")}y(!1),await r(n.uid)}catch{ee.error("Erro ao atualizar exerccio")}},w=async(S,M)=>{try{return console.log("Updating exercise details:",S,M),!0}catch(B){throw console.error("Error updating exercise details:",B),B}},k=["Peito","Costas","Pernas","Ombros","Bceps","Trceps","Antebrao","Abdmen","Glteos","Panturrilha","Cardio","Outro"];if(i||!u)return c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const{progressText:j,nextProgressText:P}=O();return c.jsxs("div",{children:[c.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"mb-6",children:[c.jsxs(Dt,{to:"/exercises",className:"flex items-center text-light-darker hover:text-light mb-4",children:[c.jsx(MB,{className:"mr-2"}),"Voltar para Exerccios"]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:u.exercise.name}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>y(!0),className:"p-2 rounded-full bg-dark-medium hover:bg-dark-light transition-colors",children:c.jsx(zd,{className:"text-primary",size:20})})]})]}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"mb-6",children:u.exercise.video_url?c.jsxs("div",{className:"relative w-full h-48 bg-dark-medium rounded-xl cursor-pointer overflow-hidden",onClick:()=>b(!0),children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx(rN,{className:"text-primary",size:48})}),c.jsx("div",{className:"absolute bottom-4 left-4 bg-dark-lighter px-3 py-1 rounded-full",children:c.jsx("span",{className:"text-sm",children:"Clique para ver o vdeo"})})]}):u.exercise.image_url?c.jsx("img",{src:u.exercise.image_url,alt:u.exercise.name,className:"w-full h-48 object-cover rounded-xl"}):c.jsx("div",{className:"w-full h-48 bg-dark-medium rounded-xl flex items-center justify-center",children:c.jsx(Kc,{size:48,className:"text-primary"})})}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"card mb-6",children:[c.jsx("h2",{className:"text-lg font-bold mb-4",children:"Detalhes do Exerccio"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-light-darker text-sm",children:"Descrio"}),c.jsx("p",{children:u.exercise.description||"Sem descrio disponvel"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-light-darker text-sm",children:"Peso Atual"}),c.jsxs("p",{className:"text-xl font-bold",children:[u.current_weight||u.currentWeight||0," ",u.weight_unit||u.weightUnit||"lbs"]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-light-darker text-sm",children:"Repeties"}),c.jsx("p",{className:"text-xl font-bold",children:j})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-light-darker text-sm",children:"Sries"}),c.jsx("p",{className:"text-xl font-bold",children:u.current_sets||u.currentSets||3})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-light-darker text-sm",children:"Repeties por Srie"}),c.jsx("p",{className:"text-xl font-bold",children:u.current_reps||u.currentReps||8})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-light-darker text-sm",children:"Adicionado em"}),c.jsx("p",{children:N(u.created_at||u.createdAt)})]})]})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"card mb-6",children:[c.jsx("h2",{className:"text-lg font-bold mb-4",children:"Progresso"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{children:"Treinos Completados"}),c.jsxs("span",{children:[u.completed_workouts||u.completedWorkouts||0," de 10"]})]}),c.jsx(ls,{value:u.completed_workouts||u.completedWorkouts||0,max:10,showLabel:!1})]}),c.jsx("div",{className:"bg-dark-light p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(Kc,{className:"text-secondary",size:20})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-light-darker",children:"Prximo Nvel"}),c.jsx("p",{className:"font-bold",children:P})]})]})}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>o(u.id,!0),className:"flex-1 btn-primary flex items-center justify-center",children:[c.jsx(za,{className:"mr-2"}),"Marcar Treino"]}),c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>m(!0),className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all duration-300 flex items-center justify-center",children:[c.jsx(nN,{className:"mr-2"}),"Remover"]})]})]})]}),c.jsx(Mt,{children:g&&u.exercise.video_url&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",onClick:()=>b(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-2xl",onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:u.exercise.name}),c.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-dark-medium rounded-full transition-colors",children:c.jsx(Tr,{size:24})})]}),c.jsx("div",{className:"relative pt-[56.25%]",children:c.jsx("iframe",{src:u.exercise.video_url,className:"absolute inset-0 w-full h-full rounded-lg",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})})}),c.jsx(Mt,{children:p&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>y(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md",onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Editar Exerccio"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>T("training"),className:`px-3 py-1 rounded-full text-sm ${v==="training"?"bg-primary text-white":"bg-dark-medium text-light-darker"}`,children:"Treino"}),c.jsx("button",{onClick:()=>T("details"),className:`px-3 py-1 rounded-full text-sm ${v==="details"?"bg-primary text-white":"bg-dark-medium text-light-darker"}`,children:"Detalhes"})]}),c.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-dark-medium rounded-full transition-colors",children:c.jsx(Tr,{size:20})})]}),v==="training"?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Peso"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"number",value:_.weight,onChange:S=>I({..._,weight:S.target.value}),step:"0.5",min:"0",className:"input-field flex-1",placeholder:_.weightUnit==="kg"?"Ex: 10":"Ex: 22"}),c.jsxs("select",{value:_.weightUnit,onChange:S=>{const M=S.target.value;let B=_.weight;B&&!isNaN(B)&&(M==="kg"&&_.weightUnit==="lbs"?B=(parseFloat(B)*.453592).toFixed(1):M==="lbs"&&_.weightUnit==="kg"&&(B=(parseFloat(B)*2.20462).toFixed(1))),I({..._,weightUnit:M,weight:B})},className:"input-field w-20",children:[c.jsx("option",{value:"lbs",children:"lbs"}),c.jsx("option",{value:"kg",children:"kg"})]})]}),c.jsx("p",{className:"text-xs text-light-darker mt-1",children:_.weightUnit==="lbs"?"Peso em libras (padro americano)":"Peso em quilogramas (padro mtrico)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Sries"}),c.jsx("input",{type:"number",value:_.sets,onChange:S=>I({..._,sets:S.target.value}),min:"1",max:"10",className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Repeties"}),c.jsx("input",{type:"number",value:_.reps,onChange:S=>I({..._,reps:S.target.value}),min:"1",max:"50",className:"input-field"})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Nome do Exerccio"}),c.jsx("input",{type:"text",value:_.name,onChange:S=>I({..._,name:S.target.value}),className:"input-field",placeholder:"Ex: Supino Reto"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Descrio"}),c.jsx("textarea",{value:_.description,onChange:S=>I({..._,description:S.target.value}),className:"input-field min-h-[80px] resize-none",placeholder:"Descreva como realizar o exerccio..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Categoria"}),c.jsx("select",{value:_.category,onChange:S=>I({..._,category:S.target.value}),className:"input-field",children:k.map(S=>c.jsx("option",{value:S,children:S},S))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"URL da Imagem"}),c.jsx("input",{type:"url",value:_.imageUrl,onChange:S=>I({..._,imageUrl:S.target.value}),className:"input-field",placeholder:"https://exemplo.com/imagem.jpg"}),_.imageUrl&&c.jsx("div",{className:"mt-2",children:c.jsx("img",{src:_.imageUrl,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg",onError:S=>{S.target.style.display="none"}})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"URL do Vdeo (YouTube)"}),c.jsx("input",{type:"url",value:_.videoUrl,onChange:S=>I({..._,videoUrl:S.target.value}),className:"input-field",placeholder:"https://www.youtube.com/embed/ID_DO_VIDEO"}),c.jsx("p",{className:"text-xs text-light-darker mt-1",children:"Use o formato de incorporao do YouTube"})]})]}),c.jsxs("div",{className:"flex space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:x,className:"flex-1 btn-primary",children:"Salvar"})]})]})})}),c.jsx(Mt,{children:h&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>m(!1),children:c.jsx(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md",onClick:S=>S.stopPropagation(),children:c.jsxs(c.Fragment,{children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Remover Exerccio"}),c.jsxs("p",{className:"mb-6",children:["Tem certeza que deseja remover ",c.jsx("span",{className:"font-bold",children:u.exercise.name})," dos seus exerccios? Esta ao no pode ser desfeita."]}),c.jsxs("div",{className:"flex space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:C,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all duration-300",children:"Remover"})]})]})})})})]})},f7=()=>{var B;const{user:t,signOut:e,updateProfile:n}=hr(),{fetchWorkoutHistory:r,workoutHistory:s,updateRestTimes:i,restTimeBetweenSets:o,restTimeBetweenExercises:a}=Di(),[l,u]=V.useState(!1),[d,h]=V.useState(""),[m,p]=V.useState(""),[y,g]=V.useState(o),[b,v]=V.useState(a),[T,_]=V.useState(!1),[I,O]=V.useState(!1),[N,C]=V.useState({height:"",weight:"",target_weight:"",age:"",goal:"",experience_level:"",training_time:"",preferred_time:"",favorite_exercises:[],motivation:"",weekly_goal:3,bio:""});V.useEffect(()=>{var D,R,$,U;if(t){const z=((D=t.profile)==null?void 0:D.username)||t.displayName||((R=t.user_metadata)==null?void 0:R.name)||"",J=(($=t.profile)==null?void 0:$.avatar_url)||((U=t.user_metadata)==null?void 0:U.avatar_url)||"";console.log(" Dados do usurio carregados:"),console.log("   - Nome:",z),console.log("   - Avatar:",J),console.log("   - Profile completo:",t.profile),h(z),p(J),t.profile&&C({height:t.profile.height||"",weight:t.profile.weight||"",target_weight:t.profile.target_weight||"",age:t.profile.age||"",goal:t.profile.goal||"",experience_level:t.profile.experience_level||"",training_time:t.profile.training_time||"",preferred_time:t.profile.preferred_time||"",favorite_exercises:t.profile.favorite_exercises||[],motivation:t.profile.motivation||"",weekly_goal:t.profile.weekly_goal||3,bio:t.profile.bio||""}),r(t.uid)}},[t]),V.useEffect(()=>{g(o),v(a)},[o,a]);const x=async()=>{try{if(console.log(" === INICIANDO ATUALIZAO DO PERFIL ==="),console.log(" Nome digitado:",d),console.log(" Avatar URL:",m),console.log(" Usurio atual:",t==null?void 0:t.uid),!d.trim()){console.warn(" ERRO: Nome est vazio"),ee.error("Nome  obrigatrio");return}const D={name:d.trim(),avatar_url:m||""};console.log(" Dados que sero enviados:",D);const R=await n(D);console.log(" SUCESSO - Resultado da atualizao:",R),u(!1),console.log(" === PERFIL ATUALIZADO COM SUCESSO ==="),ee.success("Perfil atualizado com sucesso!")}catch(D){console.error(" === ERRO NO HANDLEUPDATEPROFILE ==="),console.error(" Erro completo:",D),ee.error(`Erro ao atualizar perfil: ${D.message}`)}},w=async()=>{try{const D={...N,height:N.height?parseFloat(N.height):null,weight:N.weight?parseFloat(N.weight):null,target_weight:N.target_weight?parseFloat(N.target_weight):null,age:N.age?parseInt(N.age):null,weekly_goal:N.weekly_goal?parseInt(N.weekly_goal):3};await n(D),O(!1),ee.success("Informaes pessoais atualizadas com sucesso!")}catch{ee.error("Erro ao atualizar informaes pessoais")}},k=async({betweenSets:D,betweenExercises:R})=>{try{await i(t.uid,{betweenSets:D,betweenExercises:R}),_(!1),ee.success("Tempos de descanso atualizados com sucesso!")}catch{ee.error("Erro ao atualizar tempos de descanso"),g(o),v(a)}},j=async()=>{try{await e(),ee.success("Logout realizado com sucesso")}catch{ee.error("Erro ao fazer logout")}},P=D=>{const R=Math.floor(D/60),$=D%60;return R===0?`${D} segundos`:$===0?R===1?"1 minuto":`${R} minutos`:`${R}:${$.toString().padStart(2,"0")}`},M=(()=>{if(!s.length)return{totalWorkouts:0,totalTime:"0m",longestWorkout:"0m",averageTime:"0m",firstWorkout:"N/A",lastWorkout:"N/A",lastWorkoutGroup:"Nenhum",daysSinceLastWorkout:0};const D=s.length,R=s.reduce((Ae,Ie)=>Ae+(Ie.duration||0),0),$=Math.floor(R/60),U=Math.floor($/60),z=U>0?`${U}h ${$%60}m`:`${$}m`,J=Math.max(...s.map(Ae=>Ae.duration||0)),G=Math.floor(J/60),Z=Math.floor(G/60),Q=Z>0?`${Z}h ${G%60}m`:`${G}m`,H=R/D,he=`${Math.floor(H/60)}m`,ye=[...s].sort((Ae,Ie)=>new Date(Ae.start_time)-new Date(Ie.start_time)),fe=new Date(ye[0].start_time).toLocaleDateString("pt-BR"),ke=new Date(ye[ye.length-1].start_time).toLocaleDateString("pt-BR"),Se=ye[ye.length-1],Ue=Se.category||"Outro",un=new Date(Se.start_time),De=Math.abs(new Date-un),tt=Math.floor(De/(1e3*60*60*24));return{totalWorkouts:D,totalTime:z,longestWorkout:Q,averageTime:he,firstWorkout:fe,lastWorkout:ke,lastWorkoutGroup:Ue,daysSinceLastWorkout:tt}})();return c.jsxs("div",{children:[c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Perfil"}),c.jsx("p",{className:"text-light-darker",children:"Gerencie suas informaes e veja estatsticas"})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"card mb-6",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"w-20 h-20 rounded-full bg-dark-medium flex items-center justify-center mr-4 overflow-hidden",children:m?c.jsx("img",{src:m,alt:d,className:"w-full h-full object-cover"}):c.jsx(Ta,{size:40,className:"text-primary"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-xl font-bold",children:d||(t==null?void 0:t.displayName)||((B=t==null?void 0:t.profile)==null?void 0:B.username)||"Usurio"}),c.jsx("p",{className:"text-light-darker",children:t==null?void 0:t.email})]}),!l&&c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(!0),className:"w-10 h-10 rounded-full bg-dark-medium flex items-center justify-center",children:c.jsx(zd,{className:"text-primary"})})]}),l?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-light-darker mb-1",children:"Nome"}),c.jsx("input",{id:"name",type:"text",value:d,onChange:D=>h(D.target.value),className:"input-field",placeholder:"Seu nome"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-2",children:"Foto de Perfil"}),c.jsx(gN,{onImageSelect:async D=>{if(!D){p("");return}p(D)},currentImage:m,bucket:"avatars"})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:x,className:"flex-1 btn-primary",children:"Salvar"})]})]}):c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:j,className:"btn-secondary w-full flex items-center justify-center",children:[c.jsx(_y,{className:"mr-2"}),"Sair da Conta"]})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"card mb-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(Ta,{className:"text-primary",size:20})}),c.jsx("div",{className:"flex-1",children:c.jsx("h2",{className:"text-xl font-bold",children:"Informaes Pessoais"})}),!I&&c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>O(!0),className:"w-10 h-10 rounded-full bg-dark-medium flex items-center justify-center",children:c.jsx(zd,{className:"text-primary"})})]}),I?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold mb-3",children:"Informaes Fsicas"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Altura (cm)"}),c.jsx("input",{type:"number",value:N.height,onChange:D=>C({...N,height:D.target.value}),className:"input-field",placeholder:"Ex: 175"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Idade"}),c.jsx("input",{type:"number",value:N.age,onChange:D=>C({...N,age:D.target.value}),className:"input-field",placeholder:"Ex: 25"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Peso Atual (kg)"}),c.jsx("input",{type:"number",value:N.weight,onChange:D=>C({...N,weight:D.target.value}),className:"input-field",placeholder:"Ex: 70",step:"0.1"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Meta de Peso (kg)"}),c.jsx("input",{type:"number",value:N.target_weight,onChange:D=>C({...N,target_weight:D.target.value}),className:"input-field",placeholder:"Ex: 75",step:"0.1"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold mb-3",children:"Objetivos e Experincia"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Objetivo Principal"}),c.jsxs("select",{value:N.goal,onChange:D=>C({...N,goal:D.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Selecione seu objetivo"}),c.jsx("option",{value:"ganhar_massa",children:"Ganhar Massa Muscular"}),c.jsx("option",{value:"perder_peso",children:"Perder Peso"}),c.jsx("option",{value:"definir",children:"Definir Msculos"}),c.jsx("option",{value:"forca",children:"Ganhar Fora"}),c.jsx("option",{value:"resistencia",children:"Melhorar Resistncia"}),c.jsx("option",{value:"saude",children:"Manter Sade"}),c.jsx("option",{value:"reabilitacao",children:"Reabilitao"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Nvel de Experincia"}),c.jsxs("select",{value:N.experience_level,onChange:D=>C({...N,experience_level:D.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Selecione seu nvel"}),c.jsx("option",{value:"iniciante",children:"Iniciante (0-6 meses)"}),c.jsx("option",{value:"intermediario",children:"Intermedirio (6 meses - 2 anos)"}),c.jsx("option",{value:"avancado",children:"Avanado (2+ anos)"}),c.jsx("option",{value:"expert",children:"Expert (5+ anos)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"H quanto tempo treina?"}),c.jsxs("select",{value:N.training_time,onChange:D=>C({...N,training_time:D.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Selecione"}),c.jsx("option",{value:"menos_3_meses",children:"Menos de 3 meses"}),c.jsx("option",{value:"3_6_meses",children:"3-6 meses"}),c.jsx("option",{value:"6_12_meses",children:"6 meses - 1 ano"}),c.jsx("option",{value:"1_2_anos",children:"1-2 anos"}),c.jsx("option",{value:"2_5_anos",children:"2-5 anos"}),c.jsx("option",{value:"mais_5_anos",children:"Mais de 5 anos"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Meta de Treinos por Semana"}),c.jsxs("select",{value:N.weekly_goal,onChange:D=>C({...N,weekly_goal:D.target.value}),className:"input-field",children:[c.jsx("option",{value:"2",children:"2 treinos por semana"}),c.jsx("option",{value:"3",children:"3 treinos por semana"}),c.jsx("option",{value:"4",children:"4 treinos por semana"}),c.jsx("option",{value:"5",children:"5 treinos por semana"}),c.jsx("option",{value:"6",children:"6 treinos por semana"}),c.jsx("option",{value:"7",children:"Todos os dias"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold mb-3",children:"Preferncias"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Horrio Preferido para Treinar"}),c.jsxs("select",{value:N.preferred_time,onChange:D=>C({...N,preferred_time:D.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Selecione"}),c.jsx("option",{value:"manha",children:"Manh (6h - 12h)"}),c.jsx("option",{value:"tarde",children:"Tarde (12h - 18h)"}),c.jsx("option",{value:"noite",children:"Noite (18h - 22h)"}),c.jsx("option",{value:"madrugada",children:"Madrugada (22h - 6h)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"O que mais te motiva?"}),c.jsxs("select",{value:N.motivation,onChange:D=>C({...N,motivation:D.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Selecione"}),c.jsx("option",{value:"saude",children:"Sade e bem-estar"}),c.jsx("option",{value:"estetica",children:"Melhorar aparncia"}),c.jsx("option",{value:"forca",children:"Ficar mais forte"}),c.jsx("option",{value:"desafio",children:"Superar desafios"}),c.jsx("option",{value:"stress",children:"Aliviar stress"}),c.jsx("option",{value:"energia",children:"Ter mais energia"}),c.jsx("option",{value:"autoestima",children:"Melhorar autoestima"}),c.jsx("option",{value:"competicao",children:"Competir"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Biografia"}),c.jsx("textarea",{value:N.bio,onChange:D=>C({...N,bio:D.target.value}),className:"input-field min-h-[80px] resize-none",placeholder:"Conte um pouco sobre voc, seus hobbies, o que gosta de fazer..."})]})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>{O(!1),t.profile&&C({height:t.profile.height||"",weight:t.profile.weight||"",target_weight:t.profile.target_weight||"",age:t.profile.age||"",goal:t.profile.goal||"",experience_level:t.profile.experience_level||"",training_time:t.profile.training_time||"",preferred_time:t.profile.preferred_time||"",favorite_exercises:t.profile.favorite_exercises||[],motivation:t.profile.motivation||"",weekly_goal:t.profile.weekly_goal||3,bio:t.profile.bio||""})},className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:w,className:"flex-1 btn-primary",children:"Salvar"})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-dark-light p-3 rounded-lg",children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Altura"}),c.jsx("div",{className:"font-bold",children:N.height?`${N.height} cm`:"No informado"})]}),c.jsxs("div",{className:"bg-dark-light p-3 rounded-lg",children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Idade"}),c.jsx("div",{className:"font-bold",children:N.age?`${N.age} anos`:"No informado"})]}),c.jsxs("div",{className:"bg-dark-light p-3 rounded-lg",children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Peso Atual"}),c.jsx("div",{className:"font-bold",children:N.weight?`${N.weight} kg`:"No informado"})]}),c.jsxs("div",{className:"bg-dark-light p-3 rounded-lg",children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Meta de Peso"}),c.jsx("div",{className:"font-bold",children:N.target_weight?`${N.target_weight} kg`:"No informado"})]})]}),c.jsx("div",{className:"bg-dark-light p-4 rounded-lg",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Objetivo Principal"}),c.jsx("div",{className:"font-bold",children:{ganhar_massa:"Ganhar Massa Muscular",perder_peso:"Perder Peso",definir:"Definir Msculos",forca:"Ganhar Fora",resistencia:"Melhorar Resistncia",saude:"Manter Sade",reabilitacao:"Reabilitao"}[N.goal]||"No informado"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Meta Semanal"}),c.jsxs("div",{className:"font-bold",children:[N.weekly_goal," treinos por semana"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Experincia"}),c.jsx("div",{className:"font-bold",children:{iniciante:"Iniciante",intermediario:"Intermedirio",avancado:"Avanado",expert:"Expert"}[N.experience_level]||"No informado"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Horrio Preferido"}),c.jsx("div",{className:"font-bold",children:{manha:"Manh",tarde:"Tarde",noite:"Noite",madrugada:"Madrugada"}[N.preferred_time]||"No informado"})]})]})}),N.motivation&&c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg",children:[c.jsx("div",{className:"text-sm text-light-darker",children:"O que mais te motiva"}),c.jsx("div",{className:"font-bold",children:{saude:"Sade e bem-estar",estetica:"Melhorar aparncia",forca:"Ficar mais forte",desafio:"Superar desafios",stress:"Aliviar stress",energia:"Ter mais energia",autoestima:"Melhorar autoestima",competicao:"Competir"}[N.motivation]||N.motivation})]}),N.bio&&c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg",children:[c.jsx("div",{className:"text-sm text-light-darker",children:"Sobre mim"}),c.jsx("div",{className:"mt-1",children:N.bio})]}),!N.height&&!N.age&&!N.goal&&!N.bio&&c.jsxs("div",{className:"text-center py-6 text-light-darker",children:[c.jsx(Ta,{className:"mx-auto mb-2",size:24}),c.jsx("p",{children:"Complete suas informaes pessoais"}),c.jsx("p",{className:"text-xs mt-1",children:"Isso nos ajuda a criar mensagens motivacionais personalizadas"})]})]})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"card mb-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(lx,{className:"text-secondary",size:20})}),c.jsx("div",{className:"flex-1",children:c.jsx("h2",{className:"text-xl font-bold",children:"Configuraes de Treino"})}),!T&&c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>_(!0),className:"w-10 h-10 rounded-full bg-dark-medium flex items-center justify-center",children:c.jsx(zd,{className:"text-secondary"})})]}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-2",children:"Tempo de Descanso"}),T?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-light-darker mb-1",children:"Entre sries do mesmo exerccio"}),c.jsxs("select",{value:y,onChange:D=>g(parseInt(D.target.value)),className:"input-field",children:[c.jsx("option",{value:"30",children:"30 segundos"}),c.jsx("option",{value:"45",children:"45 segundos"}),c.jsx("option",{value:"60",children:"1 minuto"}),c.jsx("option",{value:"90",children:"1 minuto e 30 segundos"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-light-darker mb-1",children:"Entre exerccios diferentes"}),c.jsxs("select",{value:b,onChange:D=>v(parseInt(D.target.value)),className:"input-field",children:[c.jsx("option",{value:"60",children:"1 minuto"}),c.jsx("option",{value:"90",children:"1 minuto e 30 segundos"}),c.jsx("option",{value:"120",children:"2 minutos"}),c.jsx("option",{value:"180",children:"3 minutos"})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>{_(!1),g(o),v(a)},className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>k({betweenSets:y,betweenExercises:b}),className:"flex-1 btn-secondary",children:"Salvar"})]})]}):c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:"Entre sries:"}),c.jsx("span",{className:"font-bold text-secondary",children:P(o)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:"Entre exerccios:"}),c.jsx("span",{className:"font-bold text-secondary",children:P(a)})]})]})]})})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Estatsticas"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[c.jsx(F.div,{className:"card",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(_o,{className:"text-primary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"Total de Treinos"}),c.jsx("p",{className:"text-xl font-bold",children:M.totalWorkouts})]})]})}),c.jsx(F.div,{className:"card",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(Wa,{className:"text-secondary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"Tempo Total"}),c.jsx("p",{className:"text-xl font-bold",children:M.totalTime})]})]})}),c.jsx(F.div,{className:"card",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(Kn,{className:"text-primary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"Treino Mais Longo"}),c.jsx("p",{className:"text-xl font-bold",children:M.longestWorkout})]})]})}),c.jsx(F.div,{className:"card",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(Wa,{className:"text-secondary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"Tempo Mdio"}),c.jsx("p",{className:"text-xl font-bold",children:M.averageTime})]})]})}),c.jsx(F.div,{className:"card col-span-2",whileHover:{scale:1.03},transition:{duration:.2},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(ft,{className:"text-primary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm text-light-darker",children:"ltimo Treino"}),c.jsx("p",{className:"text-xl font-bold",children:M.lastWorkoutGroup})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm text-light-darker",children:M.daysSinceLastWorkout===0?"Hoje":M.daysSinceLastWorkout===1?"Ontem":`${M.daysSinceLastWorkout} dias atrs`}),M.daysSinceLastWorkout>3&&c.jsx("p",{className:"text-xs text-primary font-medium",children:"Hora de treinar! "})]})]})})]}),c.jsxs("div",{className:"card",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Histrico de Treinos"}),s.length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between text-sm text-light-darker",children:[c.jsxs("span",{children:["Primeiro treino: ",M.firstWorkout]}),c.jsxs("span",{children:["ltimo treino: ",M.lastWorkout]})]}),c.jsxs("div",{className:"relative pt-6",children:[c.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-dark-medium"}),s.slice(0,10).map((D,R)=>{var H;const $=new Date(D.start_time),U=$.toLocaleDateString("pt-BR"),z=$.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),J=Math.floor(D.duration/60),G=D.duration%60,Z=`${J}:${G.toString().padStart(2,"0")}`,Q=((H=D.exercises)==null?void 0:H.length)||0;return c.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*R},className:"ml-8 mb-4 relative",children:[c.jsx("div",{className:"absolute -left-10 top-0 w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:c.jsx(_o,{className:"text-white",size:12})}),c.jsx("div",{className:"card",children:c.jsx("div",{className:"flex justify-between items-start",children:c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:U}),c.jsxs("p",{className:"text-sm text-light-darker",children:[z,"  ",Z,"  ",Q," exerccios"]})]})})})]},D.id)}),s.length>10&&c.jsxs("div",{className:"ml-8 text-center text-light-darker text-sm",children:["+ ",s.length-10," treinos anteriores"]})]})]}):c.jsx("div",{className:"text-center py-6 text-light-darker",children:"Nenhum treino registrado ainda"})]})]})]})},m7=({exercises:t,onCompleteSet:e,onShowMedia:n,currentExerciseIndex:r,onSetCurrentExercise:s})=>c.jsx("div",{className:"space-y-4",children:t.map((i,o)=>{const a=r===o,l=i.exerciseData,u=l.currentWeight||l.current_weight||0,d=l.weightUnit||l.weight_unit||"lbs",h=l.currentSets||l.current_sets||3,m=l.currentReps||l.current_reps||8;return c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*o},className:`card relative transition-all duration-300 ${a?"ring-2 ring-primary bg-gradient-to-r from-primary/10 to-secondary/10 shadow-lg":"hover:shadow-lg"}`,children:[c.jsx("div",{className:"absolute top-2 right-2 w-8 h-8 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center",children:o+1}),a&&c.jsxs("div",{className:"absolute top-2 left-2 flex items-center bg-primary text-white px-2 py-1 rounded-full text-xs font-bold",children:[c.jsx(Gh,{className:"mr-1",size:12}),"ATUAL"]}),!a&&c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>s(o),className:"absolute top-2 left-2 p-2 bg-dark-medium hover:bg-primary rounded-full transition-colors",title:"Marcar como exerccio atual",children:c.jsx(Gh,{className:"text-light-darker hover:text-white",size:16})}),c.jsxs("div",{className:"mt-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[l.exercise.image_url?c.jsx(F.img,{src:l.exercise.image_url,alt:l.exercise.name,className:"w-24 h-24 object-cover rounded-lg mr-4 cursor-pointer",whileHover:{scale:1.05},onClick:()=>n&&n(l.exercise)}):c.jsx("div",{className:"w-24 h-24 bg-dark-medium rounded-lg mr-4 flex items-center justify-center",children:c.jsx(ft,{className:"text-primary",size:32})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:`text-lg font-bold ${a?"text-primary":""}`,children:l.exercise.name}),c.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[c.jsxs("div",{className:`px-3 py-1 rounded-full ${a?"bg-primary text-white":"bg-primary bg-opacity-20"}`,children:[c.jsx("span",{className:`font-bold text-lg ${a?"text-white":"text-primary"}`,children:u}),c.jsx("span",{className:`font-medium text-sm ml-1 ${a?"text-white":"text-primary"}`,children:d})]}),c.jsxs("div",{className:"font-medium text-secondary",children:[h,"x",m]})]}),c.jsxs("div",{className:"flex justify-between text-sm text-light-darker mb-2",children:[c.jsxs("span",{children:[i.sets.filter(p=>p.completed).length," de ",i.sets.length," sries"]}),i.sets.filter(p=>p.completed).length===i.sets.length?c.jsx("span",{className:"text-green-500 font-medium",children:" Concludo"}):i.sets.some(p=>p.completed)?c.jsx("span",{className:"text-yellow-500 font-medium",children:" Incompleto"}):c.jsx("span",{className:"text-light-darker",children:"No iniciado"})]}),c.jsx(ls,{value:i.sets.filter(p=>p.completed).length,max:i.sets.length,showLabel:!1})]})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:i.sets.map((p,y)=>c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(o,y),disabled:p.completed,className:`p-3 rounded-lg flex flex-col items-center justify-center transition-all ${p.completed?"bg-primary text-white":a?"bg-secondary bg-opacity-20 text-secondary hover:bg-secondary hover:text-white border border-secondary":"bg-dark-light text-light-darker hover:bg-dark-medium"}`,children:[c.jsxs("span",{className:"text-sm",children:["Srie ",y+1]}),c.jsxs("span",{className:"font-bold",children:[p.reps," reps"]}),p.completed&&c.jsx(za,{className:"mt-1"})]},y))})]})]},i.id)})}),p7=[{id:"push",name:"Push (Empurrar)",description:"Peito, Ombros e Trceps",categories:["Peito","Ombros","Trceps"],color:"#FF4500",estimatedTime:45},{id:"pull",name:"Pull (Puxar)",description:"Costas e Bceps",categories:["Costas","Bceps"],color:"#4A90E2",estimatedTime:40},{id:"legs",name:"Legs (Pernas)",description:"Pernas completo",categories:["Pernas","Glteos","Panturrilha"],color:"#28A745",estimatedTime:50},{id:"upper",name:"Upper Body",description:"Parte superior completa",categories:["Peito","Costas","Ombros","Bceps","Trceps"],color:"#6F42C1",estimatedTime:60},{id:"fullbody",name:"Full Body",description:"Corpo inteiro",categories:["Peito","Costas","Pernas","Ombros"],color:"#FD7E14",estimatedTime:70}],g7=({onSelectTemplate:t,userExercises:e=[]})=>{const[n,r]=V.useState([]),[s,i]=V.useState(!1),[o,a]=V.useState({name:"",description:"",categories:[],color:"#FF4500"}),l=[...p7,...n],u=g=>e.filter(b=>g.includes(b.exercise.category)).length,d=g=>{if(u(g.categories)===0){ee.error(`Voc no tem exerccios cadastrados para ${g.name}`);return}t(g),ee.success(`Template "${g.name}" selecionado!`)},h=()=>{if(!o.name||o.categories.length===0){ee.error("Nome e pelo menos uma categoria so obrigatrios");return}const g={id:`custom-${Date.now()}`,...o,isCustom:!0,estimatedTime:o.categories.length*15};r(b=>[...b,g]),i(!1),a({name:"",description:"",categories:[],color:"#FF4500"}),ee.success("Template personalizado criado!")},m=g=>{r(b=>b.filter(v=>v.id!==g)),ee.success("Template removido")},p=["Peito","Costas","Pernas","Ombros","Bceps","Trceps","Antebrao","Abdmen","Glteos","Panturrilha","Cardio"],y=["#FF4500","#4A90E2","#28A745","#6F42C1","#FD7E14","#DC3545","#20C997","#6610F2"];return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:"Templates de Treino"}),c.jsx("p",{className:"text-light-darker text-sm",children:"Escolha um template ou crie o seu prprio"})]}),c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(!0),className:"btn-secondary flex items-center",children:[c.jsx(Yr,{className:"mr-2"}),"Criar Template"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(g=>{const b=u(g.categories);return c.jsxs(F.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"card relative group cursor-pointer",style:{borderLeft:`4px solid ${g.color}`},onClick:()=>d(g),children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-lg",children:g.name}),c.jsx("p",{className:"text-light-darker text-sm",children:g.description})]}),g.isCustom&&c.jsx("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("button",{onClick:v=>{v.stopPropagation(),m(g.id)},className:"p-1 rounded-full bg-dark-medium hover:bg-red-600 transition-colors",children:c.jsx(nN,{className:"text-red-500",size:14})})})]}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.categories.map(v=>c.jsx("span",{className:"px-2 py-1 bg-dark-light text-xs rounded-full",style:{color:g.color},children:v},v))}),c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsxs("div",{className:"flex items-center text-light-darker",children:[c.jsx(ft,{className:"mr-1",size:16}),c.jsxs("span",{children:[b," exerccios"]})]}),c.jsx("div",{className:"flex items-center text-light-darker",children:c.jsxs("span",{children:["~",g.estimatedTime,"min"]})})]}),b===0&&c.jsx("div",{className:"absolute inset-0 bg-dark-medium bg-opacity-80 rounded-lg flex items-center justify-center",children:c.jsxs("p",{className:"text-light-darker text-center",children:["Nenhum exerccio",c.jsx("br",{}),"disponvel"]})})]},g.id)})}),c.jsx(Mt,{children:s&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>i(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Criar Template Personalizado"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Nome do Template"}),c.jsx("input",{type:"text",value:o.name,onChange:g=>a({...o,name:g.target.value}),className:"input-field",placeholder:"Ex: Meu Treino ABC"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Descrio"}),c.jsx("input",{type:"text",value:o.description,onChange:g=>a({...o,description:g.target.value}),className:"input-field",placeholder:"Ex: Treino focado em fora"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-2",children:"Grupos Musculares"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(g=>c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>{const b=o.categories.includes(g);a({...o,categories:b?o.categories.filter(v=>v!==g):[...o.categories,g]})},className:`p-2 rounded-lg text-sm transition-all ${o.categories.includes(g)?"bg-primary text-white":"bg-dark-light text-light-darker hover:bg-dark-medium"}`,children:g},g))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-2",children:"Cor do Template"}),c.jsx("div",{className:"flex space-x-2",children:y.map(g=>c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a({...o,color:g}),className:`w-8 h-8 rounded-full border-2 ${o.color===g?"border-white":"border-transparent"}`,style:{backgroundColor:g}},g))})]})]}),c.jsxs("div",{className:"flex space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:h,className:"flex-1 btn-primary",children:"Criar Template"})]})]})})})]})},y7=({exercises:t=[],onCreateSuperset:e,onRemoveSuperset:n})=>{const[r,s]=V.useState([]),[i,o]=V.useState([]),[a,l]=V.useState(!1),[u,d]=V.useState(""),h=g=>{s(b=>b.find(T=>T.id===g.id)?b.filter(T=>T.id!==g.id):b.length>=4?(ee.warning("Mximo 4 exerccios por superset"),b):[...b,g])},m=()=>{if(r.length<2){ee.error("Selecione pelo menos 2 exerccios");return}const g={id:`superset-${Date.now()}`,name:u||`Superset ${i.length+1}`,exercises:r,type:r.length===2?"superset":"circuit",restBetweenExercises:10,restBetweenRounds:90};o(b=>[...b,g]),s([]),d(""),l(!1),e&&e(g),ee.success(`${g.type==="superset"?"Superset":"Circuito"} criado!`)},p=g=>{o(b=>b.filter(v=>v.id!==g)),n&&n(g),ee.info("Superset removido")},y=({superset:g})=>c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card border-l-4 border-secondary",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(cx,{className:"text-secondary",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold",children:g.name}),c.jsxs("p",{className:"text-sm text-light-darker",children:[g.type==="superset"?"Superset":"Circuito","  ",g.exercises.length," exerccios"]})]})]}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>p(g.id),className:"p-2 rounded-full bg-dark-medium hover:bg-red-600 transition-colors",children:c.jsx(Tr,{className:"text-red-500",size:16})})]}),c.jsx("div",{className:"space-y-2",children:g.exercises.map((b,v)=>c.jsxs("div",{className:"flex items-center bg-dark-light p-3 rounded-lg",children:[c.jsx("div",{className:"w-6 h-6 rounded-full bg-secondary text-white text-xs flex items-center justify-center mr-3",children:v+1}),b.exercise.image_url&&c.jsx("img",{src:b.exercise.image_url,alt:b.exercise.name,className:"w-10 h-10 object-cover rounded mr-3"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-medium",children:b.exercise.name}),c.jsxs("p",{className:"text-xs text-light-darker",children:[b.current_weight," ",b.weight_unit||"lbs","  ",b.current_sets,"x",b.current_reps]})]}),v<g.exercises.length-1&&c.jsx("div",{className:"text-secondary",children:c.jsx(Tp,{size:16})})]},b.id))}),c.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-dark-light p-2 rounded text-center",children:[c.jsx("div",{className:"text-light-darker",children:"Entre exerccios"}),c.jsxs("div",{className:"font-bold",children:[g.restBetweenExercises,"s"]})]}),c.jsxs("div",{className:"bg-dark-light p-2 rounded text-center",children:[c.jsx("div",{className:"text-light-darker",children:"Entre rounds"}),c.jsxs("div",{className:"font-bold",children:[Math.floor(g.restBetweenRounds/60),":",(g.restBetweenRounds%60).toString().padStart(2,"0")]})]})]})]});return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Tp,{className:"text-secondary mr-2",size:24}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:"Supersets & Circuitos"}),c.jsx("p",{className:"text-sm text-light-darker",children:"Combine exerccios para treinos mais intensos"})]})]}),c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(!0),className:"btn-secondary flex items-center",children:[c.jsx(Yr,{className:"mr-2"}),"Criar Superset"]})]}),i.length>0&&c.jsx("div",{className:"space-y-4 mb-6",children:i.map(g=>c.jsx(y,{superset:g},g.id))}),c.jsx(Mt,{children:a&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>l(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Criar Superset/Circuito"}),c.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-dark-medium rounded-full transition-colors",children:c.jsx(Tr,{size:20})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-2",children:"Nome do Superset (opcional)"}),c.jsx("input",{type:"text",value:u,onChange:g=>d(g.target.value),className:"input-field",placeholder:"Ex: Superset de Peito"})]}),r.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"font-bold mb-3",children:["Exerccios Selecionados (",r.length,")"]}),c.jsx("div",{className:"space-y-2",children:r.map((g,b)=>c.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center bg-dark-light p-3 rounded-lg",children:[c.jsx("div",{className:"w-6 h-6 rounded-full bg-secondary text-white text-xs flex items-center justify-center mr-3",children:b+1}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-medium",children:g.exercise.name}),c.jsxs("p",{className:"text-xs text-light-darker",children:[g.exercise.category,"  ",g.current_weight," ",g.weight_unit||"lbs"]})]}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(g),className:"p-1 rounded-full bg-dark-medium hover:bg-red-600 transition-colors",children:c.jsx(Tr,{className:"text-red-500",size:14})})]},g.id))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-bold mb-3",children:"Exerccios Disponveis"}),c.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto",children:t.filter(g=>!r.find(b=>b.id===g.id)).map(g=>c.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(g),className:"flex items-center p-3 bg-dark-medium hover:bg-dark-light rounded-lg transition-colors text-left",children:[g.exercise.image_url&&c.jsx("img",{src:g.exercise.image_url,alt:g.exercise.name,className:"w-10 h-10 object-cover rounded mr-3"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-medium",children:g.exercise.name}),c.jsxs("p",{className:"text-xs text-light-darker",children:[g.exercise.category,"  ",g.current_weight," ",g.weight_unit||"lbs"]})]}),c.jsx(Yr,{className:"text-primary",size:16})]},g.id))})]}),c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg mb-6",children:[c.jsx("h4",{className:"font-medium mb-2",children:" Dicas:"}),c.jsxs("ul",{className:"text-sm text-light-darker space-y-1",children:[c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Superset (2 exerccios):"})," Execute um aps o outro sem descanso"]}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Circuito (3+ exerccios):"})," Execute todos em sequncia"]}),c.jsx("li",{children:" Combine exerccios de grupos musculares diferentes para melhor resultado"}),c.jsx("li",{children:" Evite exerccios que usem os mesmos msculos em sequncia"})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>l(!1),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:m,disabled:r.length<2,className:"flex-1 btn-secondary disabled:opacity-50",children:["Criar ",r.length===2?"Superset":"Circuito"]})]})]})})}),i.length===0&&!a&&c.jsxs("div",{className:"card text-center py-8",children:[c.jsx(Tp,{className:"text-light-darker mx-auto mb-4",size:48}),c.jsx("p",{className:"text-light-darker",children:"Nenhum superset criado ainda"}),c.jsx("p",{className:"text-sm text-light-darker mt-2",children:"Combine exerccios para treinos mais intensos e eficientes"})]})]})},Zh=({time:t,type:e="workout",restTimeTotal:n,isExerciseRest:r=!1})=>{const{soundEnabled:s,vibrationEnabled:i}=Jf(),o=e==="rest",a=o?lx:Wa,l=o?r?"Descanso Entre Exerccios":"Descanso Entre Sries":"Tempo de Treino",u=()=>{if(!o||!n)return 0;const[b,v]=t.split(":").map(Number),T=b*60+v;return(n-T)/n*100},h=(()=>{const[b,v]=t.split(":").map(Number);return b*60+v})(),m=o&&h<=10&&h>0,p=o&&h<=3&&h>0,y=(b="normal")=>{if(s)try{const v=new(window.AudioContext||window.webkitAudioContext),T=(_,I,O=.3)=>{const N=v.createOscillator(),C=v.createGain();N.connect(C),C.connect(v.destination),N.frequency.value=_,N.type="sine",C.gain.setValueAtTime(O,v.currentTime),C.gain.exponentialRampToValueAtTime(.01,v.currentTime+I),N.start(v.currentTime),N.stop(v.currentTime+I)};b==="urgent"?(T(1e3,.2,.5),setTimeout(()=>T(1e3,.2,.5),250),setTimeout(()=>T(1e3,.2,.5),500)):b==="warning"?(T(800,.3,.4),setTimeout(()=>T(800,.3,.4),400)):T(600,.4,.3)}catch(v){console.warn("No foi possvel reproduzir o som:",v);try{const T=new Audio("/alert.mp3");T.volume=.5,T.play().catch(_=>console.warn("Fallback de udio tambm falhou:",_))}catch(T){console.warn("Fallback de udio falhou:",T)}}},g=(b=[200])=>{if(i){if(!("vibrate"in navigator)){console.warn("Vibrao no suportada neste navegador");return}try{if(/iPad|iPhone|iPod/.test(navigator.userAgent)){const T=Array.isArray(b)?b[0]||200:b;navigator.vibrate(T)}else navigator.vibrate(b)}catch(v){console.warn("Vibrao no suportada:",v)}}};return me.useEffect(()=>{m&&h===10?(y("warning"),g([100,100,100])):p&&h<=3&&h>0?(y("urgent"),g([300])):h===0&&o&&(y("urgent"),g([500,200,500,200,500]))},[h,m,p,o]),c.jsxs(c.Fragment,{children:[c.jsx(Mt,{children:p&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:[0,.3,0],transition:{duration:.5,repeat:1/0,ease:"easeInOut"}},exit:{opacity:0},className:"fixed inset-0 bg-red-500 pointer-events-none z-40"})}),c.jsx(Mt,{children:m&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:[0,.8,0],scale:[1,1.02,1],transition:{duration:1,repeat:1/0,ease:"easeInOut"}},exit:{opacity:0},className:"fixed inset-0 border-4 border-red-500 pointer-events-none z-30 rounded-lg"})}),c.jsx(F.div,{initial:{scale:.9,opacity:0},animate:{scale:m?[1,1.1,1]:1,opacity:1,y:p?[0,-5,0]:0},transition:{duration:m?.5:.3,repeat:m?1/0:0},className:`
          fixed ${o?"top-24":"top-4"} left-1/2 -translate-x-1/2 z-50 
          px-8 py-4 rounded-2xl shadow-3d border backdrop-blur-sm
          ${p?"bg-red-600/90 border-red-400 shadow-red-500/50":m?"bg-orange-600/90 border-orange-400 shadow-orange-500/30":o?"bg-dark-lighter/90 border-secondary":"bg-dark-lighter/90 border-dark-medium"}
        `,children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(F.span,{className:`text-sm mb-1 ${p?"text-white font-bold":"text-light-darker"}`,animate:p?{scale:[1,1.1,1],transition:{duration:.5,repeat:1/0}}:{},children:p?" TEMPO ESGOTANDO!":l}),c.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[c.jsx(F.div,{animate:m?{rotate:[0,10,-10,0],transition:{duration:.5,repeat:1/0}}:{},children:me.createElement(a,{className:p?"text-white":m?"text-orange-300":o?"text-secondary":"text-primary",size:m?40:32})}),c.jsx(F.span,{className:`font-mono font-bold text-4xl ${p?"text-white":m?"text-orange-300":"text-white"}`,animate:p?{scale:[1,1.3,1],textShadow:["0 0 10px rgba(255,255,255,0.8)","0 0 30px rgba(255,0,0,0.8)","0 0 10px rgba(255,255,255,0.8)"],transition:{duration:.5,repeat:1/0}}:m?{scale:[1,1.1,1],textShadow:["0 0 5px rgba(255,165,0,0.5)","0 0 20px rgba(255,165,0,0.8)","0 0 5px rgba(255,165,0,0.5)"],transition:{duration:1,repeat:1/0}}:{textShadow:["0 0 5px rgba(255,255,255,0.5)","0 0 20px rgba(255,255,255,0.3)","0 0 5px rgba(255,255,255,0.5)"],transition:{duration:2,repeat:1/0}},children:t})]}),o&&c.jsx("div",{className:"w-full h-2 bg-dark-medium rounded-full mt-2 overflow-hidden",children:c.jsx(F.div,{className:`h-full ${p?"bg-red-400":m?"bg-orange-400":"bg-secondary"}`,initial:{width:"100%"},animate:{width:`${u()}%`,boxShadow:m?["0 0 5px rgba(255,165,0,0.5)","0 0 15px rgba(255,165,0,0.8)","0 0 5px rgba(255,165,0,0.5)"]:void 0},transition:{width:{duration:.3},boxShadow:{duration:.5,repeat:1/0}}})}),p&&c.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:[0,1,0],y:[10,0,-5],transition:{duration:.5,repeat:1/0}},className:"mt-2 text-center",children:c.jsx("span",{className:"text-white font-bold text-sm",children:" PREPARE-SE! "})})]})})]})},v7=({exercise:t,onAcceptSuggestion:e,onDecline:n,onClose:r})=>{var v;const[s,i]=V.useState("weight"),[o,a]=V.useState(""),[l,u]=V.useState("");if(!t)return null;const d=()=>{const T=t.progressLevel||0;return T===0?{current:"3x8",next:"3x10"}:T===1?{current:"3x10",next:"3x12"}:T===2?{current:"3x12",next:"Aumento de peso"}:{current:"3x8",next:"3x10"}},{current:h,next:m}=d(),p=t.currentWeight||0,y=t.weightUnit||"lbs",g={weight:{title:"Aumentar Peso",description:"Voltar para 3x8 com mais peso",icon:ft,color:"#FF4500",newWeight:p+(y==="kg"?2.5:5),newReps:8,newLevel:0},reps:{title:"Aumentar Repeties",description:m==="Aumento de peso"?"Manter peso e aumentar repeties":`Evoluir para ${m}`,icon:Dn,color:"#4A90E2",newWeight:p,newReps:t.progressLevel===0?10:t.progressLevel===1?12:15,newLevel:t.progressLevel<2?t.progressLevel+1:2},custom:{title:"Personalizado",description:"Definir peso e repeties manualmente",icon:Yr,color:"#28A745",newWeight:parseFloat(o)||p,newReps:parseInt(l)||8,newLevel:0}},b=()=>{const T=g[s];if(s==="custom"){if(!o||!l){ee.error("Preencha peso e repeties para opo personalizada");return}if(parseFloat(o)<=0||parseInt(l)<=0){ee.error("Peso e repeties devem ser maiores que zero");return}}const _={newWeight:T.newWeight,newReps:T.newReps,newLevel:T.newLevel,resetProgress:!0};e(_)};return c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",onClick:r,children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-3",children:c.jsx(vn,{className:"text-primary",size:24})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:"Parabns! "}),c.jsx("p",{className:"text-sm text-light-darker",children:"Voc completou 10 treinos!"})]})]}),c.jsx("button",{onClick:r,className:"p-2 hover:bg-dark-medium rounded-full transition-colors",children:c.jsx(Tr,{size:20})})]}),c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg mb-6",children:[c.jsx("h3",{className:"font-bold text-lg",children:(v=t.exercise)==null?void 0:v.name}),c.jsxs("p",{className:"text-light-darker",children:["Nvel atual: ",h,"  ",p," ",y]}),c.jsx("div",{className:"mt-2 text-sm text-green-500",children:" 10/10 treinos completados!"})]}),c.jsx("div",{className:"space-y-3 mb-6",children:Object.entries(g).map(([T,_])=>{const I=_.icon;return c.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(T),className:`
                  w-full p-4 rounded-lg border-2 transition-all text-left
                  ${s===T?"border-primary bg-primary bg-opacity-10":"border-dark-medium bg-dark-light hover:bg-dark-medium"}
                `,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:`${_.color}20`,color:_.color},children:c.jsx(I,{size:20})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-bold",children:_.title}),c.jsx("p",{className:"text-sm text-light-darker",children:_.description}),T!=="custom"&&c.jsxs("p",{className:"text-xs mt-1",style:{color:_.color},children:["Novo: ",_.newWeight," ",y,"  3x",_.newReps]})]}),c.jsx("div",{className:`
                    w-5 h-5 rounded-full border-2 flex items-center justify-center
                    ${s===T?"border-primary bg-primary":"border-dark-medium"}
                  `,children:s===T&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]})},T)})}),s==="custom"&&c.jsxs(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-dark-light p-4 rounded-lg mb-6 space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Novo Peso"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"number",value:o,onChange:T=>a(T.target.value),step:"0.5",min:"0",className:"input-field flex-1",placeholder:`Ex: ${p+(y==="kg"?2.5:5)}`}),c.jsx("div",{className:"px-3 py-2 bg-dark-medium rounded-lg text-sm",children:y})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-light-darker mb-1",children:"Novas Repeties"}),c.jsx("input",{type:"number",value:l,onChange:T=>u(T.target.value),min:"1",max:"50",className:"input-field",placeholder:"Ex: 8"})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:n,className:"flex-1 py-3 px-4 bg-dark-medium text-light rounded-lg font-medium",children:"Manter Atual"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:b,className:"flex-1 btn-primary py-3",children:"Aplicar Progresso"})]}),c.jsx("div",{className:"mt-4 p-3 bg-dark-light rounded-lg",children:c.jsxs("p",{className:"text-xs text-light-darker",children:[" ",c.jsx("strong",{children:"Dica:"})," A progresso  fundamental para o crescimento muscular. Aumente gradualmente o peso ou repeties para continuar evoluindo."]})})]})})},x7=()=>{var Ve,nt;const t=Ci(),{user:e}=hr(),{fetchUserExercises:n,userExercises:r,currentWorkout:s,selectedGroups:i,categories:o,timer:a,formatTimer:l,startWorkout:u,addExerciseToWorkout:d,completeSet:h,finishWorkout:m,cancelWorkout:p,reorderExercises:y,applyProgression:g,loading:b,restTimer:v,restTimeBetweenSets:T,restTimeBetweenExercises:_,isExerciseRest:I,startRestTimer:O,stopRestTimer:N}=Di(),[C,x]=V.useState(!1),[w,k]=V.useState(!1),[j,P]=V.useState(!s&&i.length===0),[S,M]=V.useState(!1),[B,D]=V.useState(!1),[R,$]=V.useState(!1),[U,z]=V.useState(null),[J,G]=V.useState([]),[Z,Q]=V.useState(0),[H,se]=V.useState(""),[he,ye]=V.useState(!1),[fe,ke]=V.useState(null),[Se,Ue]=V.useState([]);V.useEffect(()=>{!s&&i.length===0&&P(!0)},[s,i]),V.useEffect(()=>{e!=null&&e.uid&&i.length>0&&(console.log("Fetching exercises for groups:",i),console.log("User ID:",e.uid),console.log("Selected groups:",i),n(e.uid))},[e==null?void 0:e.uid,i,n]),V.useEffect(()=>{if(r&&i.length>0){const K=r.filter(_e=>i.includes(_e.exercise.category));Ue(K),console.log("Filtered exercises for",i,":",K)}},[r,i]);const un=K=>{G(_e=>_e.includes(K)?_e.filter(Ne=>Ne!==K):[..._e,K])},Ft=()=>{if(J.length===0){ee.error("Selecione pelo menos um grupo muscular");return}console.log("Confirming groups selection:",J),u(J),P(!1);const K=J.length===1?J[0]:`${J.length} grupos`;ee.success(`Treino de ${K} iniciado!`),G([])},De=K=>{G(K.categories),M(!1),P(!0)},tt=()=>{const K=ze.filter(_e=>!s.exercises.some(Ne=>Ne.userExerciseId===_e.id));K.forEach(_e=>{d(_e.id,_e)}),K.length>0&&ee.success(`${K.length} exerccios adicionados ao treino`)},Ae=K=>{d(K.id,K),ee.success(`${K.exercise.name} adicionado ao treino`)},Ie=(K,_e)=>{h(K,_e),s.exercises[K].sets.every(Fe=>Fe.completed)&&K<s.exercises.length-1&&Q(K+1)},ct=K=>{Q(K),ee.success(`Exerccio ${K+1} selecionado como atual`)},pt=K=>{ke(K),ye(!0)},Ge=async()=>{var K,_e,Ne,Ke,Fe,gt;try{if(console.log(" === INICIANDO HANDLEFINISHWORKOUT ==="),console.log(" Estado atual completo:",{currentWorkout:!!s,exercisesLength:((K=s==null?void 0:s.exercises)==null?void 0:K.length)||0,loading:b,user:!!e,showFinishModal:C,currentWorkoutData:s}),se(""),!((_e=s==null?void 0:s.exercises)!=null&&_e.length)){console.error(" Nenhum exerccio no treino"),se("Adicione pelo menos um exerccio antes de finalizar o treino");return}const Oe=s.exercises.some(Qt=>{var Ln;return(Ln=Qt.sets)==null?void 0:Ln.some(Mn=>Mn.completed)});if(console.log(" Verificao de sries completadas:",{hasCompletedSets:Oe,exercisesWithSets:s.exercises.map(Qt=>{var Ln,Mn,Ir,dn;return{name:(Mn=(Ln=Qt.exerciseData)==null?void 0:Ln.exercise)==null?void 0:Mn.name,setsCount:(Ir=Qt.sets)==null?void 0:Ir.length,completedSets:(dn=Qt.sets)==null?void 0:dn.filter(_n=>_n.completed).length}})}),!Oe){console.error(" Nenhuma srie completada"),se("Complete pelo menos uma srie antes de finalizar o treino");return}console.log(" Parando timer de descanso..."),N(),console.log(" Chamando finishWorkout...");const yt=new Promise((Qt,Ln)=>{setTimeout(()=>Ln(new Error("Timeout: Operao demorou mais de 30 segundos")),3e4)}),Oi=m(e==null?void 0:e.uid),On=await Promise.race([Oi,yt]);if(console.log(" finishWorkout retornou:",On),On&&On.progressionSuggestions&&On.progressionSuggestions.length>0){console.log(" Exerccios que atingiram 10 treinos:",On.progressionSuggestions);const Qt=On.progressionSuggestions[0];z(Qt),$(!0)}x(!1),console.log(" Treino finalizado com sucesso!"),ee.success("Treino finalizado com sucesso!"),(Ne=On==null?void 0:On.progressionSuggestions)!=null&&Ne.length||t("/dashboard")}catch(Oe){console.error(" === ERRO NO HANDLEFINISHWORKOUT ==="),console.error(" Erro:",Oe),console.error(" Mensagem:",Oe.message);let yt="Erro ao finalizar treino";(Ke=Oe.message)!=null&&Ke.includes("Timeout")?yt="A operao demorou muito para responder. Tente novamente.":(Fe=Oe.message)!=null&&Fe.includes("Failed to fetch")?yt="Erro de conexo. Verifique sua internet e tente novamente.":(gt=Oe.message)!=null&&gt.includes("permission")?yt="Erro de permisso. Faa login novamente.":Oe.message&&(yt=Oe.message),se(yt)}},Ut=()=>{N(),p(),k(!1),ee.info("Treino cancelado"),t("/dashboard")},Be=async K=>{try{await g(U.userExerciseId,K),await n(e.uid),$(!1),z(null);const _e=K.newWeight!==U.currentWeight?`  Peso: ${K.newWeight} ${U.weightUnit}`:"";ee.success(` Progresso aplicada! 3x${K.newReps}${_e}`),t("/dashboard")}catch{ee.error("Erro ao aplicar progresso")}},je=()=>{$(!1),z(null),ee.info("Progresso mantida. Continue treinando!"),t("/dashboard")},ze=Se.filter(K=>s?!s.exercises.some(_e=>_e.userExerciseId===K.id):!0);return console.log(" === ESTADO ATUAL DO WORKOUT ==="),console.log("Current state:",{selectedGroups:i,currentWorkout:!!s,filteredExercisesCount:Se.length,availableExercisesCount:ze.length,userExercisesTotal:r.length,filteredExercisesList:Se.map(K=>({name:K.exercise.name,category:K.exercise.category})),availableExercisesList:ze.map(K=>({name:K.exercise.name,category:K.exercise.category})),loading:b}),c.jsxs("div",{children:[c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Treino"}),c.jsx("p",{className:"text-light-darker",children:s?`Treino de ${i.length===1?i[0]:`${i.length} grupos`} em andamento`:"Selecione grupos musculares para iniciar"})]}),s&&c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"mb-6 flex gap-4",children:[c.jsx(Zh,{time:l(),type:"workout"}),v!==null&&c.jsx(Zh,{time:l(v),type:"rest",restTimeTotal:I?_:T,isExerciseRest:I})]}),c.jsx(Mt,{children:j&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>t("/dashboard"),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md",onClick:K=>K.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Selecione os Grupos Musculares"}),c.jsx("p",{className:"text-sm text-light-darker mb-4",children:"Voc pode selecionar mltiplos grupos para um treino mais completo"}),c.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:o.map(K=>c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>un(K),className:`p-3 rounded-lg text-center transition-all ${J.includes(K)?"bg-primary text-white":"bg-dark-light text-light-darker hover:bg-dark-medium"}`,children:[K,J.includes(K)&&c.jsx("div",{className:"mt-1 text-xs",children:" Selecionado"})]},K))}),J.length>0&&c.jsxs("div",{className:"mb-4 p-3 bg-dark-light rounded-lg",children:[c.jsx("p",{className:"text-sm text-light-darker mb-2",children:"Grupos selecionados:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:J.map(K=>c.jsx("span",{className:"px-2 py-1 bg-primary text-white text-xs rounded-full",children:K},K))})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>t("/dashboard"),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>{P(!1),M(!0)},className:"flex-1 btn-secondary",children:"Templates"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:Ft,className:"flex-1 btn-primary",disabled:J.length===0,children:"Iniciar Treino"})]})]})})}),c.jsx(Mt,{children:S&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>M(!1),children:c.jsx(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:K=>K.stopPropagation(),children:c.jsx(g7,{onSelectTemplate:De,userExercises:r})})})}),c.jsx(Mt,{children:B&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>D(!1),children:c.jsx(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:K=>K.stopPropagation(),children:c.jsx(y7,{exercises:Se,onCreateSuperset:K=>{console.log("Superset created:",K),D(!1)}})})})}),s&&ze.length>0&&c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold",children:["Exerccios Disponveis",i.length===1&&` - ${i[0]}`,i.length>1&&` (${i.length} grupos)`]}),c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:tt,className:"px-4 py-2 bg-secondary text-white rounded-lg text-sm font-medium",disabled:ze.length===0,children:["Selecionar Todos (",ze.length,")"]}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>D(!0),className:"px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium",children:"Supersets"})]}),c.jsx("div",{className:"space-y-3",children:ze.map(K=>c.jsx(F.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"card cursor-pointer",onClick:()=>Ae(K),children:c.jsxs("div",{className:"flex items-center",children:[K.exercise.image_url&&c.jsx("img",{src:K.exercise.image_url,alt:K.exercise.name,className:"w-16 h-16 object-cover rounded-lg mr-4"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold",children:K.exercise.name}),c.jsxs("p",{className:"text-sm text-light-darker",children:[K.exercise.category,"  ",K.currentWeight||K.current_weight||0," ",K.weightUnit||K.weight_unit||"lbs","  ",K.currentSets||K.current_sets||3,"x",K.currentReps||K.current_reps||8]}),K.exercise.description&&c.jsx("p",{className:"text-xs text-light-darker mt-1 truncate",children:K.exercise.description})]}),c.jsx(Yr,{className:"text-primary ml-2",size:20})]})},K.id))})]}),s&&c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Exerccios do Treino"}),c.jsx("div",{className:"bg-primary bg-opacity-20 border border-primary rounded-lg px-3 py-2",children:c.jsxs("div",{className:"flex items-center text-sm font-medium text-primary",children:[c.jsx(Gh,{className:"mr-2 animate-pulse",size:18}),c.jsx("span",{children:"Clique no cone play para marcar como atual"})]})})]}),s.exercises.length>0?c.jsx(m7,{exercises:s.exercises,onCompleteSet:Ie,onShowMedia:pt,currentExerciseIndex:Z,onSetCurrentExercise:ct}):c.jsxs("div",{className:"card text-center py-6",children:[c.jsx("p",{className:"text-light-darker",children:ze.length>0?`Selecione exerccios de ${i.join(", ")} acima para comear`:`Voc no tem exerccios cadastrados para ${i.join(", ")}. V para a pgina de Exerccios para adicionar alguns.`}),ze.length===0&&c.jsx(Dt,{to:"/exercises",className:"inline-block mt-4",children:c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},className:"btn-secondary",children:[c.jsx(Yr,{className:"mr-2"}),"Adicionar Exerccios"]})})]}),((Ve=s==null?void 0:s.exercises)==null?void 0:Ve.length)>0&&c.jsxs("div",{className:"flex space-x-3 mt-6",children:[c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>{var K,_e,Ne,Ke;if(console.log(" Boto Finalizar clicado!"),console.log("Estado atual:",{currentWorkout:!!s,exercisesCount:((K=s==null?void 0:s.exercises)==null?void 0:K.length)||0,showFinishModal:C,hasExercises:((_e=s==null?void 0:s.exercises)==null?void 0:_e.length)>0,exercisesList:(Ne=s==null?void 0:s.exercises)==null?void 0:Ne.map(Fe=>{var gt,Oe;return(Oe=(gt=Fe.exerciseData)==null?void 0:gt.exercise)==null?void 0:Oe.name})}),!((Ke=s==null?void 0:s.exercises)!=null&&Ke.length)){console.error(" Tentativa de finalizar sem exerccios"),ee.error("Adicione pelo menos um exerccio antes de finalizar");return}console.log(" Abrindo modal de finalizao..."),x(!0)},className:"flex-1 btn-primary",disabled:!((nt=s==null?void 0:s.exercises)!=null&&nt.length),children:[c.jsx(za,{className:"mr-2"}),"Finalizar Treino"]}),c.jsxs(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>k(!0),className:"flex-1 bg-dark-medium text-light-darker rounded-lg flex items-center justify-center",children:[c.jsx(Tr,{className:"mr-2"}),"Cancelar"]})]})]}),c.jsx(Mt,{children:he&&fe&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",onClick:()=>ye(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-2xl",onClick:K=>K.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:fe.name}),c.jsx("button",{onClick:()=>ye(!1),className:"p-2 hover:bg-dark-medium rounded-full transition-colors",children:c.jsx(Tr,{size:24})})]}),c.jsxs("div",{className:"space-y-4",children:[fe.video_url?c.jsx("div",{className:"relative pt-[56.25%]",children:c.jsx("iframe",{src:fe.video_url,className:"absolute inset-0 w-full h-full rounded-lg",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):fe.image_url?c.jsx("img",{src:fe.image_url,alt:fe.name,className:"w-full rounded-lg"}):c.jsx("div",{className:"w-full h-64 bg-dark-medium rounded-lg flex items-center justify-center",children:c.jsx(ft,{className:"text-primary",size:64})}),fe.description&&c.jsx("p",{className:"text-light-darker",children:fe.description})]})]})})}),c.jsx(Mt,{children:C&&s&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:K=>{console.log(" Clique no overlay do modal - NO deve fechar"),K.stopPropagation()},children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md",onClick:K=>K.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Finalizar Treino"}),c.jsx("button",{onClick:()=>{console.log(" Fechando modal pelo X"),x(!1),se("")},className:"p-2 hover:bg-dark-medium rounded-full transition-colors",children:c.jsx(Tr,{size:20})})]}),H&&c.jsxs("div",{className:"mb-4 p-4 bg-red-600 bg-opacity-10 border border-red-600 rounded-lg text-red-500",children:[c.jsx("div",{className:"font-bold mb-2",children:" Erro ao finalizar treino:"}),c.jsx("div",{children:H}),c.jsxs("div",{className:"mt-2 text-sm",children:[" ",c.jsx("strong",{children:"Dicas:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1",children:[c.jsx("li",{children:"Verifique sua conexo com a internet"}),c.jsx("li",{children:"Tente fazer logout e login novamente"}),c.jsx("li",{children:"Se o problema persistir, tente cancelar e refazer o treino"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"mb-4",children:"Tem certeza que deseja finalizar o treino atual?"}),s&&c.jsxs("div",{className:"mb-4 p-4 bg-dark-light rounded-lg",children:[c.jsx("h4",{className:"font-bold mb-2",children:"Resumo do Treino:"}),s.exercises.map((K,_e)=>{var gt,Oe;const Ne=((gt=K.sets)==null?void 0:gt.length)||0,Ke=((Oe=K.sets)==null?void 0:Oe.filter(yt=>yt.completed).length)||0,Fe=Ke===Ne&&Ne>0;return c.jsxs("div",{className:"flex justify-between items-center py-1",children:[c.jsx("span",{className:"text-sm",children:K.exerciseData.exercise.name}),c.jsxs("span",{className:`text-sm font-medium ${Fe?"text-green-500":Ke>0?"text-yellow-500":"text-light-darker"}`,children:[Ke,"/",Ne," sries",Fe?" ":Ke>0?" ":" "]})]},_e)}),c.jsx("div",{className:"mt-3 pt-3 border-t border-dark-medium",children:c.jsxs("p",{className:"text-xs text-light-darker",children:[" ",c.jsx("strong",{children:"Lembrete:"})," Apenas exerccios com todas as sries completadas contaro para seu progresso."]})})]}),c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg",children:[c.jsx("div",{className:"flex items-center mb-2",children:c.jsxs("span",{children:["Tempo de treino: ",l()]})}),c.jsx("div",{className:"flex items-center",children:c.jsxs("span",{children:["Exerccios: ",(s==null?void 0:s.exercises.length)||0]})})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>{console.log(" Boto Cancelar clicado no modal"),x(!1),se("")},disabled:b,className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg disabled:opacity-50",children:"Cancelar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>{var K;console.log(" Boto Finalizar clicado no modal!"),console.log(" Estado antes de finalizar:",{currentWorkout:!!s,exercisesCount:(K=s==null?void 0:s.exercises)==null?void 0:K.length,loading:b,showFinishModal:C}),Ge()},disabled:b,className:"flex-1 btn-primary disabled:opacity-50",children:b?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),c.jsx("span",{children:"Finalizando..."})]}):"Finalizar"})]})]})})}),c.jsx(Mt,{children:w&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>k(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md",onClick:K=>K.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cancelar Treino"}),c.jsx("p",{className:"mb-6",children:"Tem certeza que deseja cancelar o treino atual? Todo o progresso ser perdido."}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-2 px-4 bg-dark-medium text-light rounded-lg",children:"Voltar"}),c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:Ut,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all duration-300",children:"Cancelar Treino"})]})]})})}),c.jsx(Mt,{children:R&&U&&c.jsx(v7,{exercise:U,onAcceptSuggestion:Be,onDecline:je,onClose:je})})]})},w7=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>ol);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class hx extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class _7 extends hx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class E7 extends hx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class b7 extends hx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ey;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ey||(Ey={}));var T7=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class k7{constructor(e,{headers:n={},customFetch:r,region:s=Ey.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=w7(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return T7(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(y=>{throw new _7(y)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new E7(d);if(!d.ok)throw new b7(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield d.json():m==="application/octet-stream"?p=yield d.blob():m==="text/event-stream"?p=d:m==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Cn={},fx={},em={},xu={},tm={},nm={},S7=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ha=S7();const A7=Ha.fetch,yN=Ha.fetch.bind(Ha),vN=Ha.Headers,C7=Ha.Request,I7=Ha.Response,ol=Object.freeze(Object.defineProperty({__proto__:null,Headers:vN,Request:C7,Response:I7,default:yN,fetch:A7},Symbol.toStringTag,{value:"Module"})),N7=hP(ol);var rm={};Object.defineProperty(rm,"__esModule",{value:!0});let P7=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};rm.default=P7;var xN=cr&&cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nm,"__esModule",{value:!0});const j7=xN(N7),R7=xN(rm);let D7=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=j7.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,d=null,h=null,m=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await i.text();try{u=JSON.parse(g),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,p="OK")}catch{i.status===404&&g===""?(m=204,p="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,m=200,p="OK"),u&&this.shouldThrowOnError)throw new R7.default(u)}return{error:u,data:d,count:h,status:m,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};nm.default=D7;var O7=cr&&cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tm,"__esModule",{value:!0});const L7=O7(nm);let M7=class extends L7.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};tm.default=M7;var V7=cr&&cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xu,"__esModule",{value:!0});const F7=V7(tm);let U7=class extends F7.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};xu.default=U7;var $7=cr&&cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(em,"__esModule",{value:!0});const Il=$7(xu);let B7=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Il.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Il.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Il.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Il.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Il.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};em.default=B7;var sm={},im={};Object.defineProperty(im,"__esModule",{value:!0});im.version=void 0;im.version="0.0.0-automated";Object.defineProperty(sm,"__esModule",{value:!0});sm.DEFAULT_HEADERS=void 0;const z7=im;sm.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${z7.version}`};var wN=cr&&cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fx,"__esModule",{value:!0});const W7=wN(em),H7=wN(xu),q7=sm;let G7=class _N{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},q7.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new W7.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new _N(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",l=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new H7.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};fx.default=G7;var al=cr&&cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.PostgrestError=Cn.PostgrestBuilder=Cn.PostgrestTransformBuilder=Cn.PostgrestFilterBuilder=Cn.PostgrestQueryBuilder=Cn.PostgrestClient=void 0;const EN=al(fx);Cn.PostgrestClient=EN.default;const bN=al(em);Cn.PostgrestQueryBuilder=bN.default;const TN=al(xu);Cn.PostgrestFilterBuilder=TN.default;const kN=al(tm);Cn.PostgrestTransformBuilder=kN.default;const SN=al(nm);Cn.PostgrestBuilder=SN.default;const AN=al(rm);Cn.PostgrestError=AN.default;var K7=Cn.default={PostgrestClient:EN.default,PostgrestQueryBuilder:bN.default,PostgrestFilterBuilder:TN.default,PostgrestTransformBuilder:kN.default,PostgrestBuilder:SN.default,PostgrestError:AN.default};const{PostgrestClient:Q7,PostgrestQueryBuilder:tH,PostgrestFilterBuilder:nH,PostgrestTransformBuilder:rH,PostgrestBuilder:sH,PostgrestError:iH}=K7,Y7="2.11.2",X7={"X-Client-Info":`realtime-js/${Y7}`},J7="1.0.0",CN=1e4,Z7=1e3;var ka;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ka||(ka={}));var Un;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Un||(Un={}));var xr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(xr||(xr={}));var by;(function(t){t.websocket="websocket"})(by||(by={}));var Ki;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ki||(Ki={}));class ez{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class IN{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var We;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(We||(We={}));const Ob=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=tz(o,t,e,s),i),{})},tz=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?NN(i,o):Ty(o)},NN=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return iz(e,n)}switch(t){case We.bool:return nz(e);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return rz(e);case We.json:case We.jsonb:return sz(e);case We.timestamp:return oz(e);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:return Ty(e);default:return Ty(e)}},Ty=t=>t,nz=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},rz=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},sz=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},iz=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>NN(e,a))}return t},oz=t=>typeof t=="string"?t.replace(" ","T"):t,PN=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Sp{constructor(e,n,r={},s=CN){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Lb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Lb||(Lb={}));class dc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dc.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=dc.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=dc.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),y=d.filter(b=>p.indexOf(b.presence_ref)<0),g=h.filter(b=>m.indexOf(b.presence_ref)<0);y.length>0&&(a[u]=y),g.length>0&&(l[u]=g)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...m)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Mb||(Mb={}));var Vb;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Vb||(Vb={}));var ns;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ns||(ns={}));class mx{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Un.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sp(this,xr.join,this.params,this.timeout),this.rejoinTimer=new IN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Un.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Un.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Un.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new dc(this),this.broadcastEndpointURL=PN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(ns.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ns.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(ns.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,p=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,y=[];for(let g=0;g<p;g++){const b=m[g],{filter:{event:v,schema:T,table:_,filter:I}}=b,O=d&&d[g];if(O&&O.event===v&&O.schema===T&&O.table===_&&O.filter===I)y.push(Object.assign(Object.assign({},b),{id:O.id}));else{this.unsubscribe(),e==null||e(ns.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ns.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(ns.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ns.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Un.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Sp(this,xr.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sp(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=xr;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,g,b;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,g,b,v,T,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const I=p.id,O=(y=p.filter)===null||y===void 0?void 0:y.event;return I&&((g=n.ids)===null||g===void 0?void 0:g.includes(I))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const I=(T=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return I==="*"||I===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:g,table:b,commit_timestamp:v,type:T,errors:_}=y;m=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:v,eventType:T,new:{},old:{},errors:_}),this._getPayloadRecords(y))}p.callback(m,r)})}_isClosed(){return this.state===Un.closed}_isJoined(){return this.state===Un.joined}_isJoining(){return this.state===Un.joining}_isLeaving(){return this.state===Un.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&mx.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xr.close,{},e)}_onError(e){this._on(xr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Un.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ob(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ob(e.columns,e.old_record)),n}}const az=()=>{},lz=typeof WebSocket<"u",cz=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uz{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=X7,this.params={},this.timeout=CN,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=az,this.conn=null,this.sendBuffer=[],this.serializer=new ez,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>wo(async()=>{const{default:l}=await Promise.resolve().then(()=>ol);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${by.websocket}`,this.httpEndpoint=PN(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new IN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(lz){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new dz(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),wo(async()=>{const{default:e}=await import("./browser-Bc1xR8Jb.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:J7}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ka.connecting:return Ki.Connecting;case ka.open:return Ki.Open;case ka.closing:return Ki.Closing;default:return Ki.Closed}}isConnected(){return this.connectionState()===Ki.Open}channel(e,n={config:{}}){const r=new mx(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(xr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Z7,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(xr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([cz],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class dz{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ka.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class px extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Rt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class hz extends px{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ky extends px{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var fz=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const jN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>ol);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},mz=()=>fz(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wo(()=>Promise.resolve().then(()=>ol),void 0)).Response:Response}),Sy=t=>{if(Array.isArray(t))return t.map(n=>Sy(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Sy(r)}),e};var No=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Ap=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pz=(t,e,n)=>No(void 0,void 0,void 0,function*(){const r=yield mz();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new hz(Ap(s),t.status||500))}).catch(s=>{e(new ky(Ap(s),s))}):e(new ky(Ap(t),t))}),gz=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function wu(t,e,n,r,s,i){return No(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,gz(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>pz(l,a,r))})})}function ef(t,e,n,r){return No(this,void 0,void 0,function*(){return wu(t,"GET",e,n,r)})}function Ms(t,e,n,r,s){return No(this,void 0,void 0,function*(){return wu(t,"POST",e,r,s,n)})}function yz(t,e,n,r,s){return No(this,void 0,void 0,function*(){return wu(t,"PUT",e,r,s,n)})}function vz(t,e,n,r){return No(this,void 0,void 0,function*(){return wu(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function RN(t,e,n,r,s){return No(this,void 0,void 0,function*(){return wu(t,"DELETE",e,r,s,n)})}var bn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const xz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wz{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=jN(s)}uploadOrUpdate(e,n,r,s){return bn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Fb),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Rt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return bn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Fb.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(Rt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return bn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ms(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new px("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}update(e,n,r){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return bn(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return bn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return bn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ms(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return bn(this,void 0,void 0,function*(){try{const s=yield Ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}download(e,n){return bn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ef(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Rt(a))return{data:null,error:a};throw a}})}info(e){return bn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ef(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Sy(r),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}exists(e){return bn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield vz(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Rt(r)&&r instanceof ky){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return bn(this,void 0,void 0,function*(){try{return{data:yield RN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}list(e,n,r){return bn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},xz),n),{prefix:e||""});return{data:yield Ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Rt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const _z="2.7.1",Ez={"X-Client-Info":`storage-js/${_z}`};var Vo=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class bz{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Ez),n),this.fetch=jN(r)}listBuckets(){return Vo(this,void 0,void 0,function*(){try{return{data:yield ef(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Rt(e))return{data:null,error:e};throw e}})}getBucket(e){return Vo(this,void 0,void 0,function*(){try{return{data:yield ef(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Vo(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Vo(this,void 0,void 0,function*(){try{return{data:yield yz(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Vo(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vo(this,void 0,void 0,function*(){try{return{data:yield RN(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}})}}class Tz extends bz{constructor(e,n={},r){super(e,n,r)}from(e){return new wz(this.url,this.headers,e,this.fetch)}}const kz="2.49.1";let zl="";typeof Deno<"u"?zl="deno":typeof document<"u"?zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zl="react-native":zl="node";const Sz={"X-Client-Info":`supabase-js-${zl}/${kz}`},Az={headers:Sz},Cz={schema:"public"},Iz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nz={};var Pz=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const jz=t=>{let e;return t?e=t:typeof fetch>"u"?e=yN:e=fetch,(...n)=>e(...n)},Rz=()=>typeof Headers>"u"?vN:Headers,Dz=(t,e,n)=>{const r=jz(n),s=Rz();return(i,o)=>Pz(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Oz=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function Lz(t){return t.replace(/\/$/,"")}function Mz(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:o,auth:a,realtime:l,global:u}=e,d={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>Oz(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const DN="2.68.0",Go=30*1e3,Ay=3,Cp=Ay*Go,Vz="http://localhost:9999",Fz="supabase.auth.token",Uz={"X-Client-Info":`gotrue-js/${DN}`},Cy="X-Supabase-Api-Version",ON={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function $z(t){return Math.round(Date.now()/1e3)+t}function Bz(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const jr=()=>typeof window<"u"&&typeof document<"u",$i={tested:!1,writable:!1},hc=()=>{if(!jr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($i.tested)return $i.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),$i.tested=!0,$i.writable=!0}catch{$i.tested=!0,$i.writable=!1}return $i.writable};function zz(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const LN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wo(async()=>{const{default:r}=await Promise.resolve().then(()=>ol);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Wz=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",MN=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},hd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},fd=async(t,e)=>{await t.removeItem(e)};function Hz(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,i,o,a,l,u,d=0;for(t=t.replace("-","+").replace("_","/");d<t.length;)o=e.indexOf(t.charAt(d++)),a=e.indexOf(t.charAt(d++)),l=e.indexOf(t.charAt(d++)),u=e.indexOf(t.charAt(d++)),r=o<<2|a>>4,s=(a&15)<<4|l>>2,i=(l&3)<<6|u,n=n+String.fromCharCode(r),l!=64&&s!=0&&(n=n+String.fromCharCode(s)),u!=64&&i!=0&&(n=n+String.fromCharCode(i));return n}class om{constructor(){this.promise=new om.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}om.promiseConstructor=Promise;function Ub(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(Hz(r))}async function qz(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Gz(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Kz(t){return("0"+t.toString(16)).substr(-2)}function Qz(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Kz).join("")}async function Yz(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function Xz(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jz(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Yz(t);return Xz(n)}async function Fo(t,e,n=!1){const r=Qz();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await MN(t,`${e}-code-verifier`,s);const i=await Jz(r);return[i,r===i?"plain":"s256"]}const Zz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function eW(t){const e=t.headers.get(Cy);if(!e||!e.match(Zz))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class gx extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class tW extends gx{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function nW(t){return ve(t)&&t.name==="AuthApiError"}class VN extends gx{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Po extends gx{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Rs extends Po{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rW(t){return ve(t)&&t.name==="AuthSessionMissingError"}class Ip extends Po{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class md extends Po{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pd extends Po{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sW(t){return ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class $b extends Po{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Iy extends Po{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Np(t){return ve(t)&&t.name==="AuthRetryableFetchError"}class Bb extends Po{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var iW=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Gi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),oW=[502,503,504];async function zb(t){var e;if(!Wz(t))throw new Iy(Gi(t),0);if(oW.includes(t.status))throw new Iy(Gi(t),t.status);let n;try{n=await t.json()}catch(i){throw new VN(Gi(i),i)}let r;const s=eW(t);if(s&&s.getTime()>=ON["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Bb(Gi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Rs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Bb(Gi(n),t.status,n.weak_password.reasons);throw new tW(Gi(n),t.status||500,r)}const aW=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Te(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Cy]||(i[Cy]=ON["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await lW(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function lW(t,e,n,r,s,i){const o=aW(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Iy(Gi(l),0)}if(a.ok||await zb(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await zb(l)}}function Ds(t){var e;let n=null;hW(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=$z(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Wb(t){const e=Ds(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function qs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function cW(t){return{data:t,error:null}}function uW(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=iW(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function dW(t){return t}function hW(t){return t.access_token&&t.refresh_token&&t.expires_in}var fW=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class mW{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=LN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qs})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=fW(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:uW,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qs})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:dW});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ve(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qs})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:qs})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:qs})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}}const pW={getItem:t=>hc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{hc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{hc()&&globalThis.localStorage.removeItem(t)}};function Hb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function gW(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Uo={debug:!!(globalThis&&hc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class FN extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yW extends FN{}async function vW(t,e,n){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new yW(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Uo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}gW();const xW={url:Vz,storageKey:Fz,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uz,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qb(t,e,n){return await n()}class Yc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yc.nextInstanceID,Yc.nextInstanceID+=1,this.instanceID>0&&jr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},xW),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new mW({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=LN(s.fetch),this.lock=s.lock||qb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:jr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=vW:this.lock=qb,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:hc()?this.storage=pW:(this.memoryStorage={},this.storage=Hb(this.memoryStorage)):(this.memoryStorage={},this.storage=Hb(this.memoryStorage)),jr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${DN}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=zz(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),jr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),sW(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ve(n)?{error:n}:{error:new VN("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ds}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:m}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Fo(this.storage,this.storageKey)),i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},xform:Ds})}else if("phone"in e){const{phone:d,password:h,options:m}=e;i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ds})}else throw new md("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Wb})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Wb})}else throw new md("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ip}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await hd(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ds});if(await fd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ip}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(ve(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ds}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ip}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Fo(this.storage,this.storageKey));const{error:h}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new md("You must provide either an email or phone number.")}catch(a){if(ve(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ds});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Fo(this.storage,this.storageKey)),await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:cW})}catch(i){if(ve(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Rs;const{error:s}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ve(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Te(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Te(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new md("You must provide either an email or phone number and a type")}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await hd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Cp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qs}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rs}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:qs})})}catch(n){if(ve(n))return rW(n)&&(await this._removeSession(),await fd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Rs;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Fo(this.storage,this.storageKey));const{data:u,error:d}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:qs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Ub(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rs;const n=Date.now()/1e3;let r=n,s=!0,i=null;const o=Ub(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ve(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Rs;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!jr())throw new pd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new $b("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $b("No code detected.");const{data:T,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new pd("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let m=d+h;l&&(m=parseInt(l));const p=m-d;p*1e3<=Go&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=m-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,d);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(ve(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await hd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(nW(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await fd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Bz(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Fo(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ve(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return jr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ve(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Gz(async s=>(s>0&&await qz(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ds})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Np(i)&&Date.now()+o-r<Go})}catch(r){if(this._debug(n,"error",r),ve(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),jr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await hd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Cp;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Cp}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Np(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new om;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Rs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ve(i)){const o={session:null,error:i};return Np(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await MN(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await fd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Go);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Go);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Go}ms, refresh threshold is ${Ay} ticks`),s<=Ay&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof FN)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Fo(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ve(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ve(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}Yc.nextInstanceID=0;const wW=Yc;class _W extends wW{constructor(e){super(e)}}var EW=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class bW{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Lz(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Cz,realtime:Nz,auth:Object.assign(Object.assign({},Iz),{storageKey:l}),global:Az},d=Mz(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Dz(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Q7(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new k7(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tz(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return EW(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _W({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new uz(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const TW=(t,e,n)=>new bW(t,e,n),kW="https://cdspkdwktrnloxgxtocq.supabase.co",SW="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNkc3BrZHdrdHJubG94Z3h0b2NxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEwNDg1NTgsImV4cCI6MjA1NjYyNDU1OH0.h1eDq9BdJeV6eUrk59NUGcmHFr6aeGHdAIa-SZD6BPk",vt=TW(kW,SW,{global:{headers:{"x-my-custom-header":"my-app-name"},fetch:(t,e={})=>fetch(t,{...e,signal:AbortSignal.timeout(1e4)})},db:{schema:"public"}}),AW=Sf((t,e)=>({achievements:[],userAchievements:[],challenges:[],userChallenges:[],userProfile:null,loading:!1,error:null,initialize:async n=>{try{t({loading:!0}),await e().fetchUserProfile(n),await Promise.all([e().fetchAchievements(),e().fetchUserAchievements(n),e().fetchChallenges(),e().fetchUserChallenges(n)]),t({loading:!1})}catch(r){console.error("Erro ao inicializar achievement store:",r),t({error:r.message,loading:!1})}},fetchUserProfile:async n=>{try{t({loading:!0});const{data:r,error:s}=await vt.from("user_profiles").select("*").eq("id",n).single();if(s){if(s.code==="PGRST116"){const{data:i,error:o}=await vt.from("user_profiles").insert({id:n}).select().single();if(o)throw o;return t({userProfile:i,loading:!1}),i}throw s}return t({userProfile:r,loading:!1}),r}catch(r){return console.error("Erro ao buscar perfil do usurio:",r),t({error:r.message,loading:!1}),null}},fetchAchievements:async()=>{try{t({loading:!0});const{data:n,error:r}=await vt.from("achievements").select("*").order("requirement_value",{ascending:!0});if(r)throw r;return t({achievements:n,loading:!1}),n}catch(n){return console.error("Erro ao buscar conquistas:",n),t({error:n.message,loading:!1}),[]}},fetchUserAchievements:async n=>{try{t({loading:!0});const{data:r,error:s}=await vt.from("user_achievements").select(`
          *,
          achievement:achievements(*)
        `).eq("user_id",n).order("unlocked_at",{ascending:!1});if(s)throw s;return t({userAchievements:r,loading:!1}),r}catch(r){return console.error("Erro ao buscar conquistas do usurio:",r),t({error:r.message,loading:!1}),[]}},fetchChallenges:async()=>{try{t({loading:!0});const{data:n,error:r}=await vt.from("challenges").select("*").gte("end_date",new Date().toISOString()).order("end_date",{ascending:!0});if(r)throw r;return t({challenges:n,loading:!1}),n}catch(n){return console.error("Erro ao buscar desafios:",n),t({error:n.message,loading:!1}),[]}},fetchUserChallenges:async n=>{try{t({loading:!0});const{data:r,error:s}=await vt.from("user_challenges").select(`
          *,
          challenge:challenges(*)
        `).eq("user_id",n).order("updated_at",{ascending:!1});if(s)throw s;return t({userChallenges:r,loading:!1}),r}catch(r){return console.error("Erro ao buscar progresso de desafios:",r),t({error:r.message,loading:!1}),[]}},checkAchievements:async(n,r,s)=>{try{t({loading:!0});const{data:i,error:o}=await vt.from("user_profiles").select("*").eq("id",n).single();if(o)throw o;const{data:a,error:l}=await vt.from("achievements").select("*").eq("requirement_type",r).lte("requirement_value",s).order("requirement_value",{ascending:!0});if(l)throw l;const{data:u,error:d}=await vt.from("user_achievements").select("achievement_id").eq("user_id",n);if(d)throw d;const h=u.map(p=>p.achievement_id),m=a.filter(p=>!h.includes(p.id));for(const p of m){const{error:y}=await vt.from("user_achievements").insert({user_id:n,achievement_id:p.id});if(y)throw y;const{error:g}=await vt.from("user_profiles").update({experience:i.experience+p.experience_reward}).eq("id",n);if(g)throw g;ee.success(` Conquista desbloqueada: ${p.name}`,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}return m.length>0&&await Promise.all([e().fetchUserProfile(n),e().fetchUserAchievements(n)]),t({loading:!1}),m}catch(i){return console.error("Erro ao verificar conquistas:",i),t({error:i.message,loading:!1}),[]}},updateChallengeProgress:async(n,r,s)=>{try{t({loading:!0});const{data:i,error:o}=await vt.from("user_challenges").select("*").eq("user_id",n).eq("challenge_id",r).single();if(o&&o.code!=="PGRST116")throw o;const{data:a,error:l}=await vt.from("challenges").select("*").eq("id",r).single();if(l)throw l;const u=new Date,d=new Date(a.end_date);if(u>d)return t({loading:!1}),{error:"Este desafio j terminou"};if(i&&i.completed)return t({loading:!1}),{error:"Este desafio j foi completado"};let h;if(i){const m=Math.min(s,a.requirement_value),p=m>=a.requirement_value,{data:y,error:g}=await vt.from("user_challenges").update({current_progress:m,completed:p,completed_at:p?new Date().toISOString():null,updated_at:new Date().toISOString()}).eq("id",i.id).select();if(g)throw g;if(h=y[0],p&&!i.completed){const{data:b,error:v}=await vt.from("user_profiles").select("experience").eq("id",n).single();if(v)throw v;const{error:T}=await vt.from("user_profiles").update({experience:b.experience+a.experience_reward}).eq("id",n);if(T)throw T;ee.success(` Desafio completado: ${a.title}`,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}else{const m=Math.min(s,a.requirement_value),p=m>=a.requirement_value,{data:y,error:g}=await vt.from("user_challenges").insert({user_id:n,challenge_id:r,current_progress:m,completed:p,completed_at:p?new Date().toISOString():null}).select();if(g)throw g;if(h=y[0],p){const{data:b,error:v}=await vt.from("user_profiles").select("experience").eq("id",n).single();if(v)throw v;const{error:T}=await vt.from("user_profiles").update({experience:b.experience+a.experience_reward}).eq("id",n);if(T)throw T;ee.success(` Desafio completado: ${a.title}`,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}}return await Promise.all([e().fetchUserProfile(n),e().fetchUserChallenges(n)]),t({loading:!1}),{data:h}}catch(i){return console.error("Erro ao atualizar progresso do desafio:",i),t({error:i.message,loading:!1}),{error:i.message}}},addExperience:async(n,r)=>{try{t({loading:!0});const{data:s,error:i}=await vt.from("user_profiles").select("experience").eq("id",n).single();if(i)throw i;const{data:o,error:a}=await vt.from("user_profiles").update({experience:s.experience+r}).eq("id",n).select();if(a)throw a;return t({userProfile:o[0],loading:!1}),o[0]}catch(s){return console.error("Erro ao adicionar experincia:",s),t({error:s.message,loading:!1}),null}}}));var Hd={linear:function(t,e,n,r){var s=n-e;return s*t/r+e},easeInQuad:function(t,e,n,r){var s=n-e;return s*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var s=n-e;return-s*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var s=n-e;return-s*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var s=n-e;return-s*Math.cos(t/r*(Math.PI/2))+s+e},easeOutSine:function(t,e,n,r){var s=n-e;return s*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var s=n-e;return-s/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var s=n-e;return t==0?e:s*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var s=n-e;return t==r?e+s:s*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var s=n-e;return t===0?e:t===r?e+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var s=n-e;return-s*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var s=n-e;return s*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r/2)===2?e+s:(o||(o=r*(.3*1.5)),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),i*(t/=r)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),i*((t=t/r-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),(t/=r/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,n,r){var s=n-e,i;return i=Hd.easeOutBounce(r-t,0,s,r),s-i+e},easeOutBounce:function(t,e,n,r){var s=n-e;return(t/=r)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var s=n-e,i;return t<r/2?(i=Hd.easeInBounce(t*2,0,s,r),i*.5+e):(i=Hd.easeOutBounce(t*2-r,0,s,r),i*.5+s*.5+e)}},CW=Hd;function IW(t){return t*Math.PI/180}function $n(t,e){return t+Math.random()*(e-t)}function NW(t,e){return Math.floor(t+Math.random()*(e-t+1))}var fc;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(fc||(fc={}));var Vs;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Vs||(Vs={}));const PW=1e3/60;class jW{constructor(e,n,r,s){this.getOptions=n;const{colors:i,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=$n(5,20),this.h=$n(5,20),this.radius=$n(5,10),this.vx=typeof o=="number"?$n(-o,o):$n(o.min,o.max),this.vy=typeof a=="number"?$n(-a,0):$n(a.min,a.max),this.shape=NW(0,2),this.angle=IW($n(0,360)),this.angularSpin=$n(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=$n(0,1),this.rotationDirection=$n(0,1)?Vs.Positive:Vs.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:i,drawShape:o}=this.getOptions(),a=e/PW;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=s**a,this.vy*=s**a,this.rotateY>=1&&this.rotationDirection===Vs.Positive?this.rotationDirection=Vs.Negative:this.rotateY<=-1&&this.rotationDirection===Vs.Negative&&(this.rotationDirection=Vs.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case fc.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case fc.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case fc.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class RW{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenInitTime=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=$n(this.x,this.w+this.x),i=$n(this.y,this.h+this.y);return new jW(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:u,recycle:d,numberOfPieces:h,debug:m,tweenFunction:p,tweenDuration:y}=this.getOptions();if(!u)return!1;const g=this.particles.length,b=d?g:a;if(b<h){l!==h&&(this.tweenInitTime=0,this.lastNumberOfPieces=h),this.tweenInitTime+=s;const v=p(this.tweenInitTime,b,h,y),T=Math.round(v-b);for(let _=0;_<T;_++)this.particles.push(this.getParticle());this.particlesGenerated+=T}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${g}`,i.width-10,i.height-20));for(let v=this.particles.length-1;v>=0;v--){const T=this.particles[v];T.update(s),(T.y>i.height||T.y<-100||T.x>i.width+100||T.x<-100)&&(d&&b<=h?this.particles[v]=this.getParticle():this.removeParticleAt(v))}return g>0||b<h},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const yx={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:CW.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class DW{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...yx,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:a},canvas:l,context:u}=this,d=Math.min(s-this.lastFrameTime,50);if(a&&d<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(a?d%a:0),i&&(u.fillStyle="white",u.clearRect(0,0,l.width,l.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new RW(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,i;const n=(s=this._options)==null?void 0:s.run,r=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const OW=me.createRef();class vx extends me.Component{constructor(e){super(e),this.canvas=me.createRef(),this.canvas=e.canvasRef||OW}componentDidMount(){if(this.canvas.current){const e=Pp(this.props)[0];this.confetti=new DW(this.canvas.current,e)}}componentDidUpdate(){const e=Pp(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=Pp(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return c.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}vx.defaultProps={...yx};vx.displayName="ReactConfetti";function Pp(t){const e={},n={},r={},s=[...Object.keys(yx),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const a=t[o];s.includes(o)?e[o]=a:i.includes(o)?i[o]=a:r[o]=a}return[e,r,n]}const UN=me.forwardRef((t,e)=>c.jsx(vx,{canvasRef:e,...t})),LW=()=>{const{user:t}=hr(),{initialize:e,achievements:n,userAchievements:r,challenges:s,userChallenges:i,userProfile:o,loading:a}=AW(),[l,u]=V.useState(!1),[d,h]=V.useState("achievements"),[m,p]=V.useState("all"),[y,g]=V.useState(!1),[b,v]=V.useState(null);V.useEffect(()=>{t&&e(t.id)},[t]),V.useEffect(()=>{if(r.length>0){const w=r[0],k=new Date(w.unlocked_at);new Date-k<1e4&&(u(!0),setTimeout(()=>u(!1),5e3))}},[r]);const T=n.filter(w=>m==="all"?!0:w.category===m),_=w=>r.some(k=>k.achievement_id===w),I=w=>{if(!o)return 0;switch(w.requirement_type){case"workouts":return Math.min(o.total_workouts,w.requirement_value);case"exercises":return Math.min(o.total_exercises,w.requirement_value);case"weight":return Math.min(o.total_weight_lifted,w.requirement_value);case"streak":return Math.min(o.streak_days,w.requirement_value);default:return 0}},O=w=>{switch(w){case"FiAward":return c.jsx(Kn,{size:24});case"FiTrendingUp":return c.jsx(vn,{size:24});case"FiCalendar":return c.jsx(_o,{size:24});case"GiWeightLiftingUp":return c.jsx(ft,{size:24});default:return c.jsx(Kn,{size:24})}},N=w=>{const k=i.find(j=>j.challenge_id===w);return k?k.current_progress:0},C=w=>{const k=i.find(j=>j.challenge_id===w);return k?k.completed:!1},x=w=>{v(w),g(!0)};return c.jsxs("div",{children:[l&&c.jsx(UN,{recycle:!1,numberOfPieces:200}),c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Conquistas"}),c.jsx("p",{className:"text-light-darker",children:"Acompanhe seu progresso e desbloqueie recompensas"})]}),o&&c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"card mb-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-primary bg-opacity-20 flex items-center justify-center mr-4",children:c.jsx(Kn,{className:"text-primary",size:32})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("h2",{className:"text-xl font-bold",children:["Nvel ",o.level]}),c.jsxs("p",{className:"text-light-darker",children:[o.experience," XP  Prximo nvel: ",o.level*100," XP"]})]})]}),c.jsx(ls,{value:o.experience%100,max:100,showLabel:!1})]}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"mb-6",children:c.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h("achievements"),className:`px-4 py-2 rounded-full whitespace-nowrap ${d==="achievements"?"bg-primary text-white":"bg-dark-light text-light-darker"}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Kn,{className:"mr-2"}),c.jsx("span",{children:"Conquistas"})]})}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h("challenges"),className:`px-4 py-2 rounded-full whitespace-nowrap ${d==="challenges"?"bg-primary text-white":"bg-dark-light text-light-darker"}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Dn,{className:"mr-2"}),c.jsx("span",{children:"Desafios"})]})})]})}),d==="achievements"&&c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"mb-6",children:c.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p("all"),className:`px-4 py-2 rounded-full whitespace-nowrap ${m==="all"?"bg-secondary text-white":"bg-dark-light text-light-darker"}`,children:"Todos"}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p("iniciante"),className:`px-4 py-2 rounded-full whitespace-nowrap ${m==="iniciante"?"bg-secondary text-white":"bg-dark-light text-light-darker"}`,children:"Iniciante"}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p("intermedirio"),className:`px-4 py-2 rounded-full whitespace-nowrap ${m==="intermedirio"?"bg-secondary text-white":"bg-dark-light text-light-darker"}`,children:"Intermedirio"}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p("avanado"),className:`px-4 py-2 rounded-full whitespace-nowrap ${m==="avanado"?"bg-secondary text-white":"bg-dark-light text-light-darker"}`,children:"Avanado"}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p("elite"),className:`px-4 py-2 rounded-full whitespace-nowrap ${m==="elite"?"bg-secondary text-white":"bg-dark-light text-light-darker"}`,children:"Elite"})]})}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:a?c.jsx("div",{className:"flex justify-center py-8",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):d==="achievements"?c.jsx("div",{className:"space-y-4",children:T.length>0?T.map(w=>{const k=_(w.id),j=I(w);return c.jsx(F.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(w),className:`card cursor-pointer ${k?"border border-primary":""}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mr-4 ${k?"bg-primary text-white":"bg-dark-medium text-light-darker"}`,children:k?O(w.icon_name):c.jsx(Qc,{size:24})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold",children:w.name}),c.jsx("p",{className:"text-sm text-light-darker",children:w.description}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsxs("span",{className:"text-secondary font-medium",children:[j," / ",w.requirement_value]}),c.jsxs("span",{className:"text-light-darker",children:["+",w.experience_reward," XP"]})]}),c.jsx(ls,{value:j,max:w.requirement_value,showLabel:!1})]})]}),k&&c.jsx("div",{className:"ml-2",children:c.jsx("div",{className:"w-8 h-8 rounded-full bg-primary bg-opacity-20 flex items-center justify-center",children:c.jsx(za,{className:"text-primary",size:16})})})]})},w.id)}):c.jsx("div",{className:"card text-center py-8",children:c.jsx("p",{className:"text-light-darker",children:"Nenhuma conquista encontrada"})})}):c.jsx("div",{className:"space-y-4",children:s.length>0?s.map(w=>{const k=C(w.id),j=N(w.id),P=new Date(w.end_date),M=Math.ceil((P-new Date)/(1e3*60*60*24));return c.jsx(F.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`card ${k?"border border-primary":""}`,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mr-4 ${k?"bg-primary text-white":"bg-dark-medium text-light-darker"}`,children:k?c.jsx(za,{size:24}):c.jsx(Dn,{size:24})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold",children:w.title}),c.jsx("span",{className:"text-xs text-light-darker",children:M>0?`${M} dias restantes`:"Termina hoje"})]}),c.jsx("p",{className:"text-sm text-light-darker",children:w.description}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsxs("span",{className:"text-secondary font-medium",children:[j," / ",w.requirement_value]}),c.jsxs("span",{className:"text-light-darker",children:["+",w.experience_reward," XP"]})]}),c.jsx(ls,{value:j,max:w.requirement_value,showLabel:!1})]})]})]})},w.id)}):c.jsx("div",{className:"card text-center py-8",children:c.jsx("p",{className:"text-light-darker",children:"Nenhum desafio disponvel no momento"})})})}),c.jsx(Mt,{children:y&&b&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>g(!1),children:c.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-dark-lighter rounded-xl p-6 w-full max-w-md",onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mr-4 ${_(b.id)?"bg-primary text-white":"bg-dark-medium text-light-darker"}`,children:_(b.id)?O(b.icon_name):c.jsx(Qc,{size:32})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:b.name}),c.jsx("p",{className:"text-light-darker",children:b.category})]})]}),c.jsx("p",{className:"mb-4",children:b.description}),c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg mb-6",children:[c.jsxs("div",{className:"flex justify-between mb-2",children:[c.jsx("span",{children:"Requisito:"}),c.jsxs("span",{className:"font-bold",children:[b.requirement_value,b.requirement_type==="workouts"&&" treinos",b.requirement_type==="exercises"&&" exerccios",b.requirement_type==="weight"&&" kg levantados",b.requirement_type==="streak"&&" dias consecutivos"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Recompensa:"}),c.jsxs("span",{className:"font-bold text-primary",children:["+",b.experience_reward," XP"]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{children:"Seu progresso:"}),c.jsxs("span",{children:[I(b)," / ",b.requirement_value]})]}),c.jsx(ls,{value:I(b),max:b.requirement_value,showLabel:!1})]}),c.jsx("button",{onClick:()=>g(!1),className:"w-full py-2 px-4 bg-primary text-white rounded-lg font-medium",children:"Fechar"})]})})})]})},MW=({exerciseHistory:t,exerciseName:e})=>{var o,a,l;if(!t||t.length===0)return c.jsxs("div",{className:"card text-center py-8",children:[c.jsx(vn,{className:"text-primary mx-auto mb-4",size:48}),c.jsx("p",{className:"text-light-darker",children:"Nenhum dado de progresso ainda"}),c.jsx("p",{className:"text-sm text-light-darker mt-2",children:"Complete alguns treinos para ver seu progresso"})]});const n=t.slice(-10).map((u,d)=>({date:new Date(u.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),weight:u.weight,reps:u.reps,index:d})),r=Math.max(...n.map(u=>u.weight)),s=Math.min(...n.map(u=>u.weight)),i=r-s||1;return c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(vn,{className:"text-primary mr-2",size:20}),c.jsxs("h3",{className:"font-bold",children:["Progresso - ",e]})]}),c.jsx("div",{className:"relative h-48 bg-dark-light rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"absolute inset-4",children:[c.jsxs("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-light-darker",children:[c.jsxs("span",{children:[r,"kg"]}),c.jsxs("span",{children:[Math.round((r+s)/2),"kg"]}),c.jsxs("span",{children:[s,"kg"]})]}),c.jsxs("div",{className:"ml-8 h-full relative",children:[c.jsx("div",{className:"absolute inset-0",children:[0,25,50,75,100].map(u=>c.jsx("div",{className:"absolute w-full border-t border-dark-medium opacity-30",style:{top:`${u}%`}},u))}),c.jsxs("svg",{className:"w-full h-full",children:[c.jsx("polyline",{fill:"none",stroke:"#FF4500",strokeWidth:"2",points:n.map((u,d)=>{const h=d/(n.length-1)*100,m=100-(u.weight-s)/i*100;return`${h}%,${m}%`}).join(" ")}),n.map((u,d)=>{const h=d/(n.length-1)*100,m=100-(u.weight-s)/i*100;return c.jsx(F.circle,{cx:`${h}%`,cy:`${m}%`,r:"4",fill:"#FF4500",initial:{scale:0},animate:{scale:1},transition:{delay:d*.1}},d)})]}),c.jsx("div",{className:"absolute -bottom-6 left-0 right-0 flex justify-between text-xs text-light-darker",children:n.map((u,d)=>c.jsx("span",{children:u.date},d))})]})]})}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-light-darker",children:"Atual"}),c.jsxs("p",{className:"font-bold text-primary",children:[(o=n[n.length-1])==null?void 0:o.weight,"kg"]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-light-darker",children:"Mximo"}),c.jsxs("p",{className:"font-bold text-secondary",children:[r,"kg"]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-light-darker",children:"Evoluo"}),c.jsxs("p",{className:"font-bold text-green-500",children:["+",(((a=n[n.length-1])==null?void 0:a.weight)-((l=n[0])==null?void 0:l.weight)||0).toFixed(1),"kg"]})]})]})]})},Gb=({workoutHistory:t=[],userExercises:e=[]})=>{const[n,r]=V.useState(0),[s,i]=V.useState(null);V.useEffect(()=>{o()},[t,n]);const o=()=>{const d=new Date,h=new Date(d);h.setDate(d.getDate()-d.getDay()-n*7),h.setHours(0,0,0,0);const m=new Date(h);m.setDate(h.getDate()+6),m.setHours(23,59,59,999);const p=t.filter(O=>{const N=new Date(O.start_time);return N>=h&&N<=m}),y=p.length,g=p.reduce((O,N)=>O+(N.duration||0),0),b=p.reduce((O,N)=>{var C;return O+(((C=N.exercises)==null?void 0:C.length)||0)},0),v=new Set;p.forEach(O=>{O.category&&(O.category.includes(",")?O.category.split(",").forEach(N=>v.add(N.trim())):v.add(O.category))});const T=[];for(let O=0;O<7;O++){const N=new Date(h);N.setDate(h.getDate()+O);const C=p.filter(x=>new Date(x.start_time).toDateString()===N.toDateString());T.push({date:N,workouts:C,hasWorkout:C.length>0})}const _={};p.forEach(O=>{var N;(N=O.exercises)==null||N.forEach(C=>{var w,k;const x=(k=(w=C.exerciseData)==null?void 0:w.exercise)==null?void 0:k.name;x&&(_[x]=(_[x]||0)+1)})});const I=Object.entries(_).sort(([,O],[,N])=>N-O)[0];i({startOfWeek:h,endOfWeek:m,totalWorkouts:y,totalTime:g,totalExercises:b,muscleGroups:Array.from(v),workoutDays:T,mostTrainedExercise:I?{name:I[0],count:I[1]}:null,weekWorkouts:p})},a=d=>{const h=Math.floor(d/3600),m=Math.floor(d%3600/60);return h>0?`${h}h ${m}m`:`${m}m`},l=()=>n===0?"Esta Semana":n===-1?"Semana Passada":`${Math.abs(n)} semanas atrs`,u=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"];return s?c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(_o,{className:"text-primary mr-2",size:24}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:"Relatrio Semanal"}),c.jsxs("p",{className:"text-sm text-light-darker",children:[s.startOfWeek.toLocaleDateString("pt-BR")," - ",s.endOfWeek.toLocaleDateString("pt-BR")]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>r(n-1),className:"p-2 rounded-full bg-dark-medium hover:bg-dark-light transition-colors",children:""}),c.jsx("span",{className:"text-sm font-medium min-w-[120px] text-center",children:l()}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>r(n+1),disabled:n>=0,className:"p-2 rounded-full bg-dark-medium hover:bg-dark-light transition-colors disabled:opacity-50",children:""})]})]}),c.jsx("div",{className:"grid grid-cols-7 gap-2 mb-6",children:s.workoutDays.map((d,h)=>c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1},className:`
              text-center p-3 rounded-lg transition-all
              ${d.hasWorkout?"bg-primary bg-opacity-20 border border-primary":"bg-dark-light"}
            `,children:[c.jsx("div",{className:"text-xs text-light-darker mb-1",children:u[h]}),c.jsx("div",{className:"font-bold text-sm",children:d.date.getDate()}),d.hasWorkout&&c.jsxs("div",{className:"mt-1",children:[c.jsx(ft,{className:"text-primary mx-auto",size:12}),c.jsx("div",{className:"text-xs text-primary",children:d.workouts.length})]})]},h))}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[c.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-dark-light p-4 rounded-lg text-center",children:[c.jsx(Dn,{className:"text-primary mx-auto mb-2",size:24}),c.jsx("div",{className:"text-2xl font-bold",children:s.totalWorkouts}),c.jsx("div",{className:"text-xs text-light-darker",children:"Treinos"})]}),c.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-dark-light p-4 rounded-lg text-center",children:[c.jsx(Wa,{className:"text-secondary mx-auto mb-2",size:24}),c.jsx("div",{className:"text-2xl font-bold",children:a(s.totalTime)}),c.jsx("div",{className:"text-xs text-light-darker",children:"Tempo Total"})]}),c.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-dark-light p-4 rounded-lg text-center",children:[c.jsx(ft,{className:"text-primary mx-auto mb-2",size:24}),c.jsx("div",{className:"text-2xl font-bold",children:s.totalExercises}),c.jsx("div",{className:"text-xs text-light-darker",children:"Exerccios"})]}),c.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:"bg-dark-light p-4 rounded-lg text-center",children:[c.jsx(vn,{className:"text-secondary mx-auto mb-2",size:24}),c.jsx("div",{className:"text-2xl font-bold",children:s.muscleGroups.length}),c.jsx("div",{className:"text-xs text-light-darker",children:"Grupos"})]})]}),c.jsxs("div",{className:"space-y-4",children:[s.muscleGroups.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold mb-2",children:"Grupos Musculares Treinados"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:s.muscleGroups.map((d,h)=>c.jsx(F.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6+h*.1},className:"px-3 py-1 bg-primary bg-opacity-20 text-primary text-sm rounded-full",children:d},d))})]}),s.mostTrainedExercise&&c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-dark-light p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Kn,{className:"text-secondary mr-2",size:20}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold",children:"Exerccio Mais Treinado"}),c.jsxs("p",{className:"text-light-darker",children:[s.mostTrainedExercise.name,"  ",s.mostTrainedExercise.count," vezes"]})]})]})}),s.totalWorkouts===0&&c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[c.jsx(Dn,{className:"text-light-darker mx-auto mb-4",size:48}),c.jsx("p",{className:"text-light-darker",children:"Nenhum treino registrado nesta semana"}),c.jsx("p",{className:"text-sm text-light-darker mt-2",children:n===0?"Que tal comear hoje?":"Escolha outra semana para ver os dados"})]})]})]}):null},VW=({workoutHistory:t=[],onDateSelect:e})=>{const[n,r]=V.useState(new Date),[s,i]=V.useState(null),o=new Date(n.getFullYear(),n.getMonth(),1),a=new Date(n.getFullYear(),n.getMonth()+1,0),l=o.getDay(),u=[],d=a.getDate();for(let _=0;_<l;_++)u.push(null);for(let _=1;_<=d;_++)u.push(_);const h={};t.forEach(_=>{const I=new Date(_.start_time),O=`${I.getFullYear()}-${I.getMonth()}-${I.getDate()}`;h[O]||(h[O]=[]),h[O].push(_)});const m=_=>{if(!_)return!1;const I=`${n.getFullYear()}-${n.getMonth()}-${_}`;return h[I]&&h[I].length>0},p=_=>{if(!_)return[];const I=`${n.getFullYear()}-${n.getMonth()}-${_}`;return h[I]||[]},y=_=>{r(I=>{const O=new Date(I);return O.setMonth(I.getMonth()+_),O})},g=_=>{if(!_)return;const I=new Date(n.getFullYear(),n.getMonth(),_);i(I),e&&e(I,p(_))},b={totalWorkouts:Object.values(h).flat().filter(_=>{const I=new Date(_.start_time);return I.getMonth()===n.getMonth()&&I.getFullYear()===n.getFullYear()}).length,workoutDays:Object.keys(h).filter(_=>{const[I,O]=_.split("-").map(Number);return O===n.getMonth()&&I===n.getFullYear()}).length},v=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],T=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"];return c.jsxs("div",{className:"card",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(_o,{className:"text-primary mr-2",size:24}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:"Calendrio de Treinos"}),c.jsxs("p",{className:"text-sm text-light-darker",children:[b.totalWorkouts," treinos em ",b.workoutDays," dias"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>y(-1),className:"p-2 rounded-full bg-dark-medium hover:bg-dark-light transition-colors",children:c.jsx(FB,{size:20})}),c.jsxs("h3",{className:"text-lg font-bold min-w-[140px] text-center",children:[v[n.getMonth()]," ",n.getFullYear()]}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>y(1),className:"p-2 rounded-full bg-dark-medium hover:bg-dark-light transition-colors",children:c.jsx(ZI,{size:20})})]})]}),c.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[T.map(_=>c.jsx("div",{className:"text-center text-sm font-medium text-light-darker py-2",children:_},_)),u.map((_,I)=>{const O=_&&new Date().getDate()===_&&new Date().getMonth()===n.getMonth()&&new Date().getFullYear()===n.getFullYear(),N=m(_),C=p(_),x=s&&s.getDate()===_&&s.getMonth()===n.getMonth()&&s.getFullYear()===n.getFullYear();return c.jsx(F.div,{whileHover:_?{scale:1.05}:{},whileTap:_?{scale:.95}:{},onClick:()=>g(_),className:`
                aspect-square flex flex-col items-center justify-center text-sm cursor-pointer rounded-lg relative
                ${_?"hover:bg-dark-medium":""}
                ${O?"bg-primary text-white font-bold":""}
                ${x?"ring-2 ring-secondary":""}
                ${N&&!O?"bg-dark-light":""}
              `,children:_&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:O?"text-white":"",children:_}),N&&c.jsxs("div",{className:"absolute bottom-1 flex space-x-1",children:[C.slice(0,3).map((w,k)=>c.jsx("div",{className:`w-1 h-1 rounded-full ${O?"bg-white":"bg-primary"}`},k)),C.length>3&&c.jsxs("span",{className:`text-xs ${O?"text-white":"text-primary"}`,children:["+",C.length-3]})]})]})},I)})]}),s&&c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-dark-light p-4 rounded-lg",children:[c.jsx("h4",{className:"font-bold mb-2",children:s.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),p(s.getDate()).length>0?c.jsx("div",{className:"space-y-2",children:p(s.getDate()).map((_,I)=>{var x;const O=new Date(_.start_time),N=Math.floor(_.duration/60),C=((x=_.exercises)==null?void 0:x.length)||0;return c.jsx("div",{className:"flex items-center justify-between bg-dark-medium p-2 rounded",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(ft,{className:"text-primary mr-2",size:16}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:_.category||"Treino"}),c.jsxs("p",{className:"text-xs text-light-darker",children:[O.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),"  ",N,"min  ",C," exerccios"]})]})]})},I)})}):c.jsxs("div",{className:"text-center py-4",children:[c.jsx(Dn,{className:"text-light-darker mx-auto mb-2",size:24}),c.jsx("p",{className:"text-light-darker",children:"Nenhum treino neste dia"})]})]}),c.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4 text-xs text-light-darker",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-primary rounded-full mr-2"}),c.jsx("span",{children:"Hoje"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-dark-light rounded-full mr-2"}),c.jsx("span",{children:"Com treino"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 border-2 border-secondary rounded-full mr-2"}),c.jsx("span",{children:"Selecionado"})]})]})]})},FW=()=>{const{user:t}=hr(),{fetchUserExercises:e,fetchWorkoutHistory:n,userExercises:r,workoutHistory:s}=Di(),[i,o]=V.useState("overview"),[a,l]=V.useState(null);V.useEffect(()=>{t&&(e(t.uid),n(t.uid))},[t]);const u=[{id:"overview",label:"Viso Geral",icon:Kc},{id:"progress",label:"Progresso",icon:vn},{id:"calendar",label:"Calendrio",icon:_o},{id:"reports",label:"Relatrios",icon:Dn}],d=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-primary",children:s.length}),c.jsx("div",{className:"text-sm text-light-darker",children:"Total de Treinos"})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-secondary",children:r.length}),c.jsx("div",{className:"text-sm text-light-darker",children:"Exerccios"})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-primary",children:[Math.floor(s.reduce((g,b)=>g+(b.duration||0),0)/3600),"h"]}),c.jsx("div",{className:"text-sm text-light-darker",children:"Tempo Total"})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-secondary",children:[s.length>0?Math.floor(s.reduce((g,b)=>g+(b.duration||0),0)/s.length/60):0,"min"]}),c.jsx("div",{className:"text-sm text-light-darker",children:"Tempo Mdio"})]})]}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:c.jsx(Gb,{workoutHistory:s,userExercises:r})})]}),h=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Selecione um Exerccio"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(g=>c.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(g),className:`
                p-3 rounded-lg text-left transition-all
                ${(a==null?void 0:a.id)===g.id?"bg-primary text-white":"bg-dark-light hover:bg-dark-medium"}
              `,children:[c.jsx("div",{className:"font-medium",children:g.exercise.name}),c.jsxs("div",{className:"text-sm opacity-75",children:[g.exercise.category,"  ",g.current_weight," ",g.weight_unit||"lbs"]})]},g.id))})]}),a&&c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:c.jsx(MW,{exerciseHistory:[],exerciseName:a.exercise.name})})]}),m=()=>c.jsx(VW,{workoutHistory:s,onDateSelect:(g,b)=>{console.log("Selected date:",g,"Workouts:",b)}}),p=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsx(Gb,{workoutHistory:s,userExercises:r}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[c.jsx("h3",{className:"font-bold mb-4",children:"Resumo Mensal"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-xl font-bold text-primary",children:s.filter(g=>{const b=new Date(g.start_time),v=new Date;return b.getMonth()===v.getMonth()&&b.getFullYear()===v.getFullYear()}).length}),c.jsx("div",{className:"text-sm text-light-darker",children:"Treinos Este Ms"})]}),c.jsxs("div",{className:"bg-dark-light p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-xl font-bold text-secondary",children:new Set(s.filter(g=>{const b=new Date(g.start_time),v=new Date;return b.getMonth()===v.getMonth()&&b.getFullYear()===v.getFullYear()}).map(g=>g.category)).size}),c.jsx("div",{className:"text-sm text-light-darker",children:"Grupos Diferentes"})]})]})]})]}),y=()=>{switch(i){case"overview":return d();case"progress":return h();case"calendar":return m();case"reports":return p();default:return d()}};return c.jsxs("div",{children:[c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Analytics"}),c.jsx("p",{className:"text-light-darker",children:"Analise seu progresso e performance"})]}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"mb-6",children:c.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:u.map(g=>{const b=g.icon;return c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(g.id),className:`
                  px-4 py-2 rounded-full whitespace-nowrap flex items-center
                  ${i===g.id?"bg-primary text-white":"bg-dark-light text-light-darker hover:bg-dark-medium"}
                `,children:[c.jsx(b,{className:"mr-2",size:16}),g.label]},g.id)})})}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:y()},i)]})},UW=()=>{const{isDarkMode:t,accentColor:e,fontSize:n,soundEnabled:r,vibrationEnabled:s,keepScreenOn:i,saveSettings:o}=Jf(),[a,l]=V.useState({isDarkMode:t,accentColor:e,fontSize:n,soundEnabled:r,vibrationEnabled:s,keepScreenOn:i}),[u,d]=V.useState(!1),[h,m]=V.useState(!1);me.useEffect(()=>{const w=a.isDarkMode!==t||a.accentColor!==e||a.fontSize!==n||a.soundEnabled!==r||a.vibrationEnabled!==s||a.keepScreenOn!==i;d(w)},[a,t,e,n,r,s,i]);const p=[{name:"Laranja",value:"#FF4500"},{name:"Azul",value:"#4A90E2"},{name:"Verde",value:"#28A745"},{name:"Roxo",value:"#6F42C1"},{name:"Rosa",value:"#E91E63"},{name:"Vermelho",value:"#DC3545"},{name:"Amarelo",value:"#FFC107"},{name:"Ciano",value:"#17A2B8"}],y=[{name:"Pequeno",value:"small"},{name:"Mdio",value:"medium"},{name:"Grande",value:"large"}],g=w=>{l(k=>({...k,accentColor:w}))},b=w=>{l(k=>({...k,fontSize:w}))},v=()=>{l(w=>({...w,isDarkMode:!w.isDarkMode}))},T=()=>{l(w=>({...w,soundEnabled:!w.soundEnabled}))},_=()=>{l(w=>({...w,vibrationEnabled:!w.vibrationEnabled}))},I=()=>{l(w=>({...w,keepScreenOn:!w.keepScreenOn}))},O=async()=>{try{if(m(!0),console.log(" === INICIANDO SALVAMENTO MANUAL ==="),console.log(" Configuraes a serem salvas:",a),a.keepScreenOn&&!i&&"wakeLock"in navigator)try{await navigator.wakeLock.request("screen"),console.log(" Wake Lock ativado")}catch(k){console.warn("Wake Lock no suportado:",k)}await o(a);const w=localStorage.getItem("treinano-settings");console.log(" Verificao ps-salvamento:",w),w&&(JSON.parse(w).accentColor===a.accentColor?console.log(" Salvamento verificado com sucesso!"):console.warn(" Verificao falhou - cores diferentes")),ee.success(" Configuraes salvas com sucesso!",{position:"top-center",autoClose:3e3}),d(!1)}catch(w){console.error("Erro ao salvar configuraes:",w),ee.error(" Erro ao salvar configuraes")}finally{m(!1)}},N=()=>{l({isDarkMode:t,accentColor:e,fontSize:n,soundEnabled:r,vibrationEnabled:s,keepScreenOn:i}),d(!1),ee.info("Alteraes descartadas")},C=()=>{if(a.soundEnabled)try{const w=new(window.AudioContext||window.webkitAudioContext),k=w.createOscillator(),j=w.createGain();k.connect(j),j.connect(w.destination),k.frequency.value=800,k.type="sine",j.gain.setValueAtTime(.3,w.currentTime),j.gain.exponentialRampToValueAtTime(.01,w.currentTime+.3),k.start(w.currentTime),k.stop(w.currentTime+.3),ee.success(" Som de teste reproduzido!")}catch(w){console.error(" Erro ao criar beep sinttico:",w);try{const k=new Audio("/alert.mp3");k.volume=.5,k.play().then(()=>{ee.success(" Som de teste reproduzido (fallback)!")}).catch(j=>{ee.error("Som no suportado neste navegador")})}catch{ee.error("Som no suportado neste navegador")}}else ee.info("Sons esto desativados")},x=()=>{if(!a.vibrationEnabled){ee.info("Vibrao est desativada");return}if(!("vibrate"in navigator)){ee.info("Vibrao no suportada neste navegador");return}try{const w=[200,100,200];navigator.vibrate(w)?ee.success(" Vibrao ativada!"):navigator.vibrate(200)?ee.success(" Vibrao simples ativada!"):ee.warning("Vibrao no funcionou - pode estar bloqueada pelo sistema")}catch(w){console.error("Erro na vibrao:",w);try{window.DeviceMotionEvent&&typeof DeviceMotionEvent.requestPermission=="function"?ee.info(" Para ativar vibrao no iOS, permita acesso aos sensores de movimento"):(navigator.vibrate(200),ee.info(" Tentativa de vibrao enviada"))}catch{ee.error("Vibrao no suportada neste dispositivo")}}};return c.jsxs("div",{children:[c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Configuraes"}),c.jsx("p",{className:"text-light-darker",children:"Personalize sua experincia"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"card",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(UB,{className:"text-primary mr-2",size:24}),c.jsx("h2",{className:"text-xl font-bold",children:"Aparncia"})]}),c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center",children:[a.isDarkMode?c.jsx(Nb,{className:"mr-2"}):c.jsx(Kh,{className:"mr-2"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:"Tema"}),c.jsx("p",{className:"text-sm text-light-darker",children:a.isDarkMode?"Modo escuro ativo":"Modo claro ativo"})]})]}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:v,className:`
                relative w-14 h-8 rounded-full p-1 transition-colors duration-300
                ${a.isDarkMode?"bg-dark-medium":"bg-gray-400"}
              `,children:c.jsx(F.div,{className:`
                  w-6 h-6 rounded-full flex items-center justify-center transition-colors duration-300
                  ${a.isDarkMode?"bg-primary text-white":"bg-yellow-400 text-gray-800"}
                `,animate:{x:a.isDarkMode?24:0},transition:{type:"spring",stiffness:500,damping:30},children:a.isDarkMode?c.jsx(Nb,{size:14}):c.jsx(Kh,{size:14})})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-medium mb-3",children:"Cor de Destaque"}),c.jsx("div",{className:"grid grid-cols-4 gap-3",children:p.map(w=>c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>g(w.value),className:`
                    w-12 h-12 rounded-full border-2 transition-all
                    ${a.accentColor===w.value?"border-white scale-110":"border-transparent"}
                  `,style:{backgroundColor:w.value},title:w.name},w.value))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium mb-3",children:"Tamanho da Fonte"}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:y.map(w=>c.jsx(F.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>b(w.value),className:`
                    p-3 rounded-lg text-center transition-all
                    ${a.fontSize===w.value?"bg-primary text-white":"bg-dark-light hover:bg-dark-medium"}
                  `,children:w.name},w.value))})]})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"card",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(jb,{className:"text-secondary mr-2",size:24}),c.jsx("h2",{className:"text-xl font-bold",children:"Notificaes"})]}),c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(jb,{className:"mr-2"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:"Sons"}),c.jsx("p",{className:"text-sm text-light-darker",children:"Alertas sonoros durante treinos"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:C,className:"px-3 py-1 bg-dark-medium hover:bg-dark-light rounded text-sm",children:"Testar"}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:T,className:`
                  w-12 h-6 rounded-full p-1 transition-colors
                  ${a.soundEnabled?"bg-primary":"bg-dark-medium"}
                `,children:c.jsx("div",{className:`
                    w-4 h-4 rounded-full bg-white transition-transform
                    ${a.soundEnabled?"translate-x-6":"translate-x-0"}
                  `})})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(VB,{className:"mr-2"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:"Vibrao"}),c.jsxs("p",{className:"text-sm text-light-darker",children:["Feedback ttil nos alertas",/iPad|iPhone|iPod/.test(navigator.userAgent)&&c.jsx("span",{className:"block text-xs text-yellow-500 mt-1",children:" iOS: Funciona apenas durante interaes ativas"})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x,className:"px-3 py-1 bg-dark-medium hover:bg-dark-light rounded text-sm",children:"Testar"}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:_,className:`
                  w-12 h-6 rounded-full p-1 transition-colors
                  ${a.vibrationEnabled?"bg-primary":"bg-dark-medium"}
                `,children:c.jsx("div",{className:`
                    w-4 h-4 rounded-full bg-white transition-transform
                    ${a.vibrationEnabled?"translate-x-6":"translate-x-0"}
                  `})})]})]})]}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"card",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(GB,{className:"text-primary mr-2",size:24}),c.jsx("h2",{className:"text-xl font-bold",children:"Treino"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:"Manter Tela Ligada"}),c.jsx("p",{className:"text-sm text-light-darker",children:"Evita que a tela desligue durante treinos"})]}),c.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:I,className:`
                w-12 h-6 rounded-full p-1 transition-colors
                ${a.keepScreenOn?"bg-primary":"bg-dark-medium"}
              `,children:c.jsx("div",{className:`
                  w-4 h-4 rounded-full bg-white transition-transform
                  ${a.keepScreenOn?"translate-x-6":"translate-x-0"}
                `})})]})]}),u&&c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed bottom-6 left-4 right-4 z-50",children:c.jsx("div",{className:"bg-dark-lighter rounded-xl p-4 shadow-3d border border-primary",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(tN,{className:"text-primary mr-2",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:"Configuraes Alteradas"}),c.jsx("p",{className:"text-xs text-light-darker",children:"Salve para manter as mudanas"})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:N,className:"px-4 py-2 bg-dark-medium hover:bg-dark-light rounded-lg text-sm",children:"Descartar"}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O,disabled:h,className:"px-6 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg font-medium flex items-center disabled:opacity-50",children:h?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):c.jsxs(c.Fragment,{children:[c.jsx(HB,{className:"mr-2",size:16}),"Salvar"]})})]})]})})}),c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},className:"card text-center",children:[c.jsx("h2",{className:"text-xl font-bold mb-2",children:"Treinano"}),c.jsx("p",{className:"text-light-darker mb-4",children:"Seu parceiro de treino"}),c.jsx("p",{className:"text-sm text-light-darker",children:"Verso 1.0.0"}),c.jsx("div",{className:"mt-4 pt-4 border-t border-dark-medium",children:c.jsxs("div",{className:"flex items-center justify-center text-xs text-light-darker",children:[c.jsx(za,{className:"mr-1",size:12}),c.jsxs("span",{children:["Configuraes ",u?"no salvas":"salvas"]})]})})]})]})]})},$W=()=>c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[c.jsx(F.h1,{initial:{scale:.9},animate:{scale:1},transition:{duration:.5,type:"spring",stiffness:200},className:"text-8xl font-bold neon-text mb-4",children:"404"}),c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Pgina no encontrada"}),c.jsx("p",{className:"text-light-darker mb-8",children:"A pgina que voc est procurando no existe ou foi movida."}),c.jsx(Dt,{to:"/",children:c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary flex items-center justify-center mx-auto",children:[c.jsx(eN,{className:"mr-2"}),"Voltar para o Incio"]})})]})}),$N=()=>c.jsx("div",{className:"fixed inset-0 bg-dark flex flex-col items-center justify-center z-50",children:c.jsxs(F.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"text-center",children:[c.jsxs(F.div,{animate:{y:[0,-20,0],rotateZ:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-32 h-32 mx-auto mb-8 relative",children:[c.jsx(F.div,{initial:{scale:0},animate:{scale:1,rotate:360},transition:{type:"spring",stiffness:260,damping:20,delay:.2},children:c.jsx(ft,{className:"text-primary w-full h-full"})}),c.jsx(F.div,{className:"absolute inset-0",animate:{boxShadow:["0 0 20px rgba(255,69,0,0.2)","0 0 40px rgba(255,69,0,0.4)","0 0 20px rgba(255,69,0,0.2)"]},transition:{duration:2,repeat:1/0}})]}),c.jsx(F.h1,{className:"text-4xl font-bold mb-4 neon-text",animate:{textShadow:["0 0 5px #FF4500, 0 0 10px #FF4500","0 0 10px #FF4500, 0 0 20px #FF4500","0 0 5px #FF4500, 0 0 10px #FF4500"]},transition:{duration:2,repeat:1/0},children:"TREINANO"}),c.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-xl text-light-darker mb-8",children:"Seu parceiro de treino"}),c.jsx(F.div,{className:"flex space-x-2 justify-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:[0,1,2].map(t=>c.jsx(F.div,{className:"w-3 h-3 bg-primary rounded-full",animate:{y:[0,-10,0],backgroundColor:["#FF4500","#4A90E2","#FF4500"]},transition:{duration:1,repeat:1/0,delay:t*.2,ease:"easeInOut"}},t))})]})}),BW=({children:t})=>{const e=Xa(),n=Ci(),{signOut:r,user:s}=hr(),{currentWorkout:i,timer:o,formatTimer:a}=Di(),[l,u]=V.useState(!1),d=async()=>{try{await r(),n("/login")}catch(m){console.error("Erro ao fazer logout:",m)}},h=[{path:"/dashboard",icon:c.jsx(eN,{size:24}),label:"Incio"},{path:"/exercises",icon:c.jsx(ft,{size:24}),label:"Exerccios"},{path:"/workout",icon:c.jsx(Gh,{size:24}),label:"Treinar"},{path:"/analytics",icon:c.jsx(Kc,{size:24}),label:"Analytics"},{path:"/achievements",icon:c.jsx(Kn,{size:24}),label:"Conquistas"},{path:"/profile",icon:c.jsx(Ta,{size:24}),label:"Perfil"},{path:"/settings",icon:c.jsx(tN,{size:24}),label:"Config"}];return c.jsxs("div",{className:"min-h-screen flex flex-col bg-dark-lighter",children:[c.jsx("div",{className:"fixed top-0 left-0 right-0 h-6 bg-dark-lighter z-40"}),c.jsx("header",{className:"fixed top-6 left-0 right-0 bg-dark-lighter shadow-md z-50",children:c.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[c.jsxs(Dt,{to:"/dashboard",className:"flex items-center",children:[c.jsx(F.div,{whileHover:{scale:1.1,rotate:5},className:"mr-2",children:c.jsx(ft,{size:28,className:"text-primary"})}),c.jsx("h1",{className:"text-xl font-bold neon-text",children:"TREINANO"})]}),i&&c.jsx("div",{className:"hidden md:flex items-center",children:c.jsx(Zh,{time:a()})}),c.jsx("button",{onClick:()=>u(!l),className:"md:hidden text-light p-2 rounded-full hover:bg-dark-light transition-colors",children:l?c.jsx(Tr,{size:24}):c.jsx(WB,{size:24})}),c.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[h.map(m=>c.jsxs(Dt,{to:m.path,className:`p-2 rounded-lg flex flex-col items-center transition-all duration-300 ${e.pathname===m.path?"text-primary bg-dark-light":"text-light hover:text-primary hover:bg-dark-light"}`,children:[m.icon,c.jsx("span",{className:"text-xs mt-1",children:m.label})]},m.path)),c.jsxs("button",{onClick:d,className:"p-2 rounded-lg flex flex-col items-center text-light hover:text-primary hover:bg-dark-light transition-all duration-300",children:[c.jsx(_y,{size:24}),c.jsx("span",{className:"text-xs mt-1",children:"Sair"})]})]})]})}),c.jsx(Mt,{children:l&&c.jsx(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-dark-lighter border-t border-dark-medium overflow-hidden",children:c.jsxs("nav",{className:"container mx-auto px-4 py-2 flex flex-col",children:[i&&c.jsx("div",{className:"py-2 flex justify-center",children:c.jsx(Zh,{time:a()})}),h.map(m=>c.jsxs(Dt,{to:m.path,onClick:()=>u(!1),className:`p-3 rounded-lg flex items-center space-x-3 transition-all duration-300 ${e.pathname===m.path?"text-primary bg-dark-light":"text-light hover:text-primary hover:bg-dark-light"}`,children:[m.icon,c.jsx("span",{children:m.label})]},m.path)),c.jsxs("button",{onClick:()=>{u(!1),d()},className:"p-3 rounded-lg flex items-center space-x-3 text-light hover:text-primary hover:bg-dark-light transition-all duration-300",children:[c.jsx(_y,{size:24}),c.jsx("span",{children:"Sair"})]})]})})}),c.jsx("main",{className:"flex-grow container mx-auto px-4 py-6 pt-24",children:t}),c.jsx("footer",{className:"bg-dark-lighter py-4 border-t border-dark-medium",children:c.jsx("div",{className:"container mx-auto px-4 text-center text-light-darker text-sm",children:c.jsx("p",{children:" 2025 Treinano - Todos os direitos reservados"})})})]})},zW=()=>{const{user:t,initialized:e,initialize:n}=hr();return V.useEffect(()=>{e||n()},[e,n]),e?t?c.jsx(BW,{children:c.jsx(j4,{})}):c.jsx(Cd,{to:"/login",replace:!0}):c.jsx($N,{})},WW=({onClose:t})=>{const e=()=>{window.deferredPrompt&&(window.deferredPrompt.prompt(),window.deferredPrompt.userChoice.then(n=>{n.outcome==="accepted"?console.log("Usurio aceitou a instalao do A2HS"):console.log("Usurio recusou a instalao do A2HS"),window.deferredPrompt=null})),t()};return c.jsxs(F.div,{className:"fixed bottom-4 left-4 right-4 z-50 p-4 bg-background-paper rounded-lg shadow-lg border border-primary-DEFAULT",initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-bold mb-2",children:"Instalar GymProgress"}),c.jsx("p",{className:"text-text-secondary text-sm",children:"Instale nosso app para uma experincia completa, mesmo offline!"})]}),c.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-background-elevated",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"mt-4 flex space-x-3",children:[c.jsx("button",{onClick:e,className:"flex-1 py-2 px-4 bg-primary-DEFAULT text-white rounded-lg font-medium hover:bg-primary-dark transition-colors",children:"Instalar"}),c.jsx("button",{onClick:t,className:"py-2 px-4 bg-background-elevated rounded-lg hover:bg-background-DEFAULT transition-colors",children:"Agora no"})]})]})},HW=({level:t,onClose:e})=>(V.useEffect(()=>{const n=setTimeout(()=>{e()},5e3);return()=>clearTimeout(n)},[e]),c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",onClick:e,children:[c.jsx(UN,{recycle:!1,numberOfPieces:300}),c.jsxs(F.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1,transition:{type:"spring",stiffness:300,damping:20}},exit:{scale:.5,opacity:0},className:"bg-dark-lighter rounded-xl p-8 w-full max-w-md text-center relative overflow-hidden",onClick:n=>n.stopPropagation(),children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[c.jsx(F.div,{initial:{opacity:.1},animate:{opacity:[.1,.2,.1],transition:{duration:3,repeat:1/0}},className:"absolute -top-20 -left-20 w-40 h-40 rounded-full bg-primary opacity-10"}),c.jsx(F.div,{initial:{opacity:.1},animate:{opacity:[.1,.2,.1],transition:{duration:4,repeat:1/0,delay:1}},className:"absolute -bottom-20 -right-20 w-40 h-40 rounded-full bg-secondary opacity-10"})]}),c.jsx(F.div,{initial:{y:-20},animate:{y:[0,-10,0],transition:{duration:2,repeat:1/0}},className:"mb-6",children:c.jsx("div",{className:"w-24 h-24 rounded-full bg-primary mx-auto flex items-center justify-center",children:c.jsx(Kn,{className:"text-white",size:48})})}),c.jsxs(F.h2,{initial:{scale:.9},animate:{scale:[1,1.05,1],transition:{duration:2,repeat:1/0}},className:"text-3xl font-bold mb-2 neon-text",children:["NVEL ",t]}),c.jsx(F.p,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.5}},className:"text-light-darker mb-6",children:"Parabns! Voc alcanou um novo nvel!"}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:.8}},className:"bg-dark-light p-4 rounded-lg mb-6",children:c.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(vn,{className:"text-primary mr-2"}),c.jsxs("span",{children:["Fora +",t]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(Kn,{className:"text-secondary mr-2"}),c.jsxs("span",{children:["Resistncia +",t]})]})]})}),c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"btn-primary w-full",children:"Continuar"})]})]}));function qW(){const{user:t,initialized:e,initialize:n}=hr(),{fetchUserExercises:r}=Di(),{initializeTheme:s}=Jf(),[i,o]=V.useState(!0),[a,l]=V.useState(!1),[u,d]=V.useState(!1),[h,m]=V.useState(1);return V.useEffect(()=>{(async()=>{e||await n(),console.log(" Inicializando tema aps autenticao..."),s(),QI.initialize();const y=wy.recoverTimers();y.length>0&&console.log(" Timers recuperados:",y),setTimeout(()=>{o(!1)},1e3)})()},[e,n]),V.useEffect(()=>{const p=setTimeout(()=>{console.log(" Verificando e aplicando tema..."),s()},500);return()=>clearTimeout(p)},[]),V.useEffect(()=>{t!=null&&t.uid&&(console.log(" App: Usurio autenticado, carregando exerccios..."),r(t.uid))},[t==null?void 0:t.uid,r]),V.useEffect(()=>{const p=CB({onNeedRefresh(){},onOfflineReady(){}});return()=>{p&&p()}},[]),V.useEffect(()=>{const p=y=>{y.preventDefault(),window.deferredPrompt=y,l(!0)};return window.addEventListener("beforeinstallprompt",p),()=>{window.removeEventListener("beforeinstallprompt",p)}},[]),!e||i?c.jsx($N,{}):c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-b from-dark to-dark-lighter text-light",children:[c.jsxs(D4,{children:[c.jsx(Tn,{path:"/login",element:t?c.jsx(Cd,{to:"/dashboard"}):c.jsx(YB,{})}),c.jsx(Tn,{path:"/register",element:t?c.jsx(Cd,{to:"/dashboard"}):c.jsx(XB,{})}),c.jsxs(Tn,{element:c.jsx(zW,{}),children:[c.jsx(Tn,{path:"/dashboard",element:c.jsx(n7,{})}),c.jsx(Tn,{path:"/exercises",element:c.jsx(d7,{})}),c.jsx(Tn,{path:"/exercises/:id",element:c.jsx(h7,{})}),c.jsx(Tn,{path:"/workout",element:c.jsx(x7,{})}),c.jsx(Tn,{path:"/analytics",element:c.jsx(FW,{})}),c.jsx(Tn,{path:"/profile",element:c.jsx(f7,{})}),c.jsx(Tn,{path:"/achievements",element:c.jsx(LW,{})}),c.jsx(Tn,{path:"/settings",element:c.jsx(UW,{})})]}),c.jsx(Tn,{path:"/",element:c.jsx(Cd,{to:t?"/dashboard":"/login"})}),c.jsx(Tn,{path:"*",element:c.jsx($W,{})})]}),a&&c.jsx(WW,{onClose:()=>l(!1)}),u&&c.jsx(HW,{level:h,onClose:()=>d(!1)})]})}jp.createRoot(document.getElementById("root")).render(c.jsx(me.StrictMode,{children:c.jsxs($4,{children:[c.jsx(qW,{}),c.jsx(bB,{position:"bottom-right",theme:"dark"})]})}));export{Kb as g};
